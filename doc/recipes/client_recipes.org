:PROPERTIES:
:ID: 2E53EE1A-6856-6904-7FEB-AC95C6722A63
:END:
#+title: Client Recipes
#+author: Marco Craveiro
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil

Demonstrates all of the functionality available on the command line tool
=ores.client=.

* Recipes
  :PROPERTIES:
  :header-args: :exports both
  :header-args+: :results raw
  :header-args+: :dir ../../build/output/linux-clang-debug/publish/bin
  :END:


** Client
   :PROPERTIES:
   :header-args+: :var log_args="--log-enabled --log-level trace --log-directory ../log"
   :END:

*** Basic connect

#+begin_src sh :noweb yes :results output  :wrap example
{
    echo "connect localhost 55555 test"
    sleep 1
    echo "exit"
} | ./ores.client ${log_args} client
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Client REPL v0.0.4
Type 'help' for available commands, 'exit' to quit

ores-client> ores-client> ✓ Connected
ores-client> Bye!
#+end_example

*** Auto connect
   :PROPERTIES:
   :header-args+: :var ORES_CLIENT_LOGIN_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "ores")
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :header-args+: :var login_args="--login-username xxx "
   :END:

#+begin_src sh :noweb yes :results output  :wrap example
{
    echo "exit"
} | ./ores.client ${log_args} ${connect_args} client
 client
#+END_SRC

*** Auto login
   :PROPERTIES:
   :header-args+: :var ORES_CLIENT_LOGIN_PASSWORD=123
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :header-args+: :var login_args="--login-username newuser"
   :END:

#+begin_src sh :noweb yes :results output  :wrap example
echo $ORES_CLIENT_LOGIN_PASSWORD
{
    echo "exit"
} | ./ores.client ${log_args} ${connect_args} ${login_args} client
 client
#+END_SRC

#+RESULTS:
#+begin_example
123
#+end_example

*** Create account

#+begin_src sh :noweb yes :results output  :wrap example
{
    echo "connect localhost 55555 test"
    sleep 1
    echo "accounts create newuser3 123 567 newuser3@example.com 1"
    sleep 1
    echo "accounts create newuser3 123 567 newuser3@example.com 1"
    sleep 1
    echo "exit"
} | ./ores.client ${log_args} client
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Client REPL v0.0.4
Type 'help' for available commands, 'exit' to quit

ores-client> ores-client> ✓ Connected
ores-client> ores-client> ✗ Error: Repository error: Executing INSERT failed: ERROR:  duplicate key value violates unique constraint "accounts_username_unique_idx"
DETAIL:  Key (username)=(newuser3) already exists.

ores-client> ores-client> ✗ Error: Repository error: Executing INSERT failed: ERROR:  duplicate key value violates unique constraint "accounts_username_unique_idx"
DETAIL:  Key (username)=(newuser3) already exists.

ores-client> Bye!
#+end_example



* Footer

| Previous: [[id:46F5ED07-9E63-77B4-2783-E0147EFF45D0][Recipes]] |

# Local Variables:
# eval: (whitespace-mode -1)
# End:
