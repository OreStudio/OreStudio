:PROPERTIES:
:ID: A6B7C8D9-E0F1-2345-ABCD-456789012345
:END:
#+title: ores.telemetry Protocol Reference
#+author: Auto-generated by generate_protocol_docs.py
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:t html-postamble:nil
#+startup: overview

Protocol messages for the Telemetry subsystem 
(0x5000-0x5FFF).

See [[id:A7B3C9D2-E5F1-4A8B-9C6D-3E2F1A0B8C7D][Protocol Reference]] for the complete protocol documentation.

* Messages Overview

| ID | Name | Description |
|----+------+-------------|
| 0x5000 | submit_log_records_request | Request to submit a batch of log records to the se... |
| 0x5001 | submit_telemetry_response | Response to submit_log_records_request.  Acknowled... |
| 0x5010 | get_telemetry_logs_request | Request to retrieve telemetry log entries.  Client... |
| 0x5011 | get_telemetry_logs_response | Response containing telemetry log entries. |
| 0x5020 | get_telemetry_stats_request | Request to retrieve telemetry statistics.  Clients... |
| 0x5021 | get_telemetry_stats_response | Response containing telemetry statistics. |

* Message Details

** submit_log_records_request (0x5000)

Request to submit a batch of log records to the server.  This is a fire-and-forget message. The client does not wait for a response and continues processing immediately. The server stores the records in the telemetry database for analysis and correlation.  Records should be batched for efficiency. Typical batch sizes are 50-100 records, or send when a flush interval (e.g., 5 seconds) has elapsed.

*** Fields

| Field | Type | Description |
|-------+------+-------------|
| records | ~std::vector<domain::log_record>~ |  |

*** Wire Format

- 4 bytes: record count (uint32)

** submit_telemetry_response (0x5001)

Response to submit_log_records_request.  Acknowledges receipt of telemetry log entries and reports how many were successfully persisted.

*** Fields

| Field | Type | Description |
|-------+------+-------------|
| success | ~bool~ |  |
| entries_accepted | ~std::uint32_t~ |  |
| message | ~std::string~ |  |

** get_telemetry_logs_request (0x5010)

Request to retrieve telemetry log entries.  Clients send this to query raw log entries within a time range, with optional filters for source, level, component, etc.

*** Fields

| Field | Type | Description |
|-------+------+-------------|
| query | ~domain::telemetry_query~ |  |

** get_telemetry_logs_response (0x5011)

Response containing telemetry log entries.

*** Fields

| Field | Type | Description |
|-------+------+-------------|
| success | ~bool~ |  |
| entries | ~std::vector<domain::telemetry_log_entry>~ |  |
| total_count | ~std::uint64_t~ |  |
| message | ~std::string~ |  |

** get_telemetry_stats_request (0x5020)

Request to retrieve telemetry statistics.  Clients send this to query aggregated statistics from the continuous aggregates (hourly or daily).

*** Fields

| Field | Type | Description |
|-------+------+-------------|
| query | ~domain::telemetry_stats_query~ |  |

** get_telemetry_stats_response (0x5021)

Response containing telemetry statistics.

*** Fields

| Field | Type | Description |
|-------+------+-------------|
| success | ~bool~ |  |
| stats | ~std::vector<domain::telemetry_stats>~ |  |
| message | ~std::string~ |  |
