:PROPERTIES:
:ID: 2E53EE1A-6856-6904-7FEB-AC95C6722A63
:END:
#+title: ORE Studio Shell Recipes
#+author: Marco Craveiro
#+startup: inlineimages
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil

Demonstrates all of the functionality available on the [[id:D0876A24-69BA-F484-ED9B-71CD3AA8710C][ORE Studio Comms Shell
Component]].

* Recipes
  :PROPERTIES:
  :header-args: :exports both
  :header-args+: :results raw
  :header-args+: :dir ../../build/output/linux-clang-debug/publish/bin
  :header-args+: :var log_args="--log-enabled --log-level trace --log-directory ../log"
  :header-args+: :var login_args="--login-username newuser3"
  :header-args+: :var connect_args="--connect-host localhost --connect-port 51004 --connect-identifier recipes"
  :header-args+: :var ORES_COMMS_SHELL_LOGIN_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "newuser3")
  :END:

** General

*** Help

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} --help
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell is an interactive REPL for ORE Studio.
It provides a command-line interface for connecting to and interacting with ores.comms.service.

Usage: ores.comms.shell [options]


General:
  -h [ --help ]                         Display usage and exit.
  -v [ --version ]                      Output version information and exit.

Logging:
  -e [ --log-enabled ]                  Generate a log file.
  -l [ --log-level ] arg (=info)        What level to use for logging. Valid
                                        values: trace, debug, info, warn,
                                        error.
  --log-to-console                      Output logging to the console, as well
                                        as to file.
  --log-directory arg (=log)            Where to place the log files.
  --log-filename arg (=ores.comms.shell.log)
                                        Name of the log file.
  --log-include-pid                     Include process ID in log filename
                                        (e.g., app.12345.log).

Telemetry:
  --telemetry-enabled                   Enable telemetry export. When enabled,
                                        all log records are exported to a JSON
                                        Lines file for log aggregation.
  --telemetry-service-name arg (=ores-comms-shell)
                                        Name of the service producing
                                        telemetry. Used as service.name in
                                        resource attributes.
  --telemetry-service-version arg (=0.0.11)
                                        Version of the service producing
                                        telemetry. Used as service.version in
                                        resource attributes.
  --telemetry-output-file arg (=telemetry.jsonl)
                                        Name of the telemetry output file (JSON
                                        Lines format).
  --telemetry-output-directory arg (=log)
                                        Directory in which to place the
                                        telemetry output file.
  --telemetry-streaming-enabled         Enable streaming of log records to the
                                        server. When enabled, log records are
                                        batched and sent to the connected
                                        server.
  --telemetry-batch-size arg (=50)      Number of records to batch before
                                        sending to the server.
  --telemetry-flush-interval arg (=5)   Maximum seconds to wait before flushing
                                        a partial batch.

Connection:
  --connect-host arg                    Host to connect to (e.g., localhost)
  --connect-port arg                    Port to connect to (e.g., 55555)
  --connect-identifier arg              Client identifier to use when
                                        connecting

Login:
  --login-username arg                  Username for authentication
  --login-password arg                  Password for authentication

#+end_example

*** Version

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} --version
#+end_src

#+RESULTS:
#+begin_example
Client for ORE Studio v0.0.11
Copyright (C) 2025 Marco Craveiro.
License GPLv3: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
local 49bc733d-dirty 2026/02/02 17:29:54
IMPORTANT: build details are NOT for security purposes.
#+end_example


*** Help Menu

#+name: help-exit
#+begin_src ores-shell :exports none
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - change-reason-categories
	(menu)
 - change-reasons
	(menu)
 - connect <string> <string> <string>
	Connect to server (optional: host port identifier)
 - disconnect
	Disconnect from server
 - countries
	(menu)
 - currencies
	(menu)
 - accounts
	(menu)
 - bootstrap <string> <string> <string>
	Create initial admin (principal password email) - principal is username@hostname or username
 - login <string> <string>
	Login with principal (username@hostname or username) and password
 - logout
	Logout the current user (alias for 'accounts logout')
 - variability
	(menu)
 - compression <string> <string>
	Set compression: 'compression off', 'compression on', 'compression on <algo>' (zlib/gzip/bzip2)
 - compression
	Show current compression setting
 - events
	(menu)
 - permissions
	(menu)
 - roles
	(menu)
 - tenants
	(menu)
ores-shell> Bye!
#+end_example

** Accounts

Functionality related to the accounts domain entity in [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio IAM Component]].

*** Help Menu

#+name: help-accounts-exit
#+begin_src ores-shell :exports none
accounts
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-accounts-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> accounts> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - create <string> <string> <string> <string>
	Create a new account (principal password totp_secret email) - principal is username@hostname or username
 - list
	Retrieve all accounts from the server
 - login <string> <string>
	Login with principal (username@hostname or username) and password
 - lock <string>
	Lock an account (account_id) - requires accounts:lock permission
 - unlock <string>
	Unlock a locked account (account_id) - requires accounts:unlock permission
 - list-logins
	Retrieve all login info records from the server
 - logout
	Logout the current user
 - roles <string>
	List roles assigned to an account (account_id)
 - assign-role <string> <string>
	Assign a role to an account (account_id role_id)
 - revoke-role <string> <string>
	Revoke a role from an account (account_id role_id)
 - permissions <string>
	List effective permissions for an account (account_id)
 - sessions
	List your session history
 - sessions-for <string>
	List sessions for an account (account_id) - requires accounts:read permission
 - active-sessions
	List your currently active sessions
 - session-stats
	Show session statistics for the last 30 days
 - session-stats-days <int>
	Show session statistics for the specified number of days
 - history <string>
	Get version history for an account by username
 - ores-shell
	(menu)
accounts> Bye!
#+end_example

*** Auto connect

#+name: auto-connect
#+begin_src ores-shell :exports none
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<auto-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation
  Use 'bootstrap <username> <password> <email>' to create the initial admin account.

ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> Bye!
#+end_example

*** Basic connect

#+name: basic-connect
#+begin_src ores-shell :exports none
connect localhost 51004 test
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<basic-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Connected to :51004

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation

ores-shell> Bye!
#+end_example

*** Bootstrap

Create the initial admin account.

#+name: initial-bootstrap
#+begin_src ores-shell :exports none
bootstrap newuser3 Secure-Password-123 newuser3@test.com
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<initial-bootstrap>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation
  Use 'bootstrap <username> <password> <email>' to create the initial admin account.

ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Initial admin account created successfully!
  Account ID: 019c2a9c-afe4-7292-9efe-a8946411caec
  Tenant: System (00000000-0000-0000-0000-000000000000)
  You can now login with the credentials provided.
ores-shell> Bye!
#+end_example

*** Auto login
   :PROPERTIES:
   :ID: CA27A829-0A1C-2C44-9AE3-D389D3898C4E
   :END:

#+name: auto-login
#+begin_src ores-shell :exports none
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<auto-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> Bye!
#+end_example

*** Login logout

#+name: login-alias
#+begin_src ores-shell :exports none
connect localhost 51004 test
login newuser3 Secure-Password-123
logout
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<login-alias>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Connected to :51004
ores-shell> ✓ Login successful!
  User: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ores-shell> ✓ Logged out successfully.
ores-shell> Bye!
#+end_example

*** Login

Explicit login is discouraged as it saves your credentials to the history.
Instead, consider using [[id:CA27A829-0A1C-2C44-9AE3-D389D3898C4E][Auto login]].

#+name: explicit-login
#+begin_src ores-shell :exports none
accounts login newuser3 Secure-Password-123
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Login successful!
  User: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ores-shell> Bye!
#+end_example

*** Logout

Explicit logout.

#+name: explicit-logout
#+begin_src ores-shell :exports none
accounts login newuser3 Secure-Password-123
accounts logout
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-logout>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Login successful!
  User: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ores-shell> ✓ Logged out successfully.
ores-shell> Bye!
#+end_example

*** Create

Creates new user accounts on system tenant.

#+name: create-account
#+begin_src ores-shell :exports none
accounts create newuser40 Secure-Password-123 567 newuser40@example.com
accounts create newuser41 Secure-Password-123 567 newuser41@example.com
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<create-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Account created with ID: 019c2a9d-ea3a-76f5-a152-cf85f2adce9f
ores-shell> ✓ Account created with ID: 019c2a9d-eab1-7d1c-9e3f-dc689236f099
ores-shell> Bye!
#+end_example

*** List

Lists existing accounts.

#+name: list-account
#+begin_src ores-shell :exports none
accounts list
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+--------------------+-----------------------+---------------------+-------------+-------------------------------+---------+
| ID (UUID)                            | Username           | Email                 | Change Reason       | Recorded By | Recorded At                   | Version |
+--------------------------------------+--------------------+-----------------------+---------------------+-------------+-------------------------------+---------+
| 019c2a9d-eab1-7d1c-9e3f-dc689236f099 | newuser41          | newuser41@example.com | system.new_record   | postgres    | 2026-02-04 21:45:18.000000000 | 1       |
| 019c2a9d-ea3a-76f5-a152-cf85f2adce9f | newuser40          | newuser40@example.com | system.new_record   | postgres    | 2026-02-04 21:45:18.000000000 | 1       |
| 019c2a9c-afe4-7292-9efe-a8946411caec | newuser3           | newuser3@test.com     | system.new_record   | bootstrap   | 2026-02-04 21:43:57.000000000 | 1       |
| 366aef0f-fa41-4269-bf5f-70466ce6fb29 | ores_test_dml_user | test_dml@system.ores  | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
| bf91c7f6-dd57-49ae-817b-2ac4f822ca5f | ores_test_ddl_user | test_ddl@system.ores  | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
| 5e958b97-cd55-4eac-b922-bd15a97a9761 | ores_http_user     | http@system.ores      | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
| 19a6edb1-0439-4c56-b0d3-212c07996f27 | ores_comms_user    | comms@system.ores     | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
| 0e505156-746b-4f3e-a2c4-4d995d2f19d4 | ores_wt_user       | wt@system.ores        | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
| 20d944e2-4b6c-40b7-9c17-13734f4c3a1f | ores_cli_user      | cli@system.ores       | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
| dcec2342-3f7a-4635-becf-3af109d81af6 | ores_ddl_user      | ddl@system.ores       | system.initial_load | postgres    | 2026-02-04 21:26:57.000000000 | 1       |
+--------------------------------------+--------------------+-----------------------+---------------------+-------------+-------------------------------+---------+


ores-shell> Bye!
#+end_example

*** List Login Info

Lists login information.

#+name: list-login-info
#+begin_src ores-shell :exports none
accounts list-logins
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-login-info>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| Account ID                           | Last IP   | Last Attempt IP | Failed | Locked | Online | Last Login          |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| 019c2a9d-ea3a-76f5-a152-cf85f2adce9f | 0.0.0.0   | 0.0.0.0         | 0      | N      | N      | 1970-01-01 00:00:00 |
| 019c2a9d-eab1-7d1c-9e3f-dc689236f099 | 0.0.0.0   | 0.0.0.0         | 0      | N      | N      | 1970-01-01 00:00:00 |
| 019c2a9c-afe4-7292-9efe-a8946411caec | 127.0.0.1 | 127.0.0.1       | 0      | N      | Y      | 2026-02-04 21:45:53 |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+


ores-shell> Bye!
#+end_example

*** Lock

Lock an account to prevent login.

#+name: lock-account
#+begin_src ores-shell :exports none
accounts lock 019c2a9d-ea3a-76f5-a152-cf85f2adce9f
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<lock-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Account locked successfully!
  Account ID: 019c2a9d-ea3a-76f5-a152-cf85f2adce9f
ores-shell> Bye!
#+end_example

*** Unlock

Unlock a previously locked account.

#+name: unlock-account
#+begin_src ores-shell :exports none
accounts unlock 019c2a9d-ea3a-76f5-a152-cf85f2adce9f
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<unlock-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Account unlocked successfully!
  Account ID: 019c2a9d-ea3a-76f5-a152-cf85f2adce9f
ores-shell> Bye!
#+end_example

*** Account Roles

List roles assigned to an account.

#+name: account-roles
#+begin_src ores-shell :exports none
accounts roles 019c2a9c-afe4-7292-9efe-a8946411caec
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<account-roles>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
Roles for Account: 019c2a9c-afe4-7292-9efe-a8946411caec

+--------------------------------------+-------+----------------------------------------------------+-------------+-------------+---------+
| ID (UUID)                            | Name  | Description                                        | Permissions | Recorded By | Version |
+--------------------------------------+-------+----------------------------------------------------+-------------+-------------+---------+
| e3e4c8ac-8ba7-432c-bece-aff67b4720b7 | Admin | Full administrative access to all system functions | *           | postgres    | 1       |
+--------------------------------------+-------+----------------------------------------------------+-------------+-------------+---------+


ores-shell> Bye!
#+end_example

*** Account Permissions

List effective permissions for an account.

#+name: account-permissions
#+begin_src ores-shell :exports none
accounts permissions 019c2a9c-afe4-7292-9efe-a8946411caec
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<account-permissions>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
Effective Permissions for Account: 019c2a9c-afe4-7292-9efe-a8946411caec
=======================================================================

  - *

Total: 1 item(s)
ores-shell> Bye!
#+end_example

*** Assign Role

Assign a role to an account.

#+name: assign-role
#+begin_src ores-shell :exports none
roles list
accounts assign-role 019bae63-e9cd-7e8b-a378-2e0ca0d48610 82f4dda0-32c4-4cf2-9da8-ddb8bd7e982b
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<assign-role>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+-------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| ID (UUID)                            | Name        | Description                                                   | Permissions                                                   | Recorded By | Version |
+--------------------------------------+-------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| e3e4c8ac-8ba7-432c-bece-aff67b4720b7 | Admin       | Full administrative access to all system functions            | *                                                             | postgres    | 1       |
| 9eae96db-1db0-4668-97ab-dcd3c08f2e84 | Operations  | Operations - currency management and account viewing          | accounts:read, currencies:create, currencies:delete (+4 more) | postgres    | 1       |
| 32b431ae-f56a-4178-8d2f-8d08b7681ecb | Sales       | Sales operations - read-only currency access                  | currencies:read, flags:read                                   | postgres    | 1       |
| 6aa4d6a8-f259-4b16-b197-42b31e3740d2 | SuperAdmin  | Platform super administrator with tenant management access    | *, tenants:create, tenants:impersonate (+4 more)              | postgres    | 1       |
| de2a1deb-f0e1-4b9d-b1e0-b0e8f143fa62 | Support     | Support - read-only access to all resources and admin screens | accounts:read, currencies:history, currencies:read (+3 more)  | postgres    | 1       |
| cbcb15c3-1bb1-49d1-b8b7-7bbfd5ff1dd7 | TenantAdmin | Tenant administrator with full access within a tenant         | *                                                             | postgres    | 1       |
| 00cad95f-c021-4b8c-a0e9-e587fff91f52 | Trading     | Trading operations - currency read access                     | currencies:history, currencies:read, flags:read               | postgres    | 1       |
| 52e6f885-9641-4f6e-bda3-5d62c2489406 | Viewer      | Viewer - basic read-only access to domain data                | currencies:read, flags:read                                   | postgres    | 1       |
+--------------------------------------+-------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+


ores-shell> X Failed to assign role: Failed to assign role: Role not found: 82f4dda0-32c4-4cf2-9da8-ddb8bd7e982b
ores-shell> Bye!
#+end_example

*** Revoke Role

Revoke a role from an account.

#+name: revoke-role
#+begin_src ores-shell :exports none
accounts revoke-role 019bae63-e9cd-7e8b-a378-2e0ca0d48610 82f4dda0-32c4-4cf2-9da8-ddb8bd7e982b
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<revoke-role>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> V Role revoked successfully!
  Account ID: 019bae63-e9cd-7e8b-a378-2e0ca0d48610
  Role ID:    82f4dda0-32c4-4cf2-9da8-ddb8bd7e982b
ores-shell> Bye!
#+end_example

*** History

Get version history for an account.

#+name: account-history
#+begin_src ores-shell :exports none
accounts history newuser41
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<account-history>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> +---------+-----------+-----------------------+-------------+-------------------------------+----------------+
| Version | Username  | Email                 | Recorded By | Recorded At                   | Change Summary |
+---------+-----------+-----------------------+-------------+-------------------------------+----------------+
| 1       | newuser41 | newuser41@example.com | ores        | 2026-01-11 18:49:02.000000000 | Version 1      |
+---------+-----------+-----------------------+-------------+-------------------------------+----------------+

ores-shell> Bye!
#+end_example


** Tenants

Tenant management functionality for multi-tenancy support in [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio IAM
Component]].

*** Help Menu

#+name: help-tenants-exit
#+begin_src ores-shell :exports none
tenants
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-tenants-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> tenants> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all tenants from the server
 - add <string> <string> <string> <string> <string>
	Add a tenant (code name type hostname description)
 - history <string>
	Show history for a tenant (tenant_id)
 - delete <string>
	Delete a tenant (tenant_id)
 - ores-shell
	(menu)
tenants> Bye!
#+end_example

*** Get Tenants

Retrieve all tenants from the server.

#+name: tenants-get
#+begin_src ores-shell :exports none
tenants get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<tenants-get>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+------------------------------------------------------------+------------------------------------------------------------+----------+----------------------------------------------------------------------+--------+--------------------+---------+
| Code                                                       | Name                                                       | Type     | Hostname                                                             | Status | Recorded By        | Version |
+------------------------------------------------------------+------------------------------------------------------------+----------+----------------------------------------------------------------------+--------+--------------------+---------+
| ores.database.tests_20260204_210832_2516613_7890           | ores.database.tests_20260204_210832_2516613_7890           | test     | ores.database.tests_20260204_210832_2516613_7890.localhost           | active | ores_test_dml_user | 1       |
| ores.eventing.tests_20260204_211018_2521337_9377           | ores.eventing.tests_20260204_211018_2521337_9377           | test     | ores.eventing.tests_20260204_211018_2521337_9377.localhost           | active | ores_test_dml_user | 1       |
| ores.platform.tests_20260204_210826_2515998_4705           | ores.platform.tests_20260204_210826_2515998_4705           | test     | ores.platform.tests_20260204_210826_2515998_4705.localhost           | active | ores_test_dml_user | 1       |
| ores.telemetry.database.tests_20260204_210848_2517492_5720 | ores.telemetry.database.tests_20260204_210848_2517492_5720 | test     | ores.telemetry.database.tests_20260204_210848_2517492_5720.localhost | active | ores_test_dml_user | 1       |
| ores.telemetry.tests_20260204_210842_2516971_8464          | ores.telemetry.tests_20260204_210842_2516971_8464          | test     | ores.telemetry.tests_20260204_210842_2516971_8464.localhost          | active | ores_test_dml_user | 1       |
| ores.utility.tests_20260204_210701_2514547_1836            | ores.utility.tests_20260204_210701_2514547_1836            | test     | ores.utility.tests_20260204_210701_2514547_1836.localhost            | active | ores_test_dml_user | 1       |
| ores.variability.tests_20260204_210850_2517612_2808        | ores.variability.tests_20260204_210850_2517612_2808        | test     | ores.variability.tests_20260204_210850_2517612_2808.localhost        | active | ores_test_dml_user | 1       |
| system                                                     | System                                                     | platform | localhost                                                            | active | postgres           | 1       |
+------------------------------------------------------------+------------------------------------------------------------+----------+----------------------------------------------------------------------+--------+--------------------+---------+


ores-shell> Bye!
#+end_example

*** Get All Tenants

Retrieve all tenants from the server.

#+name: tenants-get-all
#+begin_src ores-shell :exports none
tenants get-all
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<tenants-get-all>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation
  Use 'bootstrap <username> <password> <email>' to create the initial admin account.

✗ Auto-login failed: System is in bootstrap mode. Only initial admin account creation is allowed. Please create the initial admin account from localhost.
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✗ Not logged in
ores-shell> Bye!
#+end_example


*** Add Tenant

Create a new tenant with the specified parameters.

#+name: tenants-add
#+begin_src ores-shell :exports none
tenants add acme "ACME Corp" organisation acme.example.com "ACME Corporation tenant"
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<tenants-add>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Tenant added successfully!
  ID: 5da8cae4-9bd3-495a-89d2-7ce8c0d43b37
ores-shell> Bye!
#+end_example

*** Create Account on Tenant
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Creates new user accounts on system tenant.

#+name: create-account
#+begin_src ores-shell :exports none
accounts create newuser40@acme Secure-Password-123 567 newuser40@acme.com
accounts create newuser41@acme Secure-Password-123 567 newuser41@acme.com
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<create-account>>
EOF
#+END_SRC

*** Tenant History

Get version history for a specific tenant.

#+name: tenants-history
#+begin_src ores-shell :exports none
tenants history 00000000-0000-0000-0000-000000000000
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<tenants-history>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> History for tenant 00000000-0000-0000-0000-000000000000 (1 versions):
--------------------------------------------------------------------------------
  Version 1
    Code: system
    Name: System
    Type: system_tenant
    Hostname: localhost
    Status: active
    Recorded: 2026-02-02 19:24:23 by system
    Reason: system.new_record - System tenant created during database initialization

ores-shell> Bye!
#+end_example

*** Delete Tenant

Delete a tenant by ID. Note: The system tenant cannot be deleted.

#+name: tenants-delete
#+begin_src ores-shell :exports none
tenants delete 019c1234-5678-90ab-cdef-1234567890ab
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<tenants-delete>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Tenant deleted successfully!
ores-shell> Bye!
#+end_example


** Variability

Functionality related to the accounts domain entity in [[id:1EE1B07C-3EC4-9BC4-1C4B-5BD458A8B2E5][ORE Studio Variability
Component]].

*** Help Menu

#+name: help-variability-exit
#+begin_src ores-shell :exports none
variability
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-variability-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> variability> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - list-flags
	Retrieve all feature flags from the server
 - add-flag <string> <string> <string> <string> <string>
	Add a feature flag (name enabled description reason_code "commentary")
 - delete-flag <string>
	Delete a feature flag by name
 - flag-history <string>
	Get version history for a feature flag by name
 - ores-shell
	(menu)
variability> Bye!
#+end_example


*** List Feature Flags
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

#+name: list-feature-flags
#+begin_src ores-shell :exports none
variability list-flags
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-feature-flags>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------+-------------------------------+
| Name                                 | Version | Description                                                                                                         | Enabled | Recorded By | Recorded At                   |
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------+-------------------------------+
| test.feature.flag                    | 1       | Test feature flag for recipes                                                                                       | 0       | newuser3    | 2026-01-11 18:55:37.000000000 |
| system.bootstrap_mode                | 1       | Indicates whether the system is in bootstrap mode (waiting for initial admin account).                              | 0       | system      | 2026-01-09 16:39:09.000000000 |
| system.synthetic_data_generation     | 1       | Enables synthetic test data generation in the UI. FOR TESTING/DEVELOPMENT ONLY.                                     | 0       | system      | 2026-01-09 16:37:36.000000000 |
| system.disable_password_validation   | 1       | When enabled, disables strict password validation. FOR TESTING/DEVELOPMENT ONLY.                                    | 0       | system      | 2026-01-09 16:37:36.000000000 |
| system.signup_requires_authorization | 1       | Controls whether new signups require admin authorization. NOT YET IMPLEMENTED - enabling will cause signup to fail. | 0       | system      | 2026-01-09 16:37:36.000000000 |
| system.user_signups                  | 1       | Controls whether user self-registration is allowed.                                                                 | 0       | system      | 2026-01-09 16:37:36.000000000 |
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------+-------------------------------+


ores-shell> Bye!
#+end_example


*** Add Feature Flag

Add a new feature flag.

#+name: add-feature-flag
#+begin_src ores-shell :exports none
variability add-flag test.feature.flag false "Test feature flag for recipes" system.new_record "Test"
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<add-feature-flag>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Feature flag added successfully!
ores-shell> Bye!
#+end_example

*** Delete Feature Flag

Delete a feature flag by name.

#+name: delete-feature-flag
#+begin_src ores-shell :exports none
variability delete-flag test.feature.flag
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<delete-feature-flag>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Feature flag deleted successfully!
ores-shell> Bye!
#+end_example

*** Feature Flag History

Get version history for a feature flag.

#+name: feature-flag-history
#+begin_src ores-shell :exports none
variability flag-history system.bootstrap_mode
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<feature-flag-history>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+-----------------------+---------+----------------------------------------------------------------------------------------+---------+-------------------+-------------+-------------------------------+
| Name                  | Version | Description                                                                            | Enabled | Change Reason     | Recorded By | Recorded At                   |
+-----------------------+---------+----------------------------------------------------------------------------------------+---------+-------------------+-------------+-------------------------------+
| system.bootstrap_mode | 1       | Indicates whether the system is in bootstrap mode (waiting for initial admin account). | 0       | system.new_record | system      | 2026-01-09 16:39:09.000000000 |
+-----------------------+---------+----------------------------------------------------------------------------------------+---------+-------------------+-------------+-------------------------------+


ores-shell> Bye!
#+end_example


** Currencies

Functionality related to the currencies domain entity in [[id:204DB292-C32B-03E4-9DDB-BFE634F7CE91][ORE Studio RefData
Component]].

*** Help Menu

#+name: help-currencies-exit
#+begin_src ores-shell :exports none
currencies
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-currencies-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> currencies> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all currencies from the server
 - add <string> <string> <string> <string> <string>
	Add a currency (iso_code name [numeric_code] [symbol] [fractions_per_unit])
 - delete <string>
	Delete a currency by ISO code
 - history <string>
	Get version history for a currency by ISO code
 - ores-shell
	(menu)
currencies> Bye!
#+end_example

*** Get

Get all currencies in the system.

#+name: currencies-list
#+begin_src ores-shell :exports none
currencies get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-list>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>

+----------+---------+-----------------------------------------+--------+------+----------------+-----------+----------------------------+-------------+-------------------------------+
| ISO Code | Version | Name                                    | Symbol | Type | Fractions/Unit | Precision | Change Reason              | Recorded By | Recorded At                   |
+----------+---------+-----------------------------------------+--------+------+----------------+-----------+----------------------------+-------------+-------------------------------+
| USD      | 2       | US Dollar                               | $      | fiat | 100            | 1         | common.non_material_update | newuser3    | 2026-01-09 21:05:44.000000000 |
| CAD      | 1       | Canadian Dollar                         | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MXN      | 1       | Mexican Peso                            | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BRL      | 1       | Brazilian Real                          | R$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| ARS      | 1       | Argentine Peso                          | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| CLP      | 1       | Chilean Peso                            | $      | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| COP      | 1       | Colombian Peso                          | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PEN      | 1       | Peruvian Sol                            | S/     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| UYU      | 1       | Uruguayan Peso                          | $U     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PYG      | 1       | Paraguayan Guarani                      | ₲    | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BOB      | 1       | Bolivian Boliviano                      | Bs     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| VES      | 1       | Venezuelan Bolivar                      | Bs     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| CRC      | 1       | Costa Rican Colon                       | ₡    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PAB      | 1       | Panamanian Balboa                       | B/.    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| GTQ      | 1       | Guatemalan Quetzal                      | Q      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| HNL      | 1       | Honduran Lempira                        | L      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| NIO      | 1       | Nicaraguan Cordoba                      | C$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| DOP      | 1       | Dominican Peso                          | RD$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| CUP      | 1       | Cuban Peso                              | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| JMD      | 1       | Jamaican Dollar                         | J$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| TTD      | 1       | Trinidad and Tobago Dollar              | TT$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BBD      | 1       | Barbadian Dollar                        | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BSD      | 1       | Bahamian Dollar                         | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| HTG      | 1       | Haitian Gourde                          | G      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| SRD      | 1       | Surinamese Dollar                       | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| GYD      | 1       | Guyanese Dollar                         | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BZD      | 1       | Belize Dollar                           | BZ$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| AWG      | 1       | Aruban Florin                           | ƒ     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| ANG      | 1       | Netherlands Antillean Guilder           | ƒ     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| KYD      | 1       | Cayman Islands Dollar                   | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BMD      | 1       | Bermudian Dollar                        | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| FKP      | 1       | Falkland Islands Pound                  | £     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| XCD      | 1       | East Caribbean Dollar                   | $      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| EUR      | 1       | Euro                                    | €    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| GBP      | 1       | British Pound Sterling                  | £     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| CHF      | 1       | Swiss Franc                             | CHF    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| NOK      | 1       | Norwegian Krone                         | kr     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| SEK      | 1       | Swedish Krona                           | kr     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| DKK      | 1       | Danish Krone                            | kr     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| ISK      | 1       | Icelandic Krona                         | kr     | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PLN      | 1       | Polish Zloty                            | zł    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| CZK      | 1       | Czech Koruna                            | Kč    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| HUF      | 1       | Hungarian Forint                        | Ft     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| RON      | 1       | Romanian Leu                            | lei    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BGN      | 1       | Bulgarian Lev                           | лв   | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| HRK      | 1       | Croatian Kuna                           | kn     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| RSD      | 1       | Serbian Dinar                           | дин | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BAM      | 1       | Bosnia and Herzegovina Convertible Mark | KM     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MKD      | 1       | Macedonian Denar                        | ден | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| ALL      | 1       | Albanian Lek                            | L      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MDL      | 1       | Moldovan Leu                            | L      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| UAH      | 1       | Ukrainian Hryvnia                       | ₴    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BYN      | 1       | Belarusian Ruble                        | Br     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| RUB      | 1       | Russian Ruble                           | ₽    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| GEL      | 1       | Georgian Lari                           | ₾    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| AMD      | 1       | Armenian Dram                           | ֏     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| AZN      | 1       | Azerbaijani Manat                       | ₼    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| TRY      | 1       | Turkish Lira                            | ₺    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| GIP      | 1       | Gibraltar Pound                         | £     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| JPY      | 1       | Japanese Yen                            | ¥     | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| CNY      | 1       | Chinese Yuan                            | ¥     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| HKD      | 1       | Hong Kong Dollar                        | HK$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| TWD      | 1       | New Taiwan Dollar                       | NT$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| KRW      | 1       | South Korean Won                        | ₩    | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| KPW      | 1       | North Korean Won                        | ₩    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| SGD      | 1       | Singapore Dollar                        | S$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MYR      | 1       | Malaysian Ringgit                       | RM     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| IDR      | 1       | Indonesian Rupiah                       | Rp     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| THB      | 1       | Thai Baht                               | ฿    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| VND      | 1       | Vietnamese Dong                         | ₫    | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PHP      | 1       | Philippine Peso                         | ₱    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| INR      | 1       | Indian Rupee                            | ₹    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PKR      | 1       | Pakistani Rupee                         | Rs     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BDT      | 1       | Bangladeshi Taka                        | ৳    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| LKR      | 1       | Sri Lankan Rupee                        | Rs     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| NPR      | 1       | Nepalese Rupee                          | Rs     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MMK      | 1       | Myanmar Kyat                            | K      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| KHR      | 1       | Cambodian Riel                          | ៛    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| LAK      | 1       | Lao Kip                                 | ₭    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MNT      | 1       | Mongolian Tugrik                        | ₮    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| KZT      | 1       | Kazakhstani Tenge                       | ₸    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| UZS      | 1       | Uzbekistani Som                         | сўм | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| KGS      | 1       | Kyrgyzstani Som                         | с     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| TJS      | 1       | Tajikistani Somoni                      | ЅМ   | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| TMT      | 1       | Turkmenistani Manat                     | m      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| AFN      | 1       | Afghan Afghani                          | ؋     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| AUD      | 1       | Australian Dollar                       | A$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| NZD      | 1       | New Zealand Dollar                      | NZ$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| FJD      | 1       | Fijian Dollar                           | FJ$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| PGK      | 1       | Papua New Guinean Kina                  | K      | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| SBD      | 1       | Solomon Islands Dollar                  | SI$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| VUV      | 1       | Vanuatu Vatu                            | VT     | fiat | 0              | 0         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| WST      | 1       | Samoan Tala                             | WS$    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| TOP      | 1       | Tongan Paanga                           | T$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MOP      | 1       | Macanese Pataca                         | MOP$   | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BND      | 1       | Brunei Dollar                           | B$     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| BTN      | 1       | Bhutanese Ngultrum                      | Nu.    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| MVR      | 1       | Maldivian Rufiyaa                       | Rf     | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| SAR      | 1       | Saudi Riyal                             | ﷼    | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
| AED      | 1       | UAE Dirham                              | د.إ  | fiat | 100            | 2         | system.new_record          | system      | 2026-01-09 16:37:39.000000000 |
+----------+---------+-----------------------------------------+--------+------+----------------+-----------+----------------------------+-------------+-------------------------------+



ores-shell> Bye!
#+end_example

*** Add

Add a new currency.

#+name: currencies-add
#+begin_src ores-shell :exports none
currencies add TEST700 Test700 700 A 100
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-add>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✗ Failed to add currency: Failed to save currency: Repository error: Executing INSERT failed: ERROR:  new row for relation "currencies" violates check constraint "currencies_change_reason_code_check"
DETAIL:  Failing row contains (TEST700, 1, Test700, 700, A, , 100, Nearest, 2, , fiat, null, newuser3, , , 2026-01-11 18:59:25.874112+00, 9999-12-31 23:59:59+00).

ores-shell> Bye!
#+end_example

*** Delete

Delete a currency by ISO code.

#+name: currencies-delete
#+begin_src ores-shell :exports none
currencies delete TEST700
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-delete>>
EOF
#+end_src

*** History

Get version history for a currency.

#+name: currencies-history
#+begin_src ores-shell :exports none
currencies history USD
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-history>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+---------+----------+-----------+-------------+-------------------------------+----------------+
| Version | ISO Code | Name      | Recorded By | Recorded At                   | Change Summary |
+---------+----------+-----------+-------------+-------------------------------+----------------+
| 2       | USD      | US Dollar | newuser3    | 2026-01-09 21:05:44.000000000 | Version 2      |
| 1       | USD      | US Dollar | system      | 2026-01-09 16:37:39.000000000 | Version 1      |
+---------+----------+-----------+-------------+-------------------------------+----------------+


ores-shell> Bye!
#+end_example


** Roles

Role-Based Access Control functionality for managing roles, in [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio IAM
Component]].

*** Help

#+name: help-roles-exit
#+begin_src ores-shell :exports none
roles
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-roles-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> roles> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - list
	List all roles in the system
 - get <string>
	Get role details (role_name or role_id)
 - ores-shell
	(menu)
roles> Bye!
#+end_example

*** List

List all roles in the system.

#+name: list-roles
#+begin_src ores-shell :exports none
roles list
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<list-roles>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| ID (UUID)                            | Name       | Description                                                   | Permissions                                                   | Recorded By | Version |
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| f60d8103-0283-4d46-aa4c-aa6bb50934d9 | Admin      | Full administrative access to all system functions            | *                                                             | system      | 1       |
| d6ac9d9f-91c3-40d2-998d-0e18604a8687 | Operations | Operations - currency management and account viewing          | accounts:read, currencies:create, currencies:delete (+4 more) | system      | 1       |
| 82f4dda0-32c4-4cf2-9da8-ddb8bd7e982b | Sales      | Sales operations - read-only currency access                  | currencies:read, flags:read                                   | system      | 1       |
| 1bc4ce25-7f72-4ac1-b42a-6c11dd350906 | Support    | Support - read-only access to all resources and admin screens | accounts:read, currencies:history, currencies:read (+3 more)  | system      | 1       |
| a6eb024f-0c0c-4e0e-93a4-8fb5df41b2e2 | Trading    | Trading operations - currency read access                     | currencies:history, currencies:read, flags:read               | system      | 1       |
| 0810cd81-1d89-455f-9eb7-90e126c4a241 | Viewer     | Viewer - basic read-only access to domain data                | currencies:read, flags:read                                   | system      | 1       |
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+


ores-shell> Bye!
#+end_example

*** Get

Get details for a specific role.

#+name: get-role
#+begin_src ores-shell :exports none
roles get Admin
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<get-role>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
Role Details
============
ID:            f60d8103-0283-4d46-aa4c-aa6bb50934d9
Name:          Admin
Description:   Full administrative access to all system functions
Version:       1
Change Reason: system.new_record
Commentary:    System seed data
Recorded By:   system
Recorded At:   2026-01-09 16:37:36.000000000

Permissions (1):
-------------
  - *

ores-shell> Bye!
#+end_example




** Permissions

Role-Based Access Control functionality for managing permissions, in [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio
IAM Component]].

*** Help Permissions

#+name: help-permissions-exit
#+begin_src ores-shell :exports none
permissions
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-permissions-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell> permissions> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - list
	List all permissions in the system
 - ores-shell
	(menu)
permissions> Bye!
#+end_example

*** List Permissions

List all permissions in the system.

#+name: list-permissions
#+begin_src ores-shell :exports none
permissions list
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<list-permissions>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
  Tenant: System (00000000-0000-0000-0000-000000000000)
ORE Studio Shell REPL v0.0.11
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+-------------------------+---------------------------------------+
| ID (UUID)                            | Code                    | Description                           |
+--------------------------------------+-------------------------+---------------------------------------+
| 9419caac-72d8-450c-9d11-1f7918345e49 | *                       | Full access to all operations         |
| 724e3690-a1b8-4fe4-a895-9a63d36d54bd | accounts:create         | Create new user accounts              |
| 45585d27-2aa9-4962-a9d1-1dd5a28b0d4d | accounts:delete         | Delete user accounts                  |
| 01015492-b33a-4423-be66-d893783abf59 | accounts:lock           | Lock user accounts                    |
| 19590e4b-a7db-4658-983a-a2ae7d03c3a8 | accounts:read           | View user account details             |
| 2811d1b2-2838-4ac2-b8a0-9946f5ab27f1 | accounts:reset_password | Force password reset on user accounts |
| 67d955c7-f181-43e5-bec8-4e0abc7b598b | accounts:unlock         | Unlock user accounts                  |
| d9d3ea86-9488-4c96-a630-49722a7e8818 | accounts:update         | Modify user account settings          |
| 7fcae376-2fec-4fa3-8202-73bdf94102b6 | currencies:create       | Create new currencies                 |
| 69517ef0-774e-4766-9f76-aa3dc7a13899 | currencies:delete       | Delete currencies                     |
| 032cb9fe-3e20-4a5b-a868-81de0847159f | currencies:history      | View currency version history         |
| fc20f9d6-2f9a-44fa-b3ab-35508c0bc159 | currencies:read         | View currency details                 |
| f24f6086-b870-4181-a209-292d66645701 | currencies:update       | Modify currency settings              |
| 89547294-7d87-487e-8943-e7dfa463ee6b | flags:create            | Create new feature flags              |
| 2aac3165-1041-4d30-a302-d87131720771 | flags:delete            | Delete feature flags                  |
| 44d8d0d2-b76f-45f3-9a0e-247741823b18 | flags:read              | View feature flag status              |
| 113e6f5e-6dc5-4a9a-a517-830c7358ac3d | flags:update            | Modify feature flag settings          |
| 2585f8bc-9f49-4263-b541-3649316089ab | login_info:read         | View login history and info           |
| 34427cd3-142f-4e7b-a1c4-27a4f69a644b | roles:assign            | Assign roles to accounts              |
| 35df85f7-d1bb-4a0f-b313-5a945b6180e2 | roles:create            | Create new roles                      |
| 6de5d1c3-41b0-4308-91cf-ef99071f9b9f | roles:delete            | Delete roles                          |
| 9a2eeab8-4d85-4165-96bb-b02b3bc6c458 | roles:read              | View role details                     |
| 6cc5048f-5a75-4424-b4f6-df810179016d | roles:revoke            | Revoke roles from accounts            |
| 5e28f39a-9949-4b9e-869a-aa149e25843a | roles:update            | Modify role permissions               |
| 2039fe0b-cac8-42d7-be41-777161a3c62b | tenants:create          | Create new tenants                    |
| 63398d70-793a-43c3-90ad-c330b325715a | tenants:impersonate     | Access other tenants                  |
| 0d48b476-5560-480f-8e94-6e320245e835 | tenants:read            | View tenant details                   |
| f56550e1-819f-4e9b-a50d-5833c5812b56 | tenants:suspend         | Suspend tenants                       |
| 989874d8-f59f-41e2-90e0-4c600ed50c0d | tenants:terminate       | Terminate tenants                     |
| bf8c077f-ed23-4702-b4f6-0841de33f090 | tenants:update          | Modify tenant settings                |
+--------------------------------------+-------------------------+---------------------------------------+


ores-shell> Bye!
#+end_example

** Events
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 51004 --connect-identifier recipes"
   :END:

Event subscription functionality for receiving notifications from the server.

*** Help Menu

#+name: help-events-exit
#+begin_src ores-shell :exports none
events
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-events-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> events> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - channels
	List available event channels
 - listen <string>
	Subscribe to notifications for an event type
 - unlisten <string>
	Unsubscribe from notifications (event_type or * for all)
 - subscriptions
	List active subscriptions
 - notifications
	Display and clear pending notifications
 - ores-shell
	(menu)
events> Bye!
#+end_example

*** Channels

List available event channels.

#+name: events-channels
#+begin_src ores-shell :exports none
events channels
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-channels>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Available event channels:
  ores.assets.assets_changed - Currency image assets modified
  ores.iam.account_changed - Account data modified
  ores.iam.change_reason_category_changed - Change reason category data modified
  ores.iam.change_reason_changed - Change reason data modified
  ores.iam.permission_changed - Permission data modified
  ores.iam.role_changed - Role data modified
  ores.refdata.country_changed - Country data modified
  ores.refdata.currency_changed - Currency data modified
  ores.variability.feature_flags_changed - Feature flags modified

Use 'listen <channel>' to subscribe, or 'listen *' for all.
ores-shell> Bye!
#+end_example

*** Listen

Subscribe to notifications for an event type.

#+name: events-listen
#+begin_src ores-shell :exports none
events listen ores.refdata.currency_changed
events subscriptions
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-listen>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Listening on ores.refdata.currency_changed
ores-shell> Active subscriptions:
  • ores.refdata.currency_changed
ores-shell> Bye!
#+end_example

*** Unlisten

Unsubscribe from notifications.

#+name: events-unlisten
#+begin_src ores-shell :exports none
events listen ores.refdata.currency_changed
events unlisten ores.refdata.currency_changed
events subscriptions
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-unlisten>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Listening on ores.refdata.currency_changed
ores-shell> ✓ Stopped listening on ores.refdata.currency_changed
ores-shell> No active subscriptions.
ores-shell> Bye!
#+end_example

*** Subscriptions

List active subscriptions.

#+name: events-subscriptions
#+begin_src ores-shell :exports none
events subscriptions
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-subscriptions>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> No active subscriptions.
ores-shell> Bye!
#+end_example

*** Notifications

Display and clear pending notifications.

#+name: events-notifications
#+begin_src ores-shell :exports none
events notifications
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-notifications>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> No pending notifications.
ores-shell> Bye!
#+end_example


** Compression

Compression settings for client-server communication.

*** Show Status

Show current compression setting.

#+name: compression-status
#+begin_src ores-shell :exports none
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-status>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Compression: on (zlib, gzip, bzip2)
ores-shell> Bye!
#+end_example

*** Disable Compression

Disable compression for new connections.

#+name: compression-off
#+begin_src ores-shell :exports none
compression off
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-off>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> wrong command: compression off
ores-shell> Compression: on (zlib, gzip, bzip2)
ores-shell> Bye!
#+end_example

*** Enable All Compression

Enable all compression algorithms.

#+name: compression-on-all
#+begin_src ores-shell :exports none
compression on
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-on-all>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> wrong command: compression on
ores-shell> Compression: on (zlib, gzip, bzip2)
ores-shell> Bye!
#+end_example

*** Enable Specific Algorithm

Enable a specific compression algorithm (zlib, gzip, or bzip2).

#+name: compression-on-zlib
#+begin_src ores-shell :exports none
compression on zlib
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-on-zlib>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Compression enabled with zlib only.
Setting takes effect on next connection.
ores-shell> Compression: on (zlib)
ores-shell> Bye!
#+end_example

** Countries
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 51004 --connect-identifier recipes"
   :END:

Functionality related to the countries domain entity.

*** Help

#+name: help-countries-exit
#+begin_src ores-shell :exports none
countries
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-countries-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> countries> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all countries from the server
 - add <string> <string> <string> <string> <string> <string> <string>
	Add a country (alpha2 alpha3 numeric name official_name reason_code "commentary")
 - delete <string>
	Delete a country by alpha-2 code
 - history <string>
	Get version history for a country by alpha-2 code
 - ores-shell
	(menu)
countries> Bye!
#+end_example

*** Get

Get all countries in the system.

#+name: countries-get
#+begin_src ores-shell :exports none
countries get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<countries-get>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> +---------+---------+---------+---------+-----------------------------------+---------------------------------------------------------------------------+----------------------+-------------+-------------------------------+
| Alpha-2 | Alpha-3 | Numeric | Version | Name                              | Official Name                                                             | Change Reason        | Recorded By | Recorded At                   |
+---------+---------+---------+---------+-----------------------------------+---------------------------------------------------------------------------+----------------------+-------------+-------------------------------+
| AE      | ARE     | 784     | 3       | United Arab Emirates              | United Arab Emirates                                                      | common.rectification | newuser3    | 2026-01-10 08:35:13.000000000 |
| AF      | AFG     | 004     | 1       | Afghanistan                       | Islamic Republic of Afghanistan                                           | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| EE      | EST     | 233     | 1       | Estonia                           | Republic of Estonia                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AI      | AIA     | 660     | 1       | Anguilla                          | Anguilla                                                                  | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AL      | ALB     | 008     | 1       | Albania                           | Republic of Albania                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AM      | ARM     | 051     | 1       | Armenia                           | Republic of Armenia                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BS      | BHS     | 044     | 1       | Bahamas                           | Commonwealth of The Bahamas                                               | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AQ      | ATA     | 010     | 1       | Antarctica                        | Antarctica                                                                | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AR      | ARG     | 032     | 1       | Argentina                         | Argentine Republic                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AS      | ASM     | 016     | 1       | American Samoa                    | American Samoa                                                            | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AT      | AUT     | 040     | 1       | Austria                           | Republic of Austria                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AU      | AUS     | 036     | 1       | Australia                         | Commonwealth of Australia                                                 | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AW      | ABW     | 533     | 1       | Aruba                             | Aruba                                                                     | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AX      | ALA     | 248     | 1       | Åland Islands                    | Åland Islands                                                            | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AZ      | AZE     | 031     | 1       | Azerbaijan                        | Republic of Azerbaijan                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BA      | BIH     | 070     | 1       | Bosnia and Herzegovina            | Bosnia and Herzegovina                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BB      | BRB     | 052     | 1       | Barbados                          | Barbados                                                                  | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BD      | BGD     | 050     | 1       | Bangladesh                        | People's Republic of Bangladesh                                           | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BE      | BEL     | 056     | 1       | Belgium                           | Kingdom of Belgium                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BF      | BFA     | 854     | 1       | Burkina Faso                      | Burkina Faso                                                              | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BG      | BGR     | 100     | 1       | Bulgaria                          | Republic of Bulgaria                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BH      | BHR     | 048     | 1       | Bahrain                           | Kingdom of Bahrain                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BI      | BDI     | 108     | 1       | Burundi                           | Republic of Burundi                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BJ      | BEN     | 204     | 1       | Benin                             | Republic of Benin                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BL      | BLM     | 652     | 1       | Saint Barthélemy                 | Saint Barthélemy                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BM      | BMU     | 060     | 1       | Bermuda                           | Bermuda                                                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BN      | BRN     | 096     | 1       | Brunei                            | Brunei Darussalam                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BO      | BOL     | 068     | 1       | Bolivia                           | Plurinational State of Bolivia                                            | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BQ      | BES     | 535     | 1       | Bonaire, Sint Eustatius and Saba  | Bonaire, Sint Eustatius and Saba                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BR      | BRA     | 076     | 1       | Brazil                            | Federative Republic of Brazil                                             | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AO      | AGO     | 024     | 1       | Angola                            | Republic of Angola                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BT      | BTN     | 064     | 1       | Bhutan                            | Kingdom of Bhutan                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BV      | BVT     | 074     | 1       | Bouvet Island                     | Bouvet Island                                                             | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BW      | BWA     | 072     | 1       | Botswana                          | Republic of Botswana                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BY      | BLR     | 112     | 1       | Belarus                           | Republic of Belarus                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| BZ      | BLZ     | 084     | 1       | Belize                            | Belize                                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CA      | CAN     | 124     | 1       | Canada                            | Canada                                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CC      | CCK     | 166     | 1       | Cocos (Keeling) Islands           | Cocos (Keeling) Islands                                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CD      | COD     | 180     | 1       | DR Congo                          | Democratic Republic of the Congo                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CF      | CAF     | 140     | 1       | Central African Republic          | Central African Republic                                                  | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CG      | COG     | 178     | 1       | Congo                             | Republic of the Congo                                                     | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CH      | CHE     | 756     | 1       | Switzerland                       | Swiss Confederation                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CI      | CIV     | 384     | 1       | Côte d'Ivoire                    | Republic of Côte d'Ivoire                                                | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CK      | COK     | 184     | 1       | Cook Islands                      | Cook Islands                                                              | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CL      | CHL     | 152     | 1       | Chile                             | Republic of Chile                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CM      | CMR     | 120     | 1       | Cameroon                          | Republic of Cameroon                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CN      | CHN     | 156     | 1       | China                             | People's Republic of China                                                | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CO      | COL     | 170     | 1       | Colombia                          | Republic of Colombia                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CR      | CRI     | 188     | 1       | Costa Rica                        | Republic of Costa Rica                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CU      | CUB     | 192     | 1       | Cuba                              | Republic of Cuba                                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CV      | CPV     | 132     | 1       | Cape Verde                        | Republic of Cabo Verde                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CW      | CUW     | 531     | 1       | Curaçao                          | Curaçao                                                                  | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CX      | CXR     | 162     | 1       | Christmas Island                  | Christmas Island                                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CY      | CYP     | 196     | 1       | Cyprus                            | Republic of Cyprus                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| CZ      | CZE     | 203     | 1       | Czechia                           | Czech Republic                                                            | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| DE      | DEU     | 276     | 1       | Germany                           | Federal Republic of Germany                                               | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| DJ      | DJI     | 262     | 1       | Djibouti                          | Republic of Djibouti                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| DK      | DNK     | 208     | 1       | Denmark                           | Kingdom of Denmark                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| DM      | DMA     | 212     | 1       | Dominica                          | Commonwealth of Dominica                                                  | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| DO      | DOM     | 214     | 1       | Dominican Republic                | Dominican Republic                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| DZ      | DZA     | 012     | 1       | Algeria                           | People's Democratic Republic of Algeria                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| EC      | ECU     | 218     | 1       | Ecuador                           | Republic of Ecuador                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AG      | ATG     | 028     | 1       | Antigua and Barbuda               | Antigua and Barbuda                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| EG      | EGY     | 818     | 1       | Egypt                             | Arab Republic of Egypt                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| EH      | ESH     | 732     | 1       | Western Sahara                    | Western Sahara                                                            | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| ER      | ERI     | 232     | 1       | Eritrea                           | State of Eritrea                                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| ES      | ESP     | 724     | 1       | Spain                             | Kingdom of Spain                                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| ET      | ETH     | 231     | 1       | Ethiopia                          | Federal Democratic Republic of Ethiopia                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| FI      | FIN     | 246     | 1       | Finland                           | Republic of Finland                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| FJ      | FJI     | 242     | 1       | Fiji                              | Republic of Fiji                                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| FK      | FLK     | 238     | 1       | Falkland Islands                  | Falkland Islands                                                          | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| FM      | FSM     | 583     | 1       | Micronesia                        | Federated States of Micronesia                                            | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| FO      | FRO     | 234     | 1       | Faroe Islands                     | Faroe Islands                                                             | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| FR      | FRA     | 250     | 1       | France                            | French Republic                                                           | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GA      | GAB     | 266     | 1       | Gabon                             | Gabonese Republic                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GB      | GBR     | 826     | 1       | United Kingdom                    | United Kingdom of Great Britain and Northern Ireland                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GD      | GRD     | 308     | 1       | Grenada                           | Grenada                                                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GE      | GEO     | 268     | 1       | Georgia                           | Georgia                                                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GF      | GUF     | 254     | 1       | French Guiana                     | French Guiana                                                             | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GG      | GGY     | 831     | 1       | Guernsey                          | Bailiwick of Guernsey                                                     | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GH      | GHA     | 288     | 1       | Ghana                             | Republic of Ghana                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GI      | GIB     | 292     | 1       | Gibraltar                         | Gibraltar                                                                 | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GL      | GRL     | 304     | 1       | Greenland                         | Greenland                                                                 | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GM      | GMB     | 270     | 1       | Gambia                            | Republic of The Gambia                                                    | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GN      | GIN     | 324     | 1       | Guinea                            | Republic of Guinea                                                        | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GP      | GLP     | 312     | 1       | Guadeloupe                        | Guadeloupe                                                                | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GQ      | GNQ     | 226     | 1       | Equatorial Guinea                 | Republic of Equatorial Guinea                                             | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GR      | GRC     | 300     | 1       | Greece                            | Hellenic Republic                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GS      | SGS     | 239     | 1       | South Georgia                     | South Georgia and the South Sandwich Islands                              | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GT      | GTM     | 320     | 1       | Guatemala                         | Republic of Guatemala                                                     | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GU      | GUM     | 316     | 1       | Guam                              | Guam                                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GW      | GNB     | 624     | 1       | Guinea-Bissau                     | Republic of Guinea-Bissau                                                 | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| GY      | GUY     | 328     | 1       | Guyana                            | Co-operative Republic of Guyana                                           | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| HK      | HKG     | 344     | 1       | Hong Kong                         | Hong Kong Special Administrative Region of the People's Republic of China | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| HM      | HMD     | 334     | 1       | Heard Island and McDonald Islands | Heard Island and McDonald Islands                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| HN      | HND     | 340     | 1       | Honduras                          | Republic of Honduras                                                      | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| HR      | HRV     | 191     | 1       | Croatia                           | Republic of Croatia                                                       | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| HT      | HTI     | 332     | 1       | Haiti                             | Republic of Haiti                                                         | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| HU      | HUN     | 348     | 1       | Hungary                           | Hungary                                                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
| AD      | AND     | 020     | 1       | Andorra                           | Principality of Andorra                                                   | system.new_record    | system      | 2026-01-09 16:37:38.000000000 |
+---------+---------+---------+---------+-----------------------------------+---------------------------------------------------------------------------+----------------------+-------------+-------------------------------+

ores-shell> Bye!
#+end_example

*** Add

Add a new country.

#+name: countries-add
#+begin_src ores-shell :exports none
countries add XY XYZ 1234 Xyzland "Xyzland land" "system.new" "New country"
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<countries-add>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Country added successfully!
ores-shell> Bye!
#+end_example

*** Delete

Delete a country by ISO code.

#+name: countries-delete
#+begin_src ores-shell :exports none
countries delete XYZ
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<countries-delete>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Country XYZ deleted successfully!
ores-shell> Bye!
#+end_example

*** History

Get version history for a country.

#+name: countries-history
#+begin_src ores-shell :exports none
countries history US
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<countries-history>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> +---------+---------+---------+---------+---------------+--------------------------+-------------------+-------------+-------------------------------+
| Alpha-2 | Alpha-3 | Numeric | Version | Name          | Official Name            | Change Reason     | Recorded By | Recorded At                   |
+---------+---------+---------+---------+---------------+--------------------------+-------------------+-------------+-------------------------------+
| US      | USA     | 840     | 1       | United States | United States of America | system.new_record | system      | 2026-01-09 16:37:38.000000000 |
+---------+---------+---------+---------+---------------+--------------------------+-------------------+-------------+-------------------------------+

ores-shell> Bye!
#+end_example


** Change Reasons
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 51004 --connect-identifier recipes"
   :END:

Functionality related to the change reasons domain entity.

*** Help

#+name: help-change-reasons-exit
#+begin_src ores-shell :exports none
change-reasons
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-change-reasons-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> change-reasons> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all change reasons from the server
 - add <string> <string> <string> <string>
	Add a change reason (code description category_code "commentary")
 - delete <string>
	Delete a change reason by code
 - history <string>
	Get version history for a change reason by code
 - ores-shell
	(menu)
change-reasons> Bye!
#+end_example

*** Get

Get all change reasons in the system.

#+name: change-reasons-get
#+begin_src ores-shell :exports none
change-reasons get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reasons-get>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+-----------------------------+----------+----------------------------------------------------+-------+--------+--------------+-------+-------------+---------+
| Code                        | Category | Description                                        | Amend | Delete | Req. Comment | Order | Recorded By | Version |
+-----------------------------+----------+----------------------------------------------------+-------+--------+--------------+-------+-------------+---------+
| system.initial_load         | system   | Initial system bootstrap or migration              | N     | N      | N            | 0     | system      | 1       |
| common.non_material_update  | common   | Non-material update (Touch)                        | Y     | N      | N            | 10    | system      | 1       |
| system.new_record           | system   | New record created during normal operations        | N     | N      | N            | 10    | system      | 1       |
| trade.fat_finger            | trade    | Erroneous execution (wrong quantity/price)         | Y     | Y      | N            | 10    | system      | 1       |
| common.rectification        | common   | User/Booking Error                                 | Y     | Y      | N            | 20    | system      | 1       |
| system.external_data_import | system   | External data import (requires data lineage)       | Y     | N      | Y            | 20    | system      | 1       |
| trade.system_malfunction    | trade    | Technical glitch or algorithm issue 2              | Y     | Y      | Y            | 20    | newuser3    | 4       |
| common.duplicate            | common   | Duplicate Record                                   | N     | Y      | N            | 30    | system      | 1       |
| trade.corporate_action      | trade    | Stock split, dividend, or merger adjustment        | Y     | Y      | N            | 30    | system      | 1       |
| common.stale_data           | common   | Data not updated within required liquidity horizon | Y     | Y      | N            | 40    | system      | 1       |
| trade.allocation_swap       | trade    | House to client sub-account reallocation           | Y     | Y      | N            | 40    | system      | 1       |
| common.outlier_correction   | common   | Manual override after plausibility check failure   | Y     | Y      | Y            | 50    | system      | 1       |
| trade.re_booking            | trade    | Wrong legal entity correction                      | Y     | Y      | Y            | 50    | system      | 1       |
| common.feed_failure         | common   | Upstream vendor/API data issue                     | Y     | Y      | Y            | 60    | system      | 1       |
| common.mapping_error        | common   | Incorrect ID translation (e.g., ISIN to FIGI)      | Y     | Y      | Y            | 70    | system      | 1       |
| common.judgmental_override  | common   | Expert judgment when market prices unavailable     | Y     | Y      | Y            | 80    | system      | 1       |
| common.regulatory           | common   | Mandatory compliance adjustment                    | Y     | Y      | Y            | 90    | system      | 1       |
| trade.other                 | trade    | Exceptional (requires audit note)                  | N     | Y      | Y            | 999   | newuser3    | 2       |
| common.other                | common   | Exceptional (requires audit note)                  | Y     | Y      | Y            | 1000  | system      | 1       |
+-----------------------------+----------+----------------------------------------------------+-------+--------+--------------+-------+-------------+---------+


ores-shell> Bye!
#+end_example

*** Add

Add a new change reason.

#+name: change-reasons-add
#+begin_src ores-shell :exports none
change-reasons add test_reason "Test reason for recipes" common "New reason for testing."
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reasons-add>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Change reason added successfully!
ores-shell> Bye!
#+end_example

*** Delete

Delete a change reason by code.

#+name: change-reasons-delete
#+begin_src ores-shell :exports none
change-reasons delete test_reason
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reasons-delete>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Change reason test_reason deleted successfully!
ores-shell> Bye!
#+end_example

*** History

Get version history for a change reason.

#+name: change-reasons-history
#+begin_src ores-shell :exports none
change-reasons history system.initial_load
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reasons-history>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+---------------------+----------+---------------------------------------+-------+--------+--------------+-------+-------------+---------+
| Code                | Category | Description                           | Amend | Delete | Req. Comment | Order | Recorded By | Version |
+---------------------+----------+---------------------------------------+-------+--------+--------------+-------+-------------+---------+
| system.initial_load | system   | Initial system bootstrap or migration | N     | N      | N            | 0     | system      | 1       |
+---------------------+----------+---------------------------------------+-------+--------+--------------+-------+-------------+---------+


ores-shell> Bye!
#+end_example


** Change Reason Categories
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 51004 --connect-identifier recipes"
   :END:

Functionality related to the change reason categories domain entity.

*** Help

#+name: help-change-reasons-categories-exit
#+begin_src ores-shell :exports none
change-reason-categories
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-change-reasons-categories-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> change-reason-categories> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all change reason categories from the server
 - add <string> <string> <string>
	Add a category (code description "commentary")
 - delete <string>
	Delete a category by code
 - history <string>
	Get version history for a category by code
 - ores-shell
	(menu)
change-reason-categories> Bye!
#+end_example

*** Get

Get all change reason categories in the system.

#+name: change-reason-categories-get
#+begin_src ores-shell :exports none
change-reason-categories get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reason-categories-get>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------+-------------------------------------------------------------------------+-------------+---------+
| Code   | Description                                                             | Recorded By | Version |
+--------+-------------------------------------------------------------------------+-------------+---------+
| common | Universal data quality reasons aligned with BCBS 239 and FRTB standards | system      | 1       |
| system | System-generated reasons for automatic operations (not user-selectable) | system      | 1       |
| trade  | Trade lifecycle reasons aligned with FINRA and MiFID II standards. test | newuser3    | 7       |
+--------+-------------------------------------------------------------------------+-------------+---------+


ores-shell> Bye!
#+end_example

*** Add

Add a new change reason category.

#+name: change-reason-categories-add
#+begin_src ores-shell :exports none
change-reason-categories add TEST_CATEGORY "Test category for recipes" "New test category."
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reason-categories-add>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Category added successfully!
ores-shell> Bye!
#+end_example

*** Delete

Delete a change reason category by code.

#+name: change-reason-categories-delete
#+begin_src ores-shell :exports none
change-reason-categories delete TEST_CATEGORY
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reason-categories-delete>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Category TEST_CATEGORY deleted successfully!
ores-shell> Bye!
#+end_example

*** History

Get version history for a change reason category.

#+name: change-reason-categories-history
#+begin_src ores-shell :exports none
change-reason-categories history system
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<change-reason-categories-history>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :51004
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------+-------------------------------------------------------------------------+-------------+---------+
| Code   | Description                                                             | Recorded By | Version |
+--------+-------------------------------------------------------------------------+-------------+---------+
| system | System-generated reasons for automatic operations (not user-selectable) | system      | 1       |
+--------+-------------------------------------------------------------------------+-------------+---------+


ores-shell> Bye!
#+end_example

* Footer

| Previous: [[id:46F5ED07-9E63-77B4-2783-E0147EFF45D0][Recipes]] |

# Local Variables:
# eval: (whitespace-mode -1)
# End:
