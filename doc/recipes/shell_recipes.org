:PROPERTIES:
:ID: 2E53EE1A-6856-6904-7FEB-AC95C6722A63
:END:
#+title: ORE Studio Shell Recipes
#+author: Marco Craveiro
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil

Demonstrates all of the functionality available on the command line tool
=ores.shell=.

* Recipes
  :PROPERTIES:
  :header-args: :exports both
  :header-args+: :results raw
  :header-args+: :dir ../../build/output/linux-clang-debug/publish/bin
  :header-args+: :var log_args="--log-enabled --log-level trace --log-directory ../log"
  :header-args+: :var ORES_CLIENT_LOGIN_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "newuser3")
  :END:

** Connectivity

Functionality related to connectivity such as connect to server, etc.

*** Auto connect
   :PROPERTIES:
   :header-args+: :var ORES_CLIENT_LOGIN_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "ores")
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

#+name: auto-connect
#+begin_src ores-client
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} ${connect_args} << 'EOF'
<<auto-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Auto-connected to localhost:55555
ORE Studio Shell REPL v0.0.5
Type 'help' for available commands, 'exit' to quit

ores-client> Bye!
#+end_example

*** Basic connect

#+name: basic-connect
#+begin_src ores-client
connect localhost 55555 test
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} << 'EOF'
<<basic-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Client REPL v0.0.5
Type 'help' for available commands, 'exit' to quit

ores-client> ✓ Connected.
ores-client> Bye!
#+end_example

*** Auto login
   :PROPERTIES:
   :custom_id: auto-login
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :header-args+: :var login_args="--login-username newuser3"
   :END:

#+name: auto-login
#+begin_src ores-client
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<auto-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Auto-connected to localhost:55555
✓ Auto-login successful!
  Username: newuser3
  Account ID: 019a5e49-476c-70ce-9909-3887cae700e9
  Admin: No
ORE Studio Shell REPL v0.0.5
Type 'help' for available commands, 'exit' to quit

ores-client> Bye!
#+end_example

** Accounts
   :PROPERTIES:
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the accounts domain entity.

*** Create account
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :END:

#+name: create-account
#+begin_src ores-client
accounts create newuser14 123 567 newuser14@example.com 1
accounts create newuser15 123 567 newuser15@example.com 1
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<create-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Auto-connected to localhost:55555
✓ Auto-login successful!
  Username: newuser3
  Account ID: 019a5e49-476c-70ce-9909-3887cae700e9
  Admin: No
ORE Studio Shell REPL v0.0.5
Type 'help' for available commands, 'exit' to quit

ores-client> ✓ Account created with ID: 019aa21e-9ea5-763d-a8b7-29e691093834
ores-client> ✓ Account created with ID: 019aa21e-9efc-7d10-a679-7af147cd94da
ores-client> Bye!
#+end_example

*** Login

Explicit login is discouraged as it saves your credentials to the history.
Instead, consider using [[#auto-login][Auto login]].

#+name: explicit-login
#+begin_src ores-client
accounts login newuser10 123
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Auto-connected to localhost:55555
ORE Studio Shell REPL v0.0.5
Type 'help' for available commands, 'exit' to quit

ores-client> ✓ Login successful.
  Username: newuser10
  Account ID: 019a9ea8-c265-7046-96d2-42dd4c53a662
  Admin: No
ores-client> Bye!
#+end_example

* Footer

| Previous: [[id:46F5ED07-9E63-77B4-2783-E0147EFF45D0][Recipes]] |

# Local Variables:
# eval: (whitespace-mode -1)
# End:
