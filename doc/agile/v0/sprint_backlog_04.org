:PROPERTIES:
:ID: 5A85BDB5-E915-3A44-04AB-771ACE91992B
:END:
#+title: Sprint Backlog 04
#+options: <:nil c:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil
#+todo: STARTED | COMPLETED CANCELLED POSTPONED BLOCKED
#+tags: { code(c) infra(i) analysis(n) agile(a) }
#+startup: inlineimages

* Sprint Mission

- implement bootstrap mode.
- implement claude code skills for common functionality.

* Stories

** Active

#+begin: clocktable :maxlevel 3 :scope subtree :tags t :indent nil :emphasize nil :scope file :narrow 75 :formula % :block today
#+TBLNAME: today_summary
#+CAPTION: Clock summary at [2025-11-16 Sun 11:59], for Sunday, November 16, 2025.
|       | <75>                     |        |      |      |       |
| Tags  | Headline                 | Time   |      |      |     % |
|-------+--------------------------+--------+------+------+-------|
|       | *Total time*             | *1:48* |      |      | 100.0 |
|-------+--------------------------+--------+------+------+-------|
|       | Stories                  | 1:48   |      |      | 100.0 |
|       | Active                   |        | 1:48 |      | 100.0 |
| infra | Update doxygen main page |        |      | 0:23 |  21.3 |
| code  | Improve UML diagrams     |        |      | 1:25 |  78.7 |
#+end:

#+begin: clocktable :maxlevel 3 :scope subtree :tags t :indent nil :emphasize nil :scope file :narrow 75 :formula %
#+TBLNAME: sprint_summary
#+CAPTION: Clock summary at [2025-11-16 Sun 11:59]
|          | <75>                                                   |         |       |       |       |
| Tags     | Headline                                               | Time    |       |       |     % |
|----------+--------------------------------------------------------+---------+-------+-------+-------|
|          | *Total time*                                           | *80:16* |       |       | 100.0 |
|----------+--------------------------------------------------------+---------+-------+-------+-------|
|          | Stories                                                | 80:16   |       |       | 100.0 |
|          | Active                                                 |         | 80:16 |       | 100.0 |
| agile    | Sprint and product backlog refinement                  |         |       |  3:41 |   4.6 |
| code     | Clean up client parser                                 |         |       |  0:10 |   0.2 |
| code     | Add connect command line argument                      |         |       |  1:19 |   1.6 |
| infra    | Install Windows package on Windows machine             |         |       |  2:09 |   2.7 |
| code     | Ignore warnings on windows and osx                     |         |       |  0:33 |   0.7 |
| code     | Ensure applications work under OSX using github images |         |       |  0:14 |   0.3 |
| infra    | Create a splash screen and gray background             |         |       |  2:26 |   3.0 |
| code     | Use fluent icons                                       |         |       |  0:37 |   0.8 |
| code     | Add export functionality for currencies                |         |       |  1:30 |   1.9 |
| code     | Add currency editing support                           |         |       |  2:45 |   3.4 |
| code     | Add about to menu                                      |         |       |  1:02 |   1.3 |
| code     | Create a history dialog for currencies                 |         |       |  1:27 |   1.8 |
| code     | Allow MDI windows outside main window                  |         |       |  1:35 |   2.0 |
| code     | Add edit menu and export menu                          |         |       |  0:34 |   0.7 |
| code     | Implement adding new currencies                        |         |       |  3:17 |   4.1 |
| code     | Clean up product website                               |         |       |  4:42 |   5.9 |
| code     | Create a skill for plant uml documentation             |         |       |  2:48 |   3.5 |
| infra    | Add CMake targets for site and skills                  |         |       |  0:17 |   0.4 |
| infra    | Generalise the skill setup for ORE Studio              |         |       |  3:45 |   4.7 |
| infra    | Restructure components to follow the dogen approach    |         |       |  2:54 |   3.6 |
| infra    | Generate PlantUML diagrams for all components          |         |       |  1:05 |   1.3 |
| analysis | Weaving skills and documentation together              |         |       |  0:46 |   1.0 |
| code     | Consider adding tags to catch2 tests                   |         |       |  0:34 |   0.7 |
| code     | Split JSON based =operator<<= from domain type         |         |       |  0:53 |   1.1 |
| code     | Add a table representation of domain types             |         |       |  2:05 |   2.6 |
| code     | Add a comint based emacs mode for the client           |         |       |  0:24 |   0.5 |
| code     | Fix the valgrind leaks reported on sqlgen              |         |       |  4:54 |   6.1 |
| code     | Review all code created so far with an LLM             |         |       | 16:13 |  20.2 |
| code     | Fix broken windows build due to local time             |         |       |  0:24 |   0.5 |
| code     | Resolve crash on shutdown problem                      |         |       |  0:50 |   1.0 |
| code     | Split main window class                                |         |       |  0:48 |   1.0 |
| infra    | Update doxygen main page                               |         |       |  0:23 |   0.5 |
| code     | Improve UML diagrams                                   |         |       |  1:25 |   1.8 |
| code     | Make UI/UX look more professional                      |         |       | 11:07 |  13.8 |
| code     | Current issues with package install in debian          |         |       |  0:40 |   0.8 |
#+end:

*** COMPLETED Sprint and product backlog refinement                   :agile:
    :LOGBOOK:
    CLOCK: [2025-11-15 Sat 23:46]--[2025-11-15 Sat 23:56] =>  0:10
    CLOCK: [2025-11-15 Sat 22:41]--[2025-11-15 Sat 22:56] =>  0:15
    CLOCK: [2025-11-15 Sat 21:11]--[2025-11-15 Sat 21:26] =>  0:15
    CLOCK: [2025-11-15 Sat 13:30]--[2025-11-15 Sat 13:42] =>  0:12
    CLOCK: [2025-11-12 Wed 17:45]--[2025-11-12 Wed 18:01] =>  0:16
    CLOCK: [2025-11-11 Tue 22:38]--[2025-11-11 Tue 23:09] =>  0:31
    CLOCK: [2025-11-11 Tue 13:47]--[2025-11-11 Tue 13:49] =>  0:02
    CLOCK: [2025-11-10 Mon 10:17]--[2025-11-10 Mon 10:32] =>  0:15
    CLOCK: [2025-11-09 Sun 23:47]--[2025-11-10 Mon 00:27] =>  0:40
    CLOCK: [2025-11-09 Sun 23:24]--[2025-11-09 Sun 23:46] =>  0:22
    CLOCK: [2025-11-08 Sat 01:27]--[2025-11-08 Sat 01:36] =>  0:09
    CLOCK: [2025-11-07 Fri 10:35]--[2025-11-07 Fri 10:47] =>  0:12
    CLOCK: [2025-11-07 Fri 09:05]--[2025-11-07 Fri 09:13] =>  0:08
    CLOCK: [2025-11-07 Fri 08:50]--[2025-11-07 Fri 09:04] =>  0:14
    :END:

Updates to sprint and product backlog.

#+begin_src emacs-lisp :exports none
;; agenda
(org-agenda-file-to-front)
#+end_src

#+name: pie-stories-chart
#+begin_src R :var sprint_summary=sprint_summary :results file graphics :exports results :file sprint_backlog_04_stories_pie_sorted.png :width 1920 :height 1080
library(conflicted)
library(ggplot2)
library(tidyverse)
library(tibble)

# Remove unnecessary rows (Total time, Stories, Active)
clean_sprint_summary <- tail(sprint_summary, -4)
stories <- unlist(clean_sprint_summary[2])
percent_values <- as.numeric(unlist(clean_sprint_summary[6]))

# Create a data frame and explicitly sort the stories by defining factor levels
df <- data.frame(
  stories = stories,
  percent = percent_values
) %>%
  # 1. Sort the data frame by percentage in descending order
  arrange(desc(percent)) %>%
  # 2. Convert 'stories' to a factor, setting the levels based on the sorted order.
  # This makes the order of the slices explicit for ggplot.
  mutate(
    stories = factor(stories, levels = stories),
    lab.pos = cumsum(percent) - 0.5 * percent
  )

# Manually selected colors to resemble the screenshot
custom_palette <- c(
  "#21518f", "#f37735", "#ffc425", "#81b214", "#d7385e",
  "#662e91", "#00a9ae", "#5c5c5c", "#a0c6e0", "#f8b195",
  "#ffe385", "#bde0fe", "#c5e0d4", "#e0b8a0", "#a56f8f",
  "#7a448a", "#4a9a9b", "#9b9b9b", "#6fa8dc", "#f7a072",
  "#ffd166", "#99d98c", "#ef5d60", "#9d529f", "#3a86ff",
  "#c1d6e1", "#f9e0ac", "#c2d6a4", "#e69a8d", "#a07d9f"
)

# Ensure the palette has enough colors for all stories.
if (length(custom_palette) < length(df$stories)) {
  warning("Not enough custom colors for all stories. Colors will repeat.")
  custom_palette <- rep(custom_palette, length.out = length(df$stories))
}


p <- ggplot(df, aes(x = "", y = percent, fill = stories)) +
  geom_bar(width = 1, stat = "identity") +
  coord_polar("y", start = 0) +
  scale_fill_manual(values = custom_palette) +
  ggtitle("Sprint 4: Resourcing per Story")  +
  labs(x = NULL, y = NULL, fill = "Stories") +
  theme_minimal() +
  theme(
    axis.text.x = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    plot.title = element_text(hjust = 0.5, size = 18),
    legend.position = "right",
    legend.title = element_text(size = 14),
    legend.text = element_text(size = 12)
  )

print(p)
#+end_src

#+RESULTS: pie-stories-chart
[[file:sprint_backlog_04_stories_pie_sorted.png]]

#+name: stories-chart
#+begin_src R :var sprint_summary=sprint_summary :results file graphics :exports results :file sprint_backlog_04_stories.png :width 1200 :height 650
library(conflicted)
library(grid)
library(tidyverse)
library(tibble)

# Remove unnecessary rows.
clean_sprint_summary <- tail(sprint_summary, -4)
names <- unlist(clean_sprint_summary[2])
values <- as.numeric(unlist(clean_sprint_summary[6]))

# Create a data frame.
df <- data.frame(
  cost = values,
  stories = factor(names, levels = names[order(values, decreasing = FALSE)]),
  y = seq(length(names)) * 0.9
)

# Setup the colors
blue <- "#076fa2"

p <- ggplot(df) +
  aes(x = cost, y = stories) +
  geom_col(fill = blue, width = 0.6) +
  ggtitle("Sprint 4: Resourcing per Story") +
  xlab("Resourcing (%)") + ylab("Stories") +
  theme(text = element_text(size = 15))

print(p)
#+end_src

#+RESULTS: stories-chart
[[file:sprint_backlog_04_stories.png]]

#+name: tags-chart
#+begin_src R :var sprint_summary=sprint_summary :results file graphics :exports results :file sprint_backlog_04_tags.png :width 600 :height 400
library(conflicted)
library(grid)
library(tidyverse)
library(tibble)

# Remove unnecessary rows.
clean_sprint_summary <- tail(sprint_summary, -4)
names <- unlist(clean_sprint_summary[1])
values <- as.numeric(unlist(clean_sprint_summary[6]))

# Create a data frame.
df <- data.frame(
  cost = values,
  tags = names,
  y = seq(length(names)) * 0.9
)
# factor(names, levels = names[order(values, decreasing = FALSE)])

df2 <- setNames(aggregate(df$cost, by = list(df$tags), FUN = sum),  c("cost", "tags"))
# Setup the colors
blue <- "#076fa2"

p <- ggplot(df2) +
  aes(x = cost, y = tags) +
  geom_col(fill = blue, width = 0.6) +
  ggtitle("Sprint 4: Resourcing per Tag") +
  xlab("Resourcing (%)") + ylab("Story types") +
  theme(text = element_text(size = 15))

print(p)
#+end_src

#+RESULTS: tags-chart
[[file:sprint_backlog_04_tags.png]]

*** COMPLETED CTest shows only one test per test suite                 :code:

We need to be able to see individual tests and the reasons for their failures.

Notes:

- raised an issue with CMake.

Links:

- [[https://gitlab.kitware.com/cmake/cmake/-/issues/27363][#27363: CTest: Uploading generated JUnit XML from the test harness]]
- [[https://public.kitware.com/pipermail/cdash/2015-February/001544.html][[Cdash] How to send a JUnit result file to CDash server with CTest?]]

*** COMPLETED Clean up client parser                                   :code:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 09:14]--[2025-11-07 Fri 09:24] =>  0:10
    :END:

It should use common infrastructure and read variables from the environment.

*** COMPLETED Add connect command line argument                        :code:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 11:56]--[2025-11-07 Fri 13:15] =>  1:19
    :END:

To avoid leaking secrets it should be possible to supply a =--connect= in the
client. We still need a connect in case we want to reconnect.

Notes:

- clean up parser in client, not using common logging.
- add environment mapping to client.

Links:

- [[https://github.com/daniele77/cli/issues/250][#250: Basic Scripting with Cli]]

*** COMPLETED Install Windows package on Windows machine              :infra:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 14:51]--[2025-11-07 Fri 16:28] =>  1:37
    CLOCK: [2025-11-07 Fri 11:33]--[2025-11-07 Fri 11:55] =>  0:22
    CLOCK: [2025-11-07 Fri 10:48]--[2025-11-07 Fri 10:58] =>  0:10
    :END:

We need to install and run the windows package and make sure it works. Check
console and GUI start. Also, check we can connect against local service and
against remove service.

Notes:

- application fails to start because QT6 DLLs are not in bin folder. It is also
  missing libssl. Adding vcpkg to presets copied a lot of the DLLs:

#+begin_src json
{
  "version": 3,
  "configurePresets": [
    {
      "name": "default",
      "generator": "Visual Studio 17 2022",
      "architecture": "x64",
      "toolchainFile": "$env{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake",
      "binaryDir": "build",
      "cacheVariables": {
        "X_VCPKG_APPLOCAL_DEPS_INSTALL": true
      }
    }
  ]
}
#+end_src

- services are now running and connecting to postgres. Managed to connect from
  Linux to Windows and log in. However, Qt UI won't start due to missing DLLs.
  Installed Qt from online downloader, need to figure out what is missing. Open
  a separate story to handle Qt issues.

Links:

- [[https://github.com/microsoft/vcpkg/issues/43066][#43066: X_VCPKG_APPLOCAL_DEPS_INSTALL requires dumpbin to be on PATH for windows]]
- [[https://stackoverflow.com/questions/68579934/how-to-copy-targets-all-runtime-dependencies-after-build-process-in-cmake][How to copy target's all runtime dependencies after build process in CMake?]]
- [[https://stackoverflow.com/questions/78723493/cmake-install-rules][CMake install rules]]

*** BLOCKED Ignore warnings on windows and osx                         :code:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 10:59]--[2025-11-07 Fri 11:32] =>  0:33
    :END:

At present we have a number of spurious warnings on both windows and OSX. Try to
see if we can get CDash to ignore them.

Notes:

- Raised a Kitware ticket.

Links:

- [[https://gitlab.kitware.com/cmake/cmake/-/issues/27367][CTest: Using regexes to filter warnings for CDash]]
- [[https://stackoverflow.com/questions/26458652/ctest-custom-warning-exception][SO: ctest custom warning exception]]

*** BLOCKED Ensure applications work under OSX using github images     :code:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 16:29]--[2025-11-07 Fri 16:43] =>  0:14
    :END:

We need to install the DMG and run the app.

We think the package does not have all of the dependencies, but this did not
work:

#+begin_src cmake
if(APPLE)
    install(CODE "
        # make sure the bundle is already on disk
        set(BU_CHMOD_BUNDLE_ITEMS TRUE)
        include(BundleUtilities)

        # full path to the real executable inside the bundle
        set(app_exe \"\${CMAKE_INSTALL_PREFIX}/OreStudio.app/Contents/MacOS/OreStudio\")

        # directory where 3rd-party libraries will be copied
        set(libs_dir \"\${CMAKE_INSTALL_PREFIX}/OreStudio.app/Contents/Frameworks\")

        # discover all prerequisites and copy/fix them
        fixup_bundle(\"\${app_exe}\" \"\" \"\${libs_dir}\")
    " COMPONENT Runtime)
endif()
#+end_src

We should ask someone with an OSX machine to test this.

Links:

- [[https://stackoverflow.com/questions/17974439/cant-use-fixup-bundle-to-create-a-portable-bundle-with-qt][SO: Can't use fixup_bundle() to create a portable bundle with Qt]]

*** COMPLETED Create a splash screen and gray background              :infra:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 23:30]--[2025-11-07 Fri 23:49] =>  0:19
    CLOCK: [2025-11-07 Fri 17:54]--[2025-11-07 Fri 18:57] =>  1:03
    CLOCK: [2025-11-07 Fri 16:49]--[2025-11-07 Fri 17:53] =>  1:04
    :END:

We need to replace the basic splash with something that looks slightly better.
We also need some kind of background for the initial screen when nothing is
selected, a bit like visual studio code.

*** COMPLETED Use fluent icons                                         :code:
    :LOGBOOK:
    CLOCK: [2025-11-07 Fri 23:50]--[2025-11-08 Sat 00:27] =>  0:37
    :END:

These seem to be a bit better than the current icons we have:

- [[https://github.com/microsoft/fluentui-system-icons/tree/main][fluentui-system-icons]]

*** COMPLETED Add export functionality for currencies                  :code:
    :LOGBOOK:
    CLOCK: [2025-11-08 Sat 22:34]--[2025-11-08 Sat 22:50] =>  0:16
    CLOCK: [2025-11-08 Sat 22:06]--[2025-11-08 Sat 22:33] =>  0:27
    CLOCK: [2025-11-08 Sat 21:59]--[2025-11-08 Sat 22:05] =>  0:06
    CLOCK: [2025-11-08 Sat 21:18]--[2025-11-08 Sat 21:59] =>  0:41
   :END:

We need to be able to export to ORE XML and to CSV.

*** COMPLETED Add currency editing support                             :code:
    :LOGBOOK:
    CLOCK: [2025-11-08 Sat 19:30]--[2025-11-08 Sat 21:17] =>  1:47
    CLOCK: [2025-11-08 Sat 00:28]--[2025-11-08 Sat 01:26] =>  0:58
    :END:

We need to be able to open up individual currencies and edit them. We also need
to be able to select multiple currencies and delete them.

Notes:

- add toolbar for crud operations. Not clear how we know what they apply to.
  Ideally you select multiple currencies and then press delete.
- separate the connection part of the toolbar from ref data and from crud.
- add a version string to the splash screen.

*** COMPLETED Add about to menu                                        :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 00:47]--[2025-11-09 Sun 00:54] =>  0:07
    CLOCK: [2025-11-08 Sat 22:51]--[2025-11-08 Sat 23:46] =>  0:55
    :END:

We need an about describing the project.

*** COMPLETED Create a history dialog for currencies                   :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 01:19]--[2025-11-09 Sun 02:21] =>  1:02
    CLOCK: [2025-11-09 Sun 00:54]--[2025-11-09 Sun 01:19] =>  0:25
    :END:

Users should be able to see a list of all the changes to a given currency.

Notes:

- valid to in edit dialog is still equal to valid from.
- create a history dialog showing the history of changes including modified by.

*** COMPLETED Currency details is always on top                        :code:

It should work like any other MDI window.

*** COMPLETED Do not auto maximise windows                             :code:

Every time we select currencies or history the new window is maximised. If there
is a previous window we should just reuse it. In addition if we ask for history
of the same currency twice, it should reuse the existing window.

*** COMPLETED Allow MDI windows outside main window                    :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 10:20]--[2025-11-09 Sun 11:55] =>  1:35
    :END:

If possible we should allow windows to exist outside main window so users can
manage their workspace themselves.

Notes:

- currency details do not show up in window menu. Done
- currency detail is always detached. Done.
- windows are not sized correctly. Done.
- if a window is already open, we should reuse window. Done.

*** COMPLETED Add edit menu and export menu                            :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 11:56]--[2025-11-09 Sun 12:30] =>  0:34
    :END:

Need a edit menu with all of the crud operations. At present these are only in
the toolbar. We also need one for export.

*** COMPLETED Implement adding new currencies                          :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 18:01]--[2025-11-09 Sun 20:20] =>  2:19
    CLOCK: [2025-11-09 Sun 12:31]--[2025-11-09 Sun 13:29] =>  0:58
    :END:

At present you cannot add new currencies from the UI.

Notes:

- UI goes black if you close and reopen. Done.
- need a way to save the new currency to trigger sending message to server side.
- we should be able to send a message to create more than one currency in one
  go.
- it should be possible to clone a currency. It goes into new currency dialog
  with all fields filed in except for ISO code - maybe set to clone?
- add new message to repl.

*** COMPLETED Create an icon for the application                      :infra:

We copied the Dogen icon to get us going. We should really grab our own logo.

*** COMPLETED Add packaging support for images                        :infra:

*Rationale*: we are now packaging the images with the binary via Qt resources.

At present we are not adding images to packages.

*** COMPLETED Clean up product website                                 :code:
    :LOGBOOK:
    CLOCK: [2025-11-10 Mon 22:37]--[2025-11-10 Mon 23:42] =>  1:05
    CLOCK: [2025-11-10 Mon 22:30]--[2025-11-10 Mon 22:36] =>  0:06
    CLOCK: [2025-11-10 Mon 22:00]--[2025-11-10 Mon 22:29] =>  0:29
    CLOCK: [2025-11-10 Mon 17:33]--[2025-11-10 Mon 17:39] =>  0:06
    CLOCK: [2025-11-10 Mon 12:30]--[2025-11-10 Mon 15:26] =>  2:56
    :END:

As per weaving analysis we need to tidy-up our org-mode documents to build up
towards the setup needed for skills etc. Tidy up the product website, removing
things such as build instructions etc into it's own documents.

*** COMPLETED Create a skill for plant uml documentation               :code:
    :LOGBOOK:
    CLOCK: [2025-11-10 Mon 23:43]--[2025-11-11 Tue 02:31] =>  2:48
    :END:

Add a org mode document which generates a claude skill to document components in
plant uml format. Add a target to generate the skill.

*** COMPLETED Add CMake targets for site and skills                   :infra:
    :LOGBOOK:
    CLOCK: [2025-11-11 Tue 09:03]--[2025-11-11 Tue 09:20] =>  0:17
    :END:

Make it easier to run those targets from emacs.

*** COMPLETED Generalise the skill setup for ORE Studio               :infra:
    :LOGBOOK:
    CLOCK: [2025-11-11 Tue 13:04]--[2025-11-11 Tue 13:06] =>  0:02
    CLOCK: [2025-11-11 Tue 09:20]--[2025-11-11 Tue 13:03] =>  3:43
    :END:

It would be nice to be able to create skills quickly that model the common
activities we have. These roughly map to facets in MASD (Model Assisted Software
Development) world. We haven't got enough time to do a proper taxonomic and
morphological analysis of the system, but we can use the primitives defined in
MASD to guide skill creation (including meta-skill creation) and then create new
skills as we face new tasks. For now, setup a simple skill framework with a
meta-skill which makes skill management easier.

*** COMPLETED Restructure components to follow the dogen approach     :infra:
    :LOGBOOK:
    CLOCK: [2025-11-11 Tue 14:44]--[2025-11-11 Tue 17:38] =>  2:54
    :END:

We started by splitting tests from regular code. However, now we are introducing
models it is becoming very unwieldy. We need to follow the same structure as
dogen:

- =component=
  - =src=
  - =modeling=
  - =tests=

We do not need public/private includes for now so leave that under =src=.

Notes:

- create a skill describing expected project structure.
- update existing skills to take this change into account.

*** COMPLETED Generate PlantUML diagrams for all components           :infra:
    :LOGBOOK:
    CLOCK: [2025-11-11 Tue 17:39]--[2025-11-11 Tue 18:05] =>  0:26
    CLOCK: [2025-11-11 Tue 13:07]--[2025-11-11 Tue 13:46] =>  0:39
    :END:

We need an easy way to see the structure of the components. Use the new skill to
create diagrams.

*** COMPLETED Generate a pie chart for tasks in org via R              :code:

Ask the LLM on how to replicate the calc pie chart we previously had.

*** COMPLETED Weaving skills and documentation together            :analysis:
    :LOGBOOK:
    CLOCK: [2025-11-10 Mon 09:30]--[2025-11-10 Mon 10:16] =>  0:46
    :END:

Following on from the ideas on [[https://uhra.herts.ac.uk/id/eprint/17031/][Model Assisted Software Development]] (MASD), we
should weave together all of the project assets so that they simultaneously
generate:

- human level documentation, accessible via org-roam. This should also include
  diagrams to enable humans to understand the code structure.
- external documentation for website.
- LLM instructions, including skills.

Source code remains the only source of truth, but documentation is a projection
of the source code. The same documentation is simultaneously used by developers
and LLMs to understand the system.

Notes:

- generate a new =index.org= which is a more user friendly main page.
- split the existing =readme= into specialised pages which document aspects of
  the system such as building etc.
- create a =skills= folder under doc which are org mode documents that export
  into claude skills. Create CMake targets which generate the skills directory.
  Symlink it to the project directory =.claude/skills=.
- add a cmake target to generate the site. This should just generate HTML for
  the skills.
- add plantuml diagrams at the component level. These should leave under
  =modeling=.
- add plantuml diagram at the project level. Each component should have a link to
  the plantuml diagram of the component.
- teach claude how to generate a org-mode model of the component which documents
  each class. For comms, it should also generate an interaction diagram
  explaining how the client and server communicate.
- in the claude skills, explain that whenever adding domain entities, it needs
  to update
- perform a taxonomic analysis of how to break down existing code into skills.
  These will follow on from MASD's logical-physical space,
- it should also be possible to generate a PDF with all of the documentation,
  readable as a book.

*** COMPLETED Consider adding tags to catch2 tests                     :code:
    :LOGBOOK:
    CLOCK: [2025-11-14 Fri 20:21]--[2025-11-14 Fri 20:31] =>  0:10
    CLOCK: [2025-11-14 Fri 15:02]--[2025-11-14 Fri 15:26] =>  0:24
    :END:

It would be nice to run say repository tests when we do a DB change, or comms
tests etc. Catch supports tags for this. The problem is we need to manually add
CMake targets for each tag.

#+begin_src cmake
function(add_catch2_tag_target test_exe tag)
    string(REPLACE "[" "" clean_tag "${tag}")
    string(REPLACE "]" "" clean_tag "${clean_tag}")
    add_custom_target(test-${clean_tag}
        COMMAND ${test_exe} "${tag}"
        DEPENDS ${test_exe}
        WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
    )
    # Optional: register with CTest
    add_test(NAME ${test_exe}_${clean_tag} COMMAND ${test_exe} "${tag}")
endfunction()

# Usage:
add_catch2_tag_target(my_app_tests "[repository]")
add_catch2_tag_target(my_app_tests "[comms]")
#+end_src

*** COMPLETED Split JSON based =operator<<= from domain type           :code:
    :LOGBOOK:
    CLOCK: [2025-11-15 Sat 04:50]--[2025-11-15 Sat 05:06] =>  0:16
    CLOCK: [2025-11-15 Sat 04:13]--[2025-11-15 Sat 04:50] =>  0:37
    :END:

At present you can only dump a type to stream as JSON. However, we may want to
dump it into other formats (such as a table). We should not bind a domain type
to a specific dumping format in =operator<<=.

*** COMPLETED Add a table representation of domain types               :code:
    :LOGBOOK:
    CLOCK: [2025-11-15 Sat 05:07]--[2025-11-15 Sat 06:25] =>  1:18
    CLOCK: [2025-11-15 Sat 03:25]--[2025-11-15 Sat 04:12] =>  0:47
    :END:

Dumping JSON in the client is not very helpful. Ideally we want a simple table.

*** COMPLETED Add a comint based emacs mode for the client             :code:
    :LOGBOOK:
    CLOCK: [2025-11-15 Sat 03:01]--[2025-11-15 Sat 03:25] =>  0:24
    :END:

It would be nice not to have to start a shell to run the client but have access
to the usual emacs facilities for running external processes.

*** COMPLETED Fix the valgrind leaks reported on sqlgen                :code:
    :LOGBOOK:
    CLOCK: [2025-11-14 Fri 11:22]--[2025-11-14 Fri 11:25] =>  0:03
    CLOCK: [2025-11-14 Fri 11:06]--[2025-11-14 Fri 11:22] =>  0:16
    CLOCK: [2025-11-14 Fri 09:30]--[2025-11-14 Fri 11:05] =>  1:35
    CLOCK: [2025-11-13 Thu 08:20]--[2025-11-13 Thu 09:27] =>  1:07
    CLOCK: [2025-11-12 Wed 09:00]--[2025-11-12 Wed 10:53] =>  1:53
    :END:

We have a number of valgrind leaks which appear to be real leaks. Get to the
bottom of these and produce a fix.

Links:

- [[https://github.com/getml/sqlgen/issues/88][#88: Discussion on potential memory leaks in the postgres backend]]
- [[https://github.com/getml/sqlgen/pull/89][#89: Fix memory management for postgres in edge cases]]

*** COMPLETED Review all code created so far with an LLM               :code:
    :LOGBOOK:
    CLOCK: [2025-11-15 Sat 18:36]--[2025-11-15 Sat 20:35] =>  1:59
    CLOCK: [2025-11-15 Sat 17:51]--[2025-11-15 Sat 18:26] =>  0:35
    CLOCK: [2025-11-15 Sat 16:37]--[2025-11-15 Sat 17:35] =>  0:58
    CLOCK: [2025-11-15 Sat 14:03]--[2025-11-15 Sat 16:37] =>  2:34
    CLOCK: [2025-11-15 Sat 13:43]--[2025-11-15 Sat 14:02] =>  0:19
    CLOCK: [2025-11-14 Fri 11:52]--[2025-11-14 Fri 11:58] =>  0:06
    CLOCK: [2025-11-13 Thu 22:17]--[2025-11-13 Thu 23:33] =>  1:16
    CLOCK: [2025-11-13 Thu 18:20]--[2025-11-13 Thu 20:13] =>  1:53
    CLOCK: [2025-11-13 Thu 16:45]--[2025-11-13 Thu 17:40] =>  0:55
    CLOCK: [2025-11-13 Thu 09:34]--[2025-11-13 Thu 11:01] =>  1:27
    CLOCK: [2025-11-12 Wed 21:18]--[2025-11-13 Thu 00:01] =>  2:43
    CLOCK: [2025-11-12 Wed 14:44]--[2025-11-12 Wed 15:32] =>  0:48
    CLOCK: [2025-11-12 Wed 12:10]--[2025-11-12 Wed 12:50] =>  0:40
    :END:

Current code review prompt:

#+begin_quote
Perform a fast, focused code review on the code I’ll show you.

Look for:

- Obvious bugs or logic errors
- Missed opportunities to use C++23 features
- Incorrect or unclear comments (improve them if needed)
- Security issues or unsafe patterns
- Inappropriate or missing logging (check log level and message clarity)
- Any other clear improvements worth noting
- For unit tests, ensure they are named correctly and have enough coverage

Be succinct — prefer clarity over grammar.

Output a short list of actionable items, ideally with suggested fixes.

The system uses Data-Oriented design for finance.

I’ll show you the header and implementation (if any) separately — comment on
them separately.
#+end_quote

- reviewed =ores.accounts=. Done core library, missing tests.
- reviewed =ores.cli=.
- reviewed =ores.risk=.

*** COMPLETED Fix broken windows build due to local time               :code:
    :LOGBOOK:
    CLOCK: [2025-11-15 Sat 14:03]--[2025-11-15 Sat 14:27] =>  0:24
    :END:

Getting the following error:

#+begin_src
[99/283] Building CXX object projects/ores.accounts/src/CMakeFiles/ores.accounts.lib.dir/domain/login_info_table_io.cpp.obj
FAILED: [code=1] projects/ores.accounts/src/CMakeFiles/ores.accounts.lib.dir/domain/login_info_table_io.cpp.obj
C:\PROGRA~1\LLVM\bin\CLANG_~1.EXE -DBOOST_ATOMIC_DYN_LINK -DBOOST_ATOMIC_NO_LIB -DBOOST_CHRONO_DYN_LINK -DBOOST_CHRONO_NO_LIB -DBOOST_CONTAINER_DYN_LINK -DBOOST_CONTAINER_NO_LIB -DBOOST_DATE_TIME_DYN_LINK -DBOOST_DATE_TIME_NO_LIB -DBOOST_FILESYSTEM_DYN_LINK=1 -DBOOST_FILESYSTEM_NO_LIB -DBOOST_LOG_DYN_LINK -DBOOST_LOG_NO_LIB -DBOOST_PROGRAM_OPTIONS_DYN_LINK -DBOOST_PROGRAM_OPTIONS_NO_LIB -DBOOST_THREAD_DYN_LINK -DBOOST_THREAD_NO_LIB -DBOOST_THREAD_USE_DLL -DBOOST_USE_WINAPI_VERSION=0xa00 -DYYJSON_IMPORTS -D_WIN32_WINNT=0xa00 -Dores_accounts_lib_EXPORTS -I/.../OreStudio/projects/ores.accounts/include -I/.../OreStudio/projects/ores.comms/include -I/.../OreStudio/projects/ores.utility/include -isystem /.../OreStudio/build/output/windows-clang-debug/vcpkg_installed/x64-windows/include -isystem /.../OreStudio/build/output/windows-clang-debug/vcpkg_installed/x64-windows/include/server -O0 -std=c++23 -D_DEBUG -D_DLL -D_MT -Xclang --dependent-lib=msvcrtd -g -Xclang -gcodeview -Werror -MD -MT projects/ores.accounts/src/CMakeFiles/ores.accounts.lib.dir/domain/login_info_table_io.cpp.obj -MF projects\ores.accounts\src\CMakeFiles\ores.accounts.lib.dir\domain\login_info_table_io.cpp.obj.d @projects\ores.accounts\src\CMakeFiles\ores.accounts.lib.dir\domain\login_info_table_io.cpp.obj.modmap -o projects/ores.accounts/src/CMakeFiles/ores.accounts.lib.dir/domain/login_info_table_io.cpp.obj -c /.../OreStudio/projects/ores.accounts/src/domain/login_info_table_io.cpp
projects/ores.accounts/src/domain/login_info_table_io.cpp:41:34: error: 'localtime' is deprecated: This function or variable may be unsafe. Consider using localtime_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details. [-Werror,-Wdeprecated-declarations]
   41 |         ss << std::put_time(std::localtime(&last_login_time), "%Y-%m-%d %H:%M:%S");
      |
#+end_src

Suggested Gemini fix:

#+begin_src c++
inline std::tm* safe_localtime(const std::time_t* time, std::tm* result) {
#ifdef _WIN32
    return localtime_s(result, time) == 0 ? result : nullptr;
#else
    return localtime_r(time, result);
#endif
}
#+end_src


*** COMPLETED Resolve crash on shutdown problem                        :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 21:21]--[2025-11-09 Sun 22:11] =>  0:50
    :END:

At present the app crashes when shutting down. This is due to the attach /
detach logic. We need to workout a plan for managing this. K2:

#+begin_src markdown
Yes — but only if you **keep the same ownership rule in both states** (attached *and* detached).
The moment you let Qt parent the widget **and** still keep it in a container that you later `delete`, you again have **two owners**, and the double-delete will come back as soon as the user re-attaches the window and then quits the program.

Below is the minimal change that lets the user detach/reattach as often as he wants **and** guarantees that the object is destroyed **exactly once**.

--------------------------------------------------------
1.  Pick one unique owner
--------------------------------------------------------
Make **MainWindow** the unique owner.
That means:

- Never give the widget a parent (pass `nullptr` in the constructor).
- Always insert it into one of the four containers.
- Delete it **only** from those containers (or when the user explicitly closes
  it).
- When the widget is *attached* to the MDI area, use
  ,**QMdiArea::addSubWindow()**; this only sets the **QMdiSubWindow** as parent
  of the **internal viewport**, **not** of your custom widget, so your widget
  stays parent-less.

Code sketch:

```cpp
// create
auto w = new CurrencyMdiWindow(nullptr);          // no parent
mdiArea->addSubWindow(w);                         // only the QMdiSubWindow gets a parent
currencyDetailWindows_.insert(iso, w);
allDetachableWindows_.append(w);
```

--------------------------------------------------------
2.  Remove it from the lists at the right moment
--------------------------------------------------------
As soon as the widget dies (user presses ×, or you programmatically close it) you must **erase the pointer** from every container; otherwise you will dereference a dangling pointer when you later iterate over the lists.

Connect once, right after creation:

```cpp
connect(w, &QObject::destroyed, this, [this, w](QObject* o) {
    Q_UNUSED(o)
    currencyDetailWindows_.remove(w->isoCode());
    allDetachableWindows_.removeAll(w);
    /* same for the other three maps/lists */
});
```

--------------------------------------------------------
3.  Detach / re-attach implementation
--------------------------------------------------------
Detaching simply reparents to **nullptr** and shows the widget as top-level:

```cpp
void MainWindow::detachWindow(QWidget* w)
{
    w->setParent(nullptr);
    w->show();
}
```

Re-attaching puts it back into the MDI area:

```cpp
void MainWindow::attachWindow(QWidget* w)
{
    w->setParent(nullptr);              // make sure it is still parent-less
    mdiArea->addSubWindow(w);
    w->show();
}
```

Because the widget **never** had a Qt parent, Qt will **never** auto-delete it; only your own code (or the user closing the top-level window while `Qt::WA_DeleteOnClose` is set) can trigger the `destroyed()` signal, and that signal already removed the pointer from the lists.

--------------------------------------------------------
4.  Destructor becomes trivial
--------------------------------------------------------
```cpp
MainWindow::~MainWindow()
{
    // delete every widget that is still alive
    qDeleteAll(currencyDetailWindows_);
    qDeleteAll(currencyHistoryWindows_);
    delete currencyListWindow_;
    qDeleteAll(allDetachableWindows_);
}
```

Each widget is deleted **once**, the `destroyed()` lambda runs immediately and clears the lists, so when the next container is destroyed its `qDeleteAll` sees only `nullptr`s (or the map is already empty).

--------------------------------------------------------
5.  Optional extra safety
--------------------------------------------------------
If you want to be 100 % sure, store **QPointer** in the containers instead of raw pointers:

```cpp
QMap<QString, QPointer<DetachableMdiSubWindow>> currencyDetailWindows_;
```

Now the destructor can even be written as

```cpp
for (auto it = currencyDetailWindows_.begin(); it != currencyDetailWindows_.end(); ++it)
    delete it.value();   // safe: delete nullptr is a no-op
```

but this is **not required**—the design above is already bullet-proof.

--------------------------------------------------------
Summary
--------------------------------------------------------
- Pick **one** owner (MainWindow).
- Keep widgets **parent-less**.
- Add / remove them from the lists **synchronously** via `destroyed()`.
- Detach/reattach only changes **visual** parent, not ownership.

With these rules you can detach and re-attach as often as you like, and the
program will still shut down without the heap corruption you are seeing now.
#+end_src

*** COMPLETED Assets are not being packaged                            :code:

*Rationale*: All assets are now interned into resources.

#+begin_src sh
[marco@lovelace bin]$ ./ores.qt
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_currency_dollar_euro_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_history_20_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_plug_disconnected_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_plug_connected_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_edit_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_delete_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_save_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_document_table_20_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_document_code_16_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_star_20_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_plug_connected_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_plug_disconnected_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_plug_connected_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_plug_disconnected_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_currency_dollar_euro_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_save_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_edit_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_delete_20_filled.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_document_table_20_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_document_code_16_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_star_20_regular.svg', because: No such file or directory
qt.svg: Cannot open file '/opt/OreStudio/0.0.4/bin/ic_fluent_history_20_regular.svg', because: No such file or directory
#+end_src

*** COMPLETED Split main window class                                  :code:
   :LOGBOOK:
   CLOCK: [2025-11-15 Sat 22:57]--[2025-11-15 Sat 23:45] =>  0:48
   :END:

At present the code in main window is very complex. We need to add a lot of
windows, and it is not scalable.

*** COMPLETED Move =base32_encode= to utilities                        :code:

*Rationale*: refactor has been done. Created new story for tests in utilities.

Add tests. Also move =host_to_network_32=, =read_uint16=, etc.

*** COMPLETED Add multi-selection support to currencies                :code:

Users should be able to select multiple currencies and delete them. Maybe we
should do like gmail and have check boxes?

*** COMPLETED Update readme with UI screenshots                        :code:

Now that we have a basic UI up and running, add it to docs.

*** COMPLETED Update doxygen main page                                :infra:
    :LOGBOOK:
    CLOCK: [2025-11-16 Sun 10:10]--[2025-11-16 Sun 10:33] =>  0:23
    :END:

It should be a bit more informative.

*** COMPLETED Improve UML diagrams                                     :code:
    :LOGBOOK:
    CLOCK: [2025-11-16 Sun 10:34]--[2025-11-16 Sun 11:59] =>  1:25
    :END:

After the extensive refactor, we need to update the Qt class diagram. We also
need to generate a system level component diagram.

*** POSTPONED Make UI/UX look more professional                        :code:
    :LOGBOOK:
    CLOCK: [2025-11-08 Sat 10:11]--[2025-11-08 Sat 20:04] =>  9:53
    CLOCK: [2025-11-08 Sat 08:57]--[2025-11-08 Sat 10:11] =>  1:14
    :END:

Links:

- [[https://www.claude.com/blog/improving-frontend-design-through-skills][Improving frontend design through Skills]]
- [[https://github.com/VoltAgent/awesome-claude-skills][Awesome Claude Skills]]

Analysis from Gemini:

#+begin_src markdown
To make your Qt application look like an advanced trading system—even for a
simple CRUD operation screen—requires moving beyond basic desktop application
styles toward the dense, high-contrast, data-rich aesthetic of platforms like
Bloomberg or professional broker terminals.

The current look (a dark table with simple data rows) is a great foundation.
Here are targeted suggestions for your Qt UI to elevate it to a professional,
advanced trading system aesthetic:

## I. Color and Contrast (The Dark Theme)

Your current dark gray background is good, but trading systems use specific
contrast to highlight data significance.

1.  **Define a Palette:** Adopt a limited, functional color palette:

      ,* **Primary Background:** A very dark, near-black charcoal (`#1A1A1A` or
        `#1E1E1E`). This is the foundation.
      ,* **Foreground/Text:** Clean white or light gray (`#F0F0F0`).
      ,* **Accent Color (Neutral):** A subdued corporate blue/cyan (`#007ACC` or
        a subtle green/gold from your branding) for selected rows, borders, and
        input focus.
      ,* **Data Status Colors:**
          ,* **Positive (Gains):** Bright, high-contrast green (`#00C853`).
          ,* **Negative (Losses):** High-contrast red (`#FF3333`).
          ,* *(While CRUD isn't about gains/losses, you can use these colors for
            status, like 'Active' vs. 'Inactive' currencies).*

2.  **Subtle Depth:** Avoid flat black. Use a slightly lighter shade of gray
    (`#2A2A2A`) for embedded panels, sidebars, and control areas to create
    visual segmentation, giving the impression of modularity.

## II. Typography and Data Presentation

Trading UIs prioritize density and scannability.

1.  **Monospace Font:** For the currency codes and numerical columns, switch to
    a clear, legible **monospace font** (like Consolas, Fira Code, or a custom
    font in Qt). Monospace fonts ensure that all numbers align perfectly in
    columns, which is essential for rapid data comparison.
2.  **Font Sizing:** Use a small, consistent font size (e.g., 10pt or 11pt) to
    fit more data on screen. Use bolding sparingly, primarily for the Currency
    Code (e.g., USD, EUR).
3.  **Visual Alignment:**
      ,* **Text Columns** (Currency Name): Left-aligned.
      ,* **Code Columns** (ISO Code, Symbol): Center-aligned.
      ,* **Numerical Columns** (Rounding, Precision): Right-aligned. **This is
        critical** for financial UIs, as it allows users to compare magnitude
        instantly.

## III. Advanced Table View Enhancements (QTableView/QTableWidget)

Since the core of this screen is a table, focus on making the table look
high-tech.

1.  **Header Styling:**

      ,* Make column headers slightly stand out with a subtle dark gradient or a
        distinct, slightly brighter background color (e.g., `#282828`).
      ,* Ensure the header font is crisp (perhaps slightly bolder than the row
        data).
      ,* Add tiny, clear **sort indicators** to show the current sort direction.

2.  **Row Selection:**

      ,* The selected row should use your accent color (e.g., a thin blue left
        border or a light blue background fill) with white or light gray text
        for high visibility.
      ,* Introduce **subtle, faint horizontal rules** (1px in a color like
        `#333333`) to separate rows, which aids readability in dense tables.

3.  **Interactive Elements (Hover):** Implement a very subtle change on row
    hover (e.g., the background darkens by 5%) to indicate interactivity, even
    if clicking doesn't change the view.

## IV. UI Layout and Modularity

Advanced UIs are rarely monolithic; they are built from modular panels.

1.  **Toolbar (Top):** Create a clean, dedicated toolbar area at the top for
    your CRUD operations (`Add`, `Edit`, `Delete`) and your system icons
    (Connection, Reference Data).

      ,* Use the Fluent UI System Icons you researched (`globe-32-regular`,
        `money-32-regular`).
      ,* Buttons should be flat, high-contrast text or icons only. On hover, they
        should reveal a subtle gray background or a thin accent border.

2.  **Side Panel (Right or Left):** Instead of a simple dialog for *editing*,
    use a dedicated side panel that slides out or appears next to the table when
    a row is selected.

      ,* This panel would house the detail view for the selected currency. This
        makes the UI feel like a single workspace rather than navigating modal
        windows.
      ,* Give this panel a slightly different background shade (`#2A2A2A`).

3.  **Status Bar (Bottom):** Add a sleek, minimal status bar at the bottom. This
    is where you would place your connection status icon (using your proposed
    `globe-32-regular` or `plug-connected-32-regular` icon). It reinforces the
    "system is live" feel.

## V. Qt-Specific Implementation via Stylesheets

In Qt, you achieve this professional look primarily through **QSS (Qt Style
Sheets)**. You will be targeting specific widgets (like `QTableView`,
`QPushButton`, `QLineEdit`) with CSS-like rules.

```css
/* Example QSS Snippets for the Trading Look */

QTableView {
    /* Base style for the data area */
    background-color: #1A1A1A; /* Primary Background */
    gridline-color: #333333; /* Faint row separators */
    color: #F0F0F0;
    border: 1px solid #007ACC; /* Subtle border using accent color */
    selection-background-color: #007ACC; /* Accent Color for selection */
    selection-color: white;
}

QHeaderView::section {
    /* Style for Column Headers */
    background-color: #282828; /* Slightly lighter shade for headers */
    color: #FFFFFF;
    border: none;
    padding: 6px;
    font-size: 11pt;
    font-weight: bold;
}

QLineEdit {
    /* Style for input fields (e.g., in the side panel or search) */
    background-color: #1A1A1A;
    border: 1px solid #444444;
    color: #F0F0F0;
    padding: 5px;
}

QPushButton {
    /* Flat button style for toolbar */
    background-color: transparent;
    border: none;
    color: #F0F0F0;
    padding: 8px 12px;
}

QPushButton:hover {
    /* Hover effect */
    background-color: #2A2A2A;
    border: 1px solid #007ACC;
}
```
#+end_src

*** POSTPONED Current issues with package install in debian            :code:
    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 09:02]--[2025-11-09 Sun 09:28] =>  0:26
    :END:

At present we have several issues with packaging:

- debs are built on ubuntu so they cannot install on latest debian testing as
  the t64 migration has been completed. Error:

#+begin_src sh
root@lovelace:~# apt install /home/marco/Downloads/orestudio_0.0.4_amd64.deb
You might want to run 'apt --fix-broken install' to correct these.
Unsatisfied dependencies:
 orestudio : Depends: libqt6gui6t64 (>= 6.1.2) but it is not installable
             Depends: libqt6widgets6t64 (>= 6.1.2) but it is not installable
Error: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).
root@lovelace:~# apt install libqt6widgets6t64 libqt6gui6t64
Package libqt6gui6t64 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
However the following packages replace it:
  libqt6gui6:i386  libqt6gui6


Package libqt6widgets6t64 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
However the following packages replace it:
  libqt6widgets6:i386  libqt6widgets6


Error: Package 'libqt6widgets6t64' has no installation candidate
Error: Package 'libqt6gui6t64' has no installation candidate
#+end_src

- when starting the package from a directory, it tries to create the log
  relative to that directory:

#+begin_src sh
[marco@lovelace ~]$ /opt/OreStudio/0.0.4/bin/ores.qt
terminate called after throwing an instance of 'boost::filesystem::filesystem_error'
  what():  boost::filesystem::create_directories: Permission denied [system:13]: "/home/marco/../log", "/home/marco/../log"
Aborted                    /opt/OreStudio/0.0.4/bin/ores.qt
#+end_src


    :LOGBOOK:
    CLOCK: [2025-11-09 Sun 21:00]--[2025-11-09 Sun 21:14] =>  0:14
    :END:

When investigating a crash we noticed the app is not exiting cleanly. Fix all of
these crashes before we go any further.

*** Footer

| Previous: [[id:154212FF-BB02-8D84-1E33-9338B458380A][Version Zero]] |
