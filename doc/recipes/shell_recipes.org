:PROPERTIES:
:ID: 2E53EE1A-6856-6904-7FEB-AC95C6722A63
:END:
#+title: ORE Studio Shell Recipes
#+author: Marco Craveiro
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil

Demonstrates all of the functionality available on the [[id:D0876A24-69BA-F484-ED9B-71CD3AA8710C][ORE Studio Shell
Component]].

* Recipes
  :PROPERTIES:
  :header-args: :exports both
  :header-args+: :results raw
  :header-args+: :dir ../../build/output/linux-clang-debug/publish/bin
  :header-args+: :var log_args="--log-enabled --log-level trace --log-directory ../log"
  :header-args+: :var ORES_CLIENT_LOGIN_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "newuser3")
  :END:

** General

*** Help

#+name: help-exit
#+begin_src ores-shell :exports none
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} << 'EOF'
<<help-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - connect <string> <string> <string>
	Connect to server (optional: host port identifier)
 - disconnect
	Disconnect from server
 - currencies
	(menu)
 - accounts
	(menu)
 - variability
	(menu)
ores-shell> Bye!
#+end_example

** Connectivity

Functionality related to connectivity such as connect to server, etc.

*** Auto connect
   :PROPERTIES:
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

#+name: auto-connect
#+begin_src ores-shell :exports none
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.shell ${log_args} ${connect_args} << 'EOF'
<<auto-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation

ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> Bye!
#+end_example

*** Basic connect

#+name: basic-connect
#+begin_src ores-shell :exports none
connect localhost 55555 test
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.shell ${log_args} << 'EOF'
<<basic-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> ✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation

ores-shell> Bye!
#+end_example

*** Auto login
   :PROPERTIES:
   :ID: CA27A829-0A1C-2C44-9AE3-D389D3898C4E
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :header-args+: :var login_args="--login-username newuser5"
   :END:

#+name: auto-login
#+begin_src ores-shell :exports none
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<auto-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation

✗ Auto-login failed: Server returned an error
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> Bye!
#+end_example

** Accounts
   :PROPERTIES:
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the accounts domain entity in [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio Accounts
Component]].

*** Bootstrap

Create the initial admin account.

#+name: initial-bootstrap
#+begin_src ores-shell :exports none
bootstrap newuser3 Secure-Password-123 newuser3@test.com
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation
  Use 'bootstrap <username> <password> <email>' to create the initial admin account.

ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> ✓ Initial admin account created successfully!
  Account ID: 019b13ea-d4a6-7494-8319-1808185f48bf
  You can now login with the credentials provided.
ores-shell> Bye!
#+end_example

*** Login

Explicit login is discouraged as it saves your credentials to the history.
Instead, consider using [[id:CA27A829-0A1C-2C44-9AE3-D389D3898C4E][Auto login]].

#+name: explicit-login
#+begin_src ores-shell :exports none
accounts login newuser3 Secure-Password-123
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> ✓ Login successful!
ores-shell> Bye!
#+end_example

*** Create
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

#+name: create-account
#+begin_src ores-shell :exports none
accounts create newuser28 123 567 newuser28@example.com 0
accounts create newuser29 123 567 newuser29@example.com 1
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<create-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> ✓ Account created with ID: 019b13f1-7eea-72ce-a76e-172895437e2e
ores-shell> ✓ Account created with ID: 019b13f1-7f8e-7295-9783-932e36172274
ores-shell> Bye!
#+end_example

*** List
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

#+name: list-account
#+begin_src ores-shell :exports none
accounts list
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell>
+--------------------------------------+-----------+-----------------------+--------+-------------+---------+
| ID (UUID)                            | Username  | Email                 | Admin? | Modified By | Version |
+--------------------------------------+-----------+-----------------------+--------+-------------+---------+
| 019b13f1-7f8e-7295-9783-932e36172274 | newuser29 | newuser29@example.com | Y      | ores        | 1       |
| 019b13f1-7eea-72ce-a76e-172895437e2e | newuser28 | newuser28@example.com | N      | ores        | 1       |
| 019b13ea-d4a6-7494-8319-1808185f48bf | newuser3  | newuser3@test.com     | Y      | bootstrap   | 1       |
| e7bddd23-c004-4652-99e1-8d4ff5856fe1 | newuser5  | newuser5@example.com  | N      | admin       | 1       |
+--------------------------------------+-----------+-----------------------+--------+-------------+---------+


ores-shell> Bye!
#+end_example

*** List Login Info
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

#+name: list-login-info
#+begin_src ores-shell :exports none
accounts list-logins
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-login-info>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell>
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| Account ID                           | Last IP   | Last Attempt IP | Failed | Locked | Online | Last Login          |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| e7bddd23-c004-4652-99e1-8d4ff5856fe1 | 127.0.0.1 | 127.0.0.1       | 0      | N      | Y      | 2025-12-12 16:21:36 |
| 019b13f1-7eea-72ce-a76e-172895437e2e | 0.0.0.0   | 0.0.0.0         | 0      | N      | N      | 1970-01-01 00:00:00 |
| 019b13f1-7f8e-7295-9783-932e36172274 | 0.0.0.0   | 0.0.0.0         | 0      | N      | N      | 1970-01-01 00:00:00 |
| 019b13ea-d4a6-7494-8319-1808185f48bf | 127.0.0.1 | 127.0.0.1       | 0      | N      | Y      | 2025-12-12 19:02:55 |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+


ores-shell> Bye!
#+end_example

** Variability
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the accounts domain entity in [[id:1EE1B07C-3EC4-9BC4-1C4B-5BD458A8B2E5][ORE Studio Variability
Component]].

*** List Feature Flags
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

#+name: list-feature-flags
#+begin_src ores-shell :exports none
variability list-flags
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_CLIENT_LOGIN_PASSWORD
./ores.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-feature-flags>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell>
+------------------------------------+---------+----------------------------------------------------------------------------------------+---------+-------------+
| Name                               | Version | Description                                                                            | Enabled | Modified By |
+------------------------------------+---------+----------------------------------------------------------------------------------------+---------+-------------+
| system.bootstrap_mode              | 0       | Indicates whether the system is in bootstrap mode (waiting for initial admin account). | 0       | system      |
| system.user_signups                | 0       | Controls whether user self-registration is allowed.                                    | 0       | system      |
| system.disable_password_validation | 0       | When enabled (1), disables strict password validation. FOR TESTING/DEVELOPMENT ONLY.   | 0       | system      |
+------------------------------------+---------+----------------------------------------------------------------------------------------+---------+-------------+


ores-shell> Bye!
#+end_example



** Currencies
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the currencies domain entity.

*** List

List all currencies in the system.

#+name: currencies-list
#+begin_src ores-shell :exports none
currencies get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-list>>
EOF
#+end_src

#+RESULTS:
#+begin_example
#+end_example

*** Add

Add a new currency.

#+name: currencies-add
#+begin_src ores-shell :exports none
currencies add TEST123 Test 1234
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.shell ${log_args} ${connect_args} << 'EOF'
<<currencies-list>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> ✗ Server returned an error
ores-shell> Bye!
#+end_example


* Footer

| Previous: [[id:46F5ED07-9E63-77B4-2783-E0147EFF45D0][Recipes]] |

# Local Variables:
# eval: (whitespace-mode -1)
# End:
