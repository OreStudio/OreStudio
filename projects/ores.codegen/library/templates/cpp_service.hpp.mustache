{{{cpp_license}}}
{{#domain_entity}}
#ifndef ORES_{{component_upper}}_SERVICE_{{entity_singular_upper}}_SERVICE_HPP
#define ORES_{{component_upper}}_SERVICE_{{entity_singular_upper}}_SERVICE_HPP

#include <string>
#include <vector>
#include <optional>
#include "ores.logging/make_logger.hpp"
#include "ores.database/domain/context.hpp"
#include "ores.{{component}}/domain/{{entity_singular}}.hpp"
#include "ores.{{component}}/repository/{{entity_singular}}_repository.hpp"

namespace ores::{{component}}::service {

/**
 * @brief Service for managing {{entity_plural_words}}.
 */
class {{entity_singular}}_service {
private:
    inline static std::string_view logger_name =
        "ores.{{component}}.service.{{entity_singular}}_service";

    [[nodiscard]] static auto& lg() {
        using namespace ores::logging;
        static auto instance = make_logger(logger_name);
        return instance;
    }

public:
    using context = ores::database::context;

    explicit {{entity_singular}}_service(context ctx);

    std::vector<domain::{{entity_singular}}> list_{{entity_plural_short}}();

    std::optional<domain::{{entity_singular}}>
    find_{{entity_singular_short}}(const std::string& {{primary_key.column}});

    void save_{{entity_singular_short}}(const domain::{{entity_singular}}& v);

    void remove_{{entity_singular_short}}(const std::string& {{primary_key.column}});

    std::vector<domain::{{entity_singular}}>
    get_{{entity_singular_short}}_history(const std::string& {{primary_key.column}});

private:
    context ctx_;
    repository::{{entity_singular}}_repository repo_;
};

}

#endif
{{/domain_entity}}
{{#junction}}
#ifndef ORES_{{component_upper}}_SERVICE_{{name_singular_upper}}_SERVICE_HPP
#define ORES_{{component_upper}}_SERVICE_{{name_singular_upper}}_SERVICE_HPP

#include <string>
#include <vector>
{{#has_uuid_left_or_right}}
#include <boost/uuid/uuid.hpp>
{{/has_uuid_left_or_right}}
#include "ores.logging/make_logger.hpp"
#include "ores.database/domain/context.hpp"
#include "ores.{{component}}/domain/{{name_singular}}.hpp"
#include "ores.{{component}}/repository/{{name_singular}}_repository.hpp"

namespace ores::{{component}}::service {

/**
 * @brief Service for managing {{name_words}}.
 *
 * This service provides functionality for:
 * - Managing {{name_words}} (CRUD operations)
 */
class {{name_singular}}_service {
private:
    inline static std::string_view logger_name =
        "ores.{{component}}.service.{{name_singular}}_service";

    [[nodiscard]] static auto& lg() {
        using namespace ores::logging;
        static auto instance = make_logger(logger_name);
        return instance;
    }

public:
    using context = ores::database::context;

    /**
     * @brief Constructs a {{name_singular}}_service with required repositories.
     *
     * @param ctx The database context.
     */
    explicit {{name_singular}}_service(context ctx);

    /**
     * @brief Lists all {{name_words}}.
     */
    std::vector<domain::{{name_singular}}> list_{{name_short}}();

    /**
     * @brief Lists {{name_words}} for a specific {{left.column_title_lower}}.
     *
     * @param {{left.column}} The {{left.column_title_lower}} to filter by
     */
    std::vector<domain::{{name_singular}}>
{{#left.is_uuid}}
    list_{{name_short}}_by_{{left.column_short}}(const boost::uuids::uuid& {{left.column}});
{{/left.is_uuid}}
{{^left.is_uuid}}
    list_{{name_short}}_by_{{left.column_short}}(const std::string& {{left.column}});
{{/left.is_uuid}}

    /**
     * @brief Saves a {{name_singular_words}} (creates or updates).
     *
     * @param {{name_singular_short}} The {{name_singular_words}} to save
     */
    void save_{{name_singular_short}}(const domain::{{name_singular}}& {{name_singular_short}});

    /**
     * @brief Removes a {{name_singular_words}}.
     *
     * @param {{left.column}} The {{left.column_title_lower}}
     * @param {{right.column}} The {{right.column_title_lower}}
     */
{{#left.is_uuid}}
    void remove_{{name_singular_short}}(const boost::uuids::uuid& {{left.column}},
{{/left.is_uuid}}
{{^left.is_uuid}}
    void remove_{{name_singular_short}}(const std::string& {{left.column}},
{{/left.is_uuid}}
{{#right.is_uuid}}
        const boost::uuids::uuid& {{right.column}});
{{/right.is_uuid}}
{{^right.is_uuid}}
        const std::string& {{right.column}});
{{/right.is_uuid}}

private:
    repository::{{name_singular}}_repository repo_;
};

}

#endif
{{/junction}}
