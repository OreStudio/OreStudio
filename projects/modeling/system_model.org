:PROPERTIES:
:ID: D773166D-0C91-8CB4-3323-42166BC07687
:END:
#+title: System Model
#+author: Marco Craveiro
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil
#+startup: inlineimages

This file documents the architecture of the [[id:D04D3476-D7C5-3954-A33B-C641EBCB43F6][ORE Studio]] system. ORE Studio
provides a graphical interface and data management for [[https://github.com/OpenSourceRisk/Engine][Open Source Risk Engine
(ORE)]].

ORE Studio is a [[https://en.cppreference.com/w/cpp/23.html][C++-23]] application providing persistent storage, graphical user
interface, and orchestration tools for quantitative risk analysis using ORE. The
system is built on a layered architecture with clear separation of concerns. The
objective of this page is to describe the system architecture.


#+attr_html: :class note
#+begin_quote
To operate on the system architecture, see the [[id:37b88704-7a45-4347-a80a-9d9b4ee71bef][System Architect]] skill.
#+end_quote

* System Architecture

Diagram:

#+attr_html: :width 100% :alt Description
#+caption: ORE Studio System Diagram
[[file:ores.png][file:ores.png]]

The system is organised into four architectural layers:

** Foundation Layer

- [[id:00E33570-F7BE-7F94-FD83-2FDC9CB04463][ores.utility]]: UUID generation, base32/base64 encoding, string conversion,
  faker utilities. No ores dependencies.
- [[id:7F3A2E81-B5C9-4D6A-8E12-9C4B3F5A7D0E][ores.platform]]: Filesystem utilities, environment variables, network info,
  cross-platform time utilities. Depends on: utility.
- [[id:1fbcc86b-8e04-4f81-8558-85c0b6c54836][ores.logging]]: Core logging infrastructure with Boost.Log integration, logger
  factory, severity levels. Depends on: platform.
- [[id:8A2B3C4D-5E6F-7A8B-9C0D-1E2F3A4B5C6D][ores.telemetry]]: Extends logging with distributed tracing (trace_id, span_id),
  OpenTelemetry integration, log record export. Depends on: logging, platform.
- [[id:3A8F2E91-D4C7-8AB4-5E23-91D6F8C04A72][ores.database]]: PostgreSQL connectivity, connection pooling, health monitoring,
  repository helpers. Depends on: telemetry, utility.
- [[id:1EE1B07C-3EC4-9BC4-1C4B-5BD458A8B2E5][ores.variability]]: Feature flags and runtime configuration management.
- [[id:8A1C5E2D-9B4F-4E8A-A7C3-6F2D1E0B9A5C][ores.geo]]: IP-to-location geolocation using MaxMind GeoLite2-City database.
  Provides country, city, and coordinate lookups for session tracking.
- [[id:B7E9F3A1-C8D2-4E6B-A1F5-9D3C7E8B2A4F][ores.sql]]: Postgres Database setup.
- Dependency order: utility → platform → logging → telemetry → database.

** Infrastructure Layer

- [[id:361A6093-D24C-9BC4-0543-6540461EDBB6][ores.comms]]: Binary protocol over SSL/TLS for client-server messaging.
  Publishes connection lifecycle events (connected, disconnected, reconnecting,
  reconnected) to event bus.
- [[id:7F58FF13-5A85-49C4-09BB-EED86B874ABB][ores.testing]]: Catch2 integration with database isolation and logging
  listeners.
- [[id:DDBC94C4-F350-478B-9E4C-643DEEA803B0][ores.eventing]]: Event-driven architecture with in-process publish/subscribe
  event bus, PostgreSQL LISTEN/NOTIFY integration, and entity change
  notifications.
- [[id:DF32FBB0-84E3-4679-A4ED-1E2A9FD9CADF][ores.assets]]: Asset management for images and visual resources. Binary image
  storage, hierarchical tagging, currency-to-image linking, messaging handlers
  (0x4000-0x4FFF).
- [[id:b0c9fdc8-f0b2-48fe-ae37-8fd79e6fd164][ores.http]]: HTTP infrastructure for RESTful API support. JWT token parsing,
  claims extraction, authentication middleware support.
- Depends on: Foundation (telemetry, database).

** Domain Layer

- [[id:204DB292-C32B-03E4-9DDB-BFE634F7CE91][ores.risk]]: ORE domain model with XML/CSV/JSON I/O and temporal versioning.
- [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ores.iam]]: User authentication, authorisation, and session management.
- Depends on: Foundation, Infrastructure

** Application Layer

- [[id:D0876A24-69BA-F484-ED9B-71CD3AA8710C][ores.comms.shell]]: REPL client. Exercises the service layer via the binary
  comms protocol.
- [[id:F0DAACD0-8EAB-46C4-6B53-640921E3F225][ores.cli]]: Command-line import/export of entities in multiple formats,
  exercises the database layer directly.
- [[id:25812E6F-7AD1-36E4-697B-EEC8015C4F1F][ores.qt]]: Desktop GUI with MDI interface for visual data management.
- [[id:7141E32C-80E2-6B74-F273-C80DAA42D727][ores.comms.service]]: Multi-client server hosting all backend services.
- [[id:19aeecd4-03ab-4d23-b2bc-9d96aaa64120][ores.http.server]]: RESTful HTTP API server for ORE Studio. Alternative to
  binary protocol for web clients and integrations.
- [[id:fe36240a-7a64-4332-9e82-8d976d458c73][ores.wt]]: Web application built with Wt framework for browser-based access.
  Account management, currency operations, feature flags via web UI.
- [[id:6E2967C7-D79E-41DE-8A68-B3F755541C0D][ores.comms.analyser]]: Communication session analyzer for debugging protocol
  issues. Parse and decode recorded binary protocol sessions.
- Depends on: All layers

* Useful Pages

- To understand the binary protocol, see the [[id:A7B3C9D2-E5F1-4A8B-9C6D-3E2F1A0B8C7D][Protocol Reference]].
- To understand how we generate PlantUML diagrams see the [[id:D6D86317-4961-6754-A6DB-9C12B5FAC997][PlantUML Modeler]]
  skill.
- To understand how to add new domain types, see the [[id:b1450696-8c51-4cc5-8910-84912a411ab6][Domain Type Creator]] skill.
- To understand unit testing, see the [[id:cb56337e-4839-4048-b5a7-c481812ce3d0][Unit Test Writer]] skill.

* General information

- For detailed component documentation, see the individual components.
- API documentation: https://orestudio.github.io/OreStudio/doxygen/html/index.html
- Source code: https://github.com/OreStudio/OreStudio
- Project website: https://orestudio.github.io/OreStudio

This project has no affiliation with Acadia, [[https://github.com/OpenSourceRisk/Engine][Open Source Risk Engine]], or
[[https://www.quantlib.org/][QuantLib]]. See [[https://orestudio.github.io/OreStudio/doxygen/html/index.html][Doxygen documentation]] for full context.

| Previous: [[id:C0CF98E8-082F-2F04-2533-94B2DA9BE3D2][Documentation]] |
