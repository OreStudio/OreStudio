/* -*- sql-product: postgres; tab-width: 4; indent-tabs-mode: nil -*-
 *
 * ISO Standards Reference Data Master Include File
 *
 * Auto-generated by iso_generate_metadata_sql.py
 * Includes all ISO Standards SQL files in the correct dependency order.
 */

-- =============================================================================
-- ISO Standards Catalog (must come first)
-- =============================================================================

\echo '--- ISO Standards Catalog ---'
\ir iso_catalog_populate.sql

-- =============================================================================
-- ISO Standards Methodology
-- =============================================================================

\echo '--- ISO Standards Methodology ---'
\ir iso_methodology_populate.sql

-- =============================================================================
-- ISO Coding Schemes Dataset (must come first - other datasets reference these schemes)
-- =============================================================================

\echo '--- ISO Coding Schemes Dataset ---'
\ir iso_coding_schemes_dataset_populate.sql

-- =============================================================================
-- ISO Standards Coding Schemes Artefacts
-- =============================================================================

\echo '--- ISO Standards Coding Schemes Artefacts ---'
\ir iso_coding_schemes_artefact_populate.sql

-- Publish coding schemes to production (required before other datasets can reference them)
\echo '--- Publishing ISO Coding Schemes ---'
select * from ores_dq_coding_schemes_publish_fn(
    (select id from ores_dq_datasets_tbl where code = 'iso.coding_schemes' and valid_to = ores_utility_infinity_timestamp_fn()),
    ores_iam_system_tenant_id_fn(),
    'upsert'
);

-- =============================================================================
-- ISO Standards Datasets (countries, currencies - depend on coding schemes)
-- =============================================================================

\echo '--- ISO Standards Datasets ---'
\ir iso_dataset_populate.sql

-- =============================================================================
-- ISO Standards Dataset Tags
-- =============================================================================

\echo '--- ISO Standards Dataset Tags ---'
\ir iso_dataset_tag_populate.sql

-- =============================================================================
-- ISO Standards Dataset Dependencies
-- =============================================================================

\echo '--- ISO Standards Dataset Dependencies ---'
\ir iso_dataset_dependency_populate.sql

-- =============================================================================
-- ISO Countries Artefacts
-- =============================================================================

\echo '--- ISO Countries Artefacts ---'
\ir iso_countries_artefact_populate.sql

-- =============================================================================
-- ISO Currencies Artefacts
-- =============================================================================

\echo '--- ISO Currencies Artefacts ---'
\ir iso_currencies_artefact_populate.sql
