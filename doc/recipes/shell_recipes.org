:PROPERTIES:
:ID: 2E53EE1A-6856-6904-7FEB-AC95C6722A63
:END:
#+title: ORE Studio Shell Recipes
#+author: Marco Craveiro
#+startup: inlineimages
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil

Demonstrates all of the functionality available on the [[id:D0876A24-69BA-F484-ED9B-71CD3AA8710C][ORE Studio Comms Shell
Component]].

* Recipes
  :PROPERTIES:
  :header-args: :exports both
  :header-args+: :results raw
  :header-args+: :dir ../../build/output/linux-clang-debug/publish/bin
  :header-args+: :var log_args="--log-enabled --log-level trace --log-directory ../log"
  :header-args+: :var ORES_COMMS_SHELL_LOGIN_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "newuser3")
  :END:

** General

*** Help

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} --help
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell is an interactive REPL for ORE Studio.
It provides a command-line interface for connecting to and interacting with ores.comms.service.

Usage: ores.shell [options]


General:
  -h [ --help ]                         Display usage and exit.
  -v [ --version ]                      Output version information and exit.

Logging:
  -e [ --log-enabled ]                  Generate a log file.
  -l [ --log-level ] arg (=info)        What level to use for logging. Valid
                                        values: trace, debug, info, warn,
                                        error.
  --log-to-console                      Output logging to the console, as well
                                        as to file.
  --log-directory arg (=log)            Where to place the log files.
  --log-filename arg (=ores.shell.log)  Name of the log file.

Telemetry:
  --telemetry-enabled                   Enable telemetry export. When enabled,
                                        all log records are exported to a JSON
                                        Lines file for log aggregation.
  --telemetry-service-name arg (=ores-shell)
                                        Name of the service producing
                                        telemetry. Used as service.name in
                                        resource attributes.
  --telemetry-service-version arg (=0.0.8)
                                        Version of the service producing
                                        telemetry. Used as service.version in
                                        resource attributes.
  --telemetry-output-file arg (=telemetry.jsonl)
                                        Name of the telemetry output file (JSON
                                        Lines format).
  --telemetry-output-directory arg (=log)
                                        Directory in which to place the
                                        telemetry output file.
  --telemetry-streaming-enabled         Enable streaming of log records to the
                                        server. When enabled, log records are
                                        batched and sent to the connected
                                        server.
  --telemetry-batch-size arg (=50)      Number of records to batch before
                                        sending to the server.
  --telemetry-flush-interval arg (=5)   Maximum seconds to wait before flushing
                                        a partial batch.

Connection:
  --connect-host arg                    Host to connect to (e.g., localhost)
  --connect-port arg                    Port to connect to (e.g., 55555)
  --connect-identifier arg              Client identifier to use when
                                        connecting

Login:
  --login-username arg                  Username for authentication
  --login-password arg                  Password for authentication

#+end_example

*** Version

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} --version
#+end_src

#+RESULTS:
#+begin_example
Client for ORE Studio v0.0.8
Copyright (C) 2025 Marco Craveiro.
License GPLv3: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Build: Provider = LOCAL
IMPORTANT: build details are NOT for security purposes.
#+end_example


*** Help Menu

#+name: help-exit
#+begin_src ores-shell :exports none
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - connect <string> <string> <string>
	Connect to server (optional: host port identifier)
 - disconnect
	Disconnect from server
 - currencies
	(menu)
 - accounts
	(menu)
 - bootstrap <string> <string> <string>
	Create initial admin account (username password email) - only works in bootstrap mode
 - login <string> <string>
	Login with username and password (alias for 'accounts login')
 - logout
	Logout the current user (alias for 'accounts logout')
 - variability
	(menu)
 - compression <string> <string>
	Set compression: 'compression off', 'compression on', 'compression on <algo>' (zlib/gzip/bzip2)
 - compression
	Show current compression setting
 - events
	(menu)
 - permissions
	(menu)
 - roles
	(menu)
ores-shell> Bye!
#+end_example

** Connectivity

Functionality related to connectivity such as connect to server, etc.

*** Auto connect
   :PROPERTIES:
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

#+name: auto-connect
#+begin_src ores-shell :exports none
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<auto-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation
  Use 'bootstrap <username> <password> <email>' to create the initial admin account.

ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Bye!
#+end_example

*** Basic connect

#+name: basic-connect
#+begin_src ores-shell :exports none
connect localhost 55555 test
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<basic-connect>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation

ores-shell> Bye!
#+end_example

*** Auto login
   :PROPERTIES:
   :ID: CA27A829-0A1C-2C44-9AE3-D389D3898C4E
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :header-args+: :var login_args="--login-username newuser3"
   :END:

#+name: auto-login
#+begin_src ores-shell :exports none
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<auto-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Bye!
#+end_example

*** Login logout

#+name: login-alias
#+begin_src ores-shell :exports none
connect localhost 55555 test
login newuser3 Secure-Password-123
logout
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<login-alias>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Connected to :55555
ores-shell> ✓ Login successful!
ores-shell> ✓ Logged out successfully.
ores-shell> Bye!
#+end_example


** Accounts
   :PROPERTIES:
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the accounts domain entity in [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio Accounts
Component]].

*** Help Menu

#+name: help-currencies-exit
#+begin_src ores-shell :exports none
currencies
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-currencies-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> currencies> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all currencies from the server
 - add <string> <string> <string> <string> <string>
	Add a currency (iso_code name [numeric_code] [symbol] [fractions_per_unit])
 - ores-shell
	(menu)
currencies> Bye!
#+end_example

*** Bootstrap

Create the initial admin account.

#+name: initial-bootstrap
#+begin_src ores-shell :exports none
bootstrap newuser3 Secure-Password-123 newuser3@test.com
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<initial-bootstrap>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555

⚠ WARNING: System is in BOOTSTRAP MODE
  System in BOOTSTRAP MODE - awaiting initial admin account creation
  Use 'bootstrap <username> <password> <email>' to create the initial admin account.

ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Initial admin account created successfully!
  Account ID: 019b7c15-5f67-76a1-84be-9d74381b1c7f
  You can now login with the credentials provided.
ores-shell> Bye!
#+end_example

*** Login

Explicit login is discouraged as it saves your credentials to the history.
Instead, consider using [[id:CA27A829-0A1C-2C44-9AE3-D389D3898C4E][Auto login]].

#+name: explicit-login
#+begin_src ores-shell :exports none
accounts login newuser3 Secure-Password-123
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-login>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Login successful!
ores-shell> Bye!
#+end_example

*** Logout

Explicit logout.

#+name: explicit-logout
#+begin_src ores-shell :exports none
accounts login newuser3 Secure-Password-123
accounts logout
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} ${connect_args} << 'EOF'
<<explicit-logout>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Login successful!
ores-shell> ✓ Logged out successfully.
ores-shell> Bye!
#+end_example

*** Create
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Creates new user accounts.

#+name: create-account
#+begin_src ores-shell :exports none
accounts create newuser40 Secure-Password-123 567 newuser40@example.com
accounts create newuser41 Secure-Password-123 567 newuser41@example.com
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<create-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Account created with ID: 019b7c16-a28c-7444-9546-9a051962f014
ores-shell> ✓ Account created with ID: 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
ores-shell> Bye!
#+end_example

*** List
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Lists existing accounts.

#+name: list-account
#+begin_src ores-shell :exports none
accounts list
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+-----------+-----------------------+-------------+-------------------------------+---------+
| ID (UUID)                            | Username  | Email                 | Recorded By | Recorded At                   | Version |
+--------------------------------------+-----------+-----------------------+-------------+-------------------------------+---------+
| 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c | newuser41 | newuser41@example.com | ores        | 2026-01-02 00:23:37.000000000 | 1       |
| 019b7c16-a28c-7444-9546-9a051962f014 | newuser40 | newuser40@example.com | ores        | 2026-01-02 00:23:36.000000000 | 1       |
| 019b7c15-5f67-76a1-84be-9d74381b1c7f | newuser3  | newuser3@test.com     | bootstrap   | 2026-01-02 00:22:14.000000000 | 1       |
+--------------------------------------+-----------+-----------------------+-------------+-------------------------------+---------+


ores-shell> Bye!
#+end_example

*** List Login Info
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Lists login information.

#+name: list-login-info
#+begin_src ores-shell :exports none
accounts list-logins
exit
#+end_src

#+begin_src sh :noweb yes :results output :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-login-info>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| Account ID                           | Last IP   | Last Attempt IP | Failed | Locked | Online | Last Login          |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| 019b7c16-a28c-7444-9546-9a051962f014 | 0.0.0.0   | 0.0.0.0         | 0      | N      | N      | 1970-01-01 00:00:00 |
| 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c | 0.0.0.0   | 0.0.0.0         | 0      | N      | N      | 1970-01-01 00:00:00 |
| 019b7c15-5f67-76a1-84be-9d74381b1c7f | 127.0.0.1 | 127.0.0.1       | 0      | N      | Y      | 2026-01-02 00:27:36 |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+


ores-shell> Bye!
#+end_example

*** Lock
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Lock an account to prevent login.

#+name: lock-account
#+begin_src ores-shell :exports none
accounts lock 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<lock-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Account locked successfully!
  Account ID: 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
ores-shell> Bye!
#+end_example

*** Unlock
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Unlock a previously locked account.

#+name: unlock-account
#+begin_src ores-shell :exports none
accounts unlock 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<unlock-account>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Account unlocked successfully!
  Account ID: 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
ores-shell> Bye!
#+end_example

*** Account Roles
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

List roles assigned to an account.

#+name: account-roles
#+begin_src ores-shell :exports none
accounts roles 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<account-roles>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
Roles for Account: 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c

+--------------------------------------+--------+------------------------------------------------+-----------------------------+-------------+---------+
| ID (UUID)                            | Name   | Description                                    | Permissions                 | Recorded By | Version |
+--------------------------------------+--------+------------------------------------------------+-----------------------------+-------------+---------+
| d48b608d-c894-4346-887d-228e342d36c6 | Sales  | Sales operations - read-only currency access   | currencies:read, flags:read | system      | 1       |
| 6e4ee358-1970-400f-a3cb-fbcfe8296f52 | Viewer | Viewer - basic read-only access to domain data | currencies:read, flags:read | system      | 1       |
+--------------------------------------+--------+------------------------------------------------+-----------------------------+-------------+---------+


ores-shell> Bye!
#+end_example

*** Account Permissions
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

List effective permissions for an account.

#+name: account-permissions
#+begin_src ores-shell :exports none
accounts permissions 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<account-permissions>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
Effective Permissions for Account: 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
=======================================================================

  - currencies:read
  - flags:read

Total: 2 item(s)
ores-shell> Bye!
#+end_example

*** Assign Role
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Assign a role to an account.

#+name: assign-role
#+begin_src ores-shell :exports none
roles list
accounts assign-role 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c d48b608d-c894-4346-887d-228e342d36c6
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<assign-role>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| ID (UUID)                            | Name       | Description                                                   | Permissions                                                   | Recorded By | Version |
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| dd2ecaec-138b-453c-a110-77441a60583e | Admin      | Full administrative access to all system functions            | *                                                             | system      | 1       |
| b898350f-f704-4e97-b8ec-36c3481af052 | Operations | Operations - currency management and account viewing          | accounts:read, currencies:create, currencies:delete (+4 more) | system      | 1       |
| d48b608d-c894-4346-887d-228e342d36c6 | Sales      | Sales operations - read-only currency access                  | currencies:read, flags:read                                   | system      | 1       |
| d533c93f-bf3c-4d1f-bba8-4e949b976a8a | Support    | Support - read-only access to all resources and admin screens | accounts:read, currencies:history, currencies:read (+3 more)  | system      | 1       |
| a74f8a4e-f331-4179-aecb-cda61e472805 | Trading    | Trading operations - currency read access                     | currencies:history, currencies:read, flags:read               | system      | 1       |
| 6e4ee358-1970-400f-a3cb-fbcfe8296f52 | Viewer     | Viewer - basic read-only access to domain data                | currencies:read, flags:read                                   | system      | 1       |
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+


ores-shell> V Role assigned successfully!
  Account ID: 019b7c16-a34a-7d96-8cdd-3f6a1b3aaa6c
  Role ID:    d48b608d-c894-4346-887d-228e342d36c6
ores-shell> Bye!
#+end_example

*** Revoke Role
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

Revoke a role from an account.

#+name: revoke-role
#+begin_src ores-shell :exports none
accounts revoke-role e7bddd23-c004-4652-99e1-8d4ff5856fe1 d48b608d-c894-4346-887d-228e342d36c6
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<revoke-role>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> V Role revoked successfully!
  Account ID: e7bddd23-c004-4652-99e1-8d4ff5856fe1
  Role ID:    d48b608d-c894-4346-887d-228e342d36c6
ores-shell> Bye!
#+end_example

** Variability
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the accounts domain entity in [[id:1EE1B07C-3EC4-9BC4-1C4B-5BD458A8B2E5][ORE Studio Variability
Component]].

*** Help Menu

#+name: help-variability-exit
#+begin_src ores-shell :exports none
variability
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-variability-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.6
Type 'help' for available commands, 'exit' to quit

ores-shell> variability> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - list-flags
	Retrieve all feature flags from the server
 - ores-shell
	(menu)
variability> Bye!
#+end_example


*** List Feature Flags
    :PROPERTIES:
    :header-args+: :var login_args="--login-username newuser3"
    :END:

#+name: list-feature-flags
#+begin_src ores-shell :exports none
variability list-flags
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args}  << 'EOF'
<<list-feature-flags>>
EOF
#+END_SRC

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------+-------------------------------+
| Name                                 | Version | Description                                                                                                         | Enabled | Recorded By | Recorded At                   |
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------+-------------------------------+
| system.bootstrap_mode                | 0       | Indicates whether the system is in bootstrap mode (waiting for initial admin account).                              | 0       | system      | 1970-01-01 00:00:00.000000000 |
| system.disable_password_validation   | 0       | When enabled, disables strict password validation. FOR TESTING/DEVELOPMENT ONLY.                                    | 0       | system      | 1970-01-01 00:00:00.000000000 |
| system.signup_requires_authorization | 0       | Controls whether new signups require admin authorization. NOT YET IMPLEMENTED - enabling will cause signup to fail. | 0       | system      | 1970-01-01 00:00:00.000000000 |
| system.user_signups                  | 0       | Controls whether user self-registration is allowed.                                                                 | 0       | system      | 1970-01-01 00:00:00.000000000 |
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------+-------------------------------+


ores-shell> Bye!
#+end_example


** Currencies
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Functionality related to the currencies domain entity.

*** Help Menu

#+name: help-currencies-exit
#+begin_src ores-shell :exports none
currencies
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-currencies-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> currencies> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - get
	Retrieve all currencies from the server
 - add <string> <string> <string> <string> <string>
	Add a currency (iso_code name [numeric_code] [symbol] [fractions_per_unit])
 - ores-shell
	(menu)
currencies> Bye!
#+end_example

*** Get

Get all currencies in the system.

#+name: currencies-list
#+begin_src ores-shell :exports none
currencies get
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-list>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>

+----------+---------+-----------------------------------------+--------+------+----------------+-----------+-------------+-------------------------------+
| ISO Code | Version | Name                                    | Symbol | Type | Fractions/Unit | Precision | Recorded By | Recorded At                   |
+----------+---------+-----------------------------------------+--------+------+----------------+-----------+-------------+-------------------------------+
| USD      | 1       | US Dollar                               | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| CAD      | 1       | Canadian Dollar                         | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MXN      | 1       | Mexican Peso                            | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BRL      | 1       | Brazilian Real                          | R$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| ARS      | 1       | Argentine Peso                          | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| CLP      | 1       | Chilean Peso                            | $      | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| COP      | 1       | Colombian Peso                          | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| PEN      | 1       | Peruvian Sol                            | S/     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| UYU      | 1       | Uruguayan Peso                          | $U     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| PYG      | 1       | Paraguayan Guarani                      | ₲    | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| BOB      | 1       | Bolivian Boliviano                      | Bs     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| VES      | 1       | Venezuelan Bolivar                      | Bs     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| CRC      | 1       | Costa Rican Colon                       | ₡    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| PAB      | 1       | Panamanian Balboa                       | B/.    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| GTQ      | 1       | Guatemalan Quetzal                      | Q      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| HNL      | 1       | Honduran Lempira                        | L      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| NIO      | 1       | Nicaraguan Cordoba                      | C$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| DOP      | 1       | Dominican Peso                          | RD$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| CUP      | 1       | Cuban Peso                              | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| JMD      | 1       | Jamaican Dollar                         | J$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| TTD      | 1       | Trinidad and Tobago Dollar              | TT$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BBD      | 1       | Barbadian Dollar                        | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BSD      | 1       | Bahamian Dollar                         | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| HTG      | 1       | Haitian Gourde                          | G      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| SRD      | 1       | Surinamese Dollar                       | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| GYD      | 1       | Guyanese Dollar                         | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BZD      | 1       | Belize Dollar                           | BZ$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| AWG      | 1       | Aruban Florin                           | ƒ     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| ANG      | 1       | Netherlands Antillean Guilder           | ƒ     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| XCD      | 1       | East Caribbean Dollar                   | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| KYD      | 1       | Cayman Islands Dollar                   | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BMD      | 1       | Bermudian Dollar                        | $      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| FKP      | 1       | Falkland Islands Pound                  | £     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| EUR      | 1       | Euro                                    | €    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| GBP      | 1       | British Pound Sterling                  | £     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| CHF      | 1       | Swiss Franc                             | CHF    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| NOK      | 1       | Norwegian Krone                         | kr     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| SEK      | 1       | Swedish Krona                           | kr     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| DKK      | 1       | Danish Krone                            | kr     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| ISK      | 1       | Icelandic Krona                         | kr     | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| PLN      | 1       | Polish Zloty                            | zł    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| CZK      | 1       | Czech Koruna                            | Kč    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| HUF      | 1       | Hungarian Forint                        | Ft     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| RON      | 1       | Romanian Leu                            | lei    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BGN      | 1       | Bulgarian Lev                           | лв   | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| HRK      | 1       | Croatian Kuna                           | kn     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| RSD      | 1       | Serbian Dinar                           | дин | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BAM      | 1       | Bosnia and Herzegovina Convertible Mark | KM     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MKD      | 1       | Macedonian Denar                        | ден | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| ALL      | 1       | Albanian Lek                            | L      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MDL      | 1       | Moldovan Leu                            | L      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| UAH      | 1       | Ukrainian Hryvnia                       | ₴    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BYN      | 1       | Belarusian Ruble                        | Br     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| RUB      | 1       | Russian Ruble                           | ₽    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| GEL      | 1       | Georgian Lari                           | ₾    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| AMD      | 1       | Armenian Dram                           | ֏     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| AZN      | 1       | Azerbaijani Manat                       | ₼    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| TRY      | 1       | Turkish Lira                            | ₺    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| GIP      | 1       | Gibraltar Pound                         | £     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| JPY      | 1       | Japanese Yen                            | ¥     | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| CNY      | 1       | Chinese Yuan                            | ¥     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| HKD      | 1       | Hong Kong Dollar                        | HK$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| TWD      | 1       | New Taiwan Dollar                       | NT$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| KRW      | 1       | South Korean Won                        | ₩    | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| KPW      | 1       | North Korean Won                        | ₩    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| SGD      | 1       | Singapore Dollar                        | S$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MYR      | 1       | Malaysian Ringgit                       | RM     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| IDR      | 1       | Indonesian Rupiah                       | Rp     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| THB      | 1       | Thai Baht                               | ฿    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| VND      | 1       | Vietnamese Dong                         | ₫    | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| PHP      | 1       | Philippine Peso                         | ₱    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| INR      | 1       | Indian Rupee                            | ₹    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| PKR      | 1       | Pakistani Rupee                         | Rs     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BDT      | 1       | Bangladeshi Taka                        | ৳    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| LKR      | 1       | Sri Lankan Rupee                        | Rs     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| NPR      | 1       | Nepalese Rupee                          | Rs     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MMK      | 1       | Myanmar Kyat                            | K      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| KHR      | 1       | Cambodian Riel                          | ៛    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| LAK      | 1       | Lao Kip                                 | ₭    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MNT      | 1       | Mongolian Tugrik                        | ₮    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| KZT      | 1       | Kazakhstani Tenge                       | ₸    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| UZS      | 1       | Uzbekistani Som                         | сўм | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| KGS      | 1       | Kyrgyzstani Som                         | с     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| TJS      | 1       | Tajikistani Somoni                      | ЅМ   | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| TMT      | 1       | Turkmenistani Manat                     | m      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| AFN      | 1       | Afghan Afghani                          | ؋     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| AUD      | 1       | Australian Dollar                       | A$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| NZD      | 1       | New Zealand Dollar                      | NZ$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| FJD      | 1       | Fijian Dollar                           | FJ$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| PGK      | 1       | Papua New Guinean Kina                  | K      | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| SBD      | 1       | Solomon Islands Dollar                  | SI$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| VUV      | 1       | Vanuatu Vatu                            | VT     | fiat | 0              | 0         | system      | 2026-01-01 23:51:55.000000000 |
| WST      | 1       | Samoan Tala                             | WS$    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| TOP      | 1       | Tongan Paanga                           | T$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MOP      | 1       | Macanese Pataca                         | MOP$   | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BND      | 1       | Brunei Dollar                           | B$     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| BTN      | 1       | Bhutanese Ngultrum                      | Nu.    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| MVR      | 1       | Maldivian Rufiyaa                       | Rf     | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| SAR      | 1       | Saudi Riyal                             | ﷼    | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
| AED      | 1       | UAE Dirham                              | د.إ  | fiat | 100            | 2         | system      | 2026-01-01 23:51:55.000000000 |
+----------+---------+-----------------------------------------+--------+------+----------------+-----------+-------------+-------------------------------+



ores-shell> Bye!
#+end_example

*** Add

Add a new currency.

#+name: currencies-add
#+begin_src ores-shell :exports none
currencies add TEST700 Test700 700 A 100
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<currencies-add>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Currency added successfully!
ores-shell> Bye!
#+end_example


** RBAC
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Role-Based Access Control functionality for managing permissions and roles.

*** Help Menu Permissions

#+name: help-permissions-exit
#+begin_src ores-shell :exports none
permissions
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-permissions-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> permissions> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - list
	List all permissions in the system
 - ores-shell
	(menu)
permissions> Bye!
#+end_example

*** Help Menu Roles

#+name: help-roles-exit
#+begin_src ores-shell :exports none
roles
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-roles-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> roles> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - list
	List all roles in the system
 - show <string>
	Show role details (role_name or role_id)
 - ores-shell
	(menu)
roles> Bye!
#+end_example

*** List Permissions

List all permissions in the system.

#+name: list-permissions
#+begin_src ores-shell :exports none
permissions list
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<list-permissions>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+-------------------------+---------------------------------------+
| ID (UUID)                            | Code                    | Description                           |
+--------------------------------------+-------------------------+---------------------------------------+
| 8f827c95-2af4-4d78-9ccb-22f5d9f4df99 | *                       | Full access to all operations         |
| 9e337a58-2ee6-4de4-8946-76015de6e928 | accounts:create         | Create new user accounts              |
| 7151df18-e4c9-4522-bb65-c1055a3e97c1 | accounts:delete         | Delete user accounts                  |
| c225162e-2b04-4685-b1be-0bacbe367e45 | accounts:lock           | Lock user accounts                    |
| 4956001c-5ece-4dc8-b437-c834045c25eb | accounts:read           | View user account details             |
| 5f5f8909-3820-411f-a9f2-d5efb5ad351a | accounts:reset_password | Force password reset on user accounts |
| fc5587f3-72ad-4706-a1ac-ca735af5a919 | accounts:unlock         | Unlock user accounts                  |
| cf4ac1a8-b39e-4faa-b6d3-f9ed3d1ef41a | accounts:update         | Modify user account settings          |
| 43ce84fb-b14a-490a-92d1-4eade25eda37 | currencies:create       | Create new currencies                 |
| 7fb3f2e6-9b0d-4996-9c02-14e39a732acd | currencies:delete       | Delete currencies                     |
| 5472a25a-40cf-4bac-9c95-dda2589f12f7 | currencies:history      | View currency version history         |
| 17f8d400-47fa-4648-8b47-48ab3c1ec82b | currencies:read         | View currency details                 |
| e1bca8df-8133-4c08-9365-160baf99125e | currencies:update       | Modify currency settings              |
| 62e6e9ea-5258-41d2-9107-0602512801e6 | flags:create            | Create new feature flags              |
| 8e42e330-5467-48c2-9a26-5af5b5fcb10e | flags:delete            | Delete feature flags                  |
| 3b26954f-6368-4c12-b2e2-67797d442714 | flags:read              | View feature flag status              |
| 5f72cfef-c8a9-4926-a1a3-f51c955595f7 | flags:update            | Modify feature flag settings          |
| 12e8300a-e76c-4cd6-a439-2098e45393a2 | login_info:read         | View login history and info           |
| 95d69095-1223-4dbb-970e-8042d90d61de | roles:assign            | Assign roles to accounts              |
| 2301fe57-f568-4930-b3ec-4a9fba903932 | roles:create            | Create new roles                      |
| e12a56d4-64a8-436d-8ad8-1909b2439369 | roles:delete            | Delete roles                          |
| eba37c8c-79e2-4193-9a54-ceb555b1cdda | roles:read              | View role details                     |
| cd69a420-e93b-4e41-9bab-ee8d6dcd0b7a | roles:revoke            | Revoke roles from accounts            |
| af5743da-3042-469d-8487-ed859b9de7f5 | roles:update            | Modify role permissions               |
+--------------------------------------+-------------------------+---------------------------------------+


ores-shell> Bye!
#+end_example

*** List Roles

List all roles in the system.

#+name: list-roles
#+begin_src ores-shell :exports none
roles list
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<list-roles>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| ID (UUID)                            | Name       | Description                                                   | Permissions                                                   | Recorded By | Version |
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+
| dd2ecaec-138b-453c-a110-77441a60583e | Admin      | Full administrative access to all system functions            | *                                                             | system      | 1       |
| b898350f-f704-4e97-b8ec-36c3481af052 | Operations | Operations - currency management and account viewing          | accounts:read, currencies:create, currencies:delete (+4 more) | system      | 1       |
| d48b608d-c894-4346-887d-228e342d36c6 | Sales      | Sales operations - read-only currency access                  | currencies:read, flags:read                                   | system      | 1       |
| d533c93f-bf3c-4d1f-bba8-4e949b976a8a | Support    | Support - read-only access to all resources and admin screens | accounts:read, currencies:history, currencies:read (+3 more)  | system      | 1       |
| a74f8a4e-f331-4179-aecb-cda61e472805 | Trading    | Trading operations - currency read access                     | currencies:history, currencies:read, flags:read               | system      | 1       |
| 6e4ee358-1970-400f-a3cb-fbcfe8296f52 | Viewer     | Viewer - basic read-only access to domain data                | currencies:read, flags:read                                   | system      | 1       |
+--------------------------------------+------------+---------------------------------------------------------------+---------------------------------------------------------------+-------------+---------+


ores-shell> Bye!
#+end_example

*** Show Role

Show details for a specific role.

#+name: show-role
#+begin_src ores-shell :exports none
roles show Admin
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<show-role>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell>
Role Details
============
ID:          dd2ecaec-138b-453c-a110-77441a60583e
Name:        Admin
Description: Full administrative access to all system functions
Version:     1
Recorded By: system

Permissions (1):
-------------
  - *

ores-shell> Bye!
#+end_example


** Events
   :PROPERTIES:
   :header-args+: :var login_args="--login-username newuser3"
   :header-args+: :var connect_args="--connect-host localhost --connect-port 55555 --connect-identifier recipes"
   :END:

Event subscription functionality for receiving notifications from the server.

*** Help Menu

#+name: help-events-exit
#+begin_src ores-shell :exports none
events
help
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<help-events-exit>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> events> Commands available:
 - help
	This help message
 - exit
	Quit the session
 - history
	Show the history
 - ! <history entry index>
	Exec a command by index in the history
 - channels
	List available event channels
 - listen <string>
	Subscribe to notifications for an event type
 - unlisten <string>
	Unsubscribe from notifications (event_type or * for all)
 - subscriptions
	List active subscriptions
 - notifications
	Display and clear pending notifications
 - ores-shell
	(menu)
events> Bye!
#+end_example

*** Channels

List available event channels.

#+name: events-channels
#+begin_src ores-shell :exports none
events channels
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-channels>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Available event channels:
  ores.risk.currency_changed - Currency data modified
  ores.iam.account_changed - Account data modified
  ores.iam.role_assigned - Role assigned to account
  ores.iam.role_revoked - Role revoked from account
  ores.iam.permissions_changed - Account permissions modified
  ores.variability.feature_flags_changed - Feature flags modified

Use 'listen <channel>' to subscribe, or 'listen *' for all.
ores-shell> Bye!
#+end_example

*** Listen

Subscribe to notifications for an event type.

#+name: events-listen
#+begin_src ores-shell :exports none
events listen ores.risk.currency_changed
events subscriptions
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-listen>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Listening on ores.risk.currency_changed
ores-shell> Active subscriptions:
  • ores.risk.currency_changed
ores-shell> Bye!
#+end_example

*** Unlisten

Unsubscribe from notifications.

#+name: events-unlisten
#+begin_src ores-shell :exports none
events listen ores.risk.currency_changed
events unlisten ores.risk.currency_changed
events subscriptions
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-unlisten>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> ✓ Listening on ores.risk.currency_changed
ores-shell> ✓ Stopped listening on ores.risk.currency_changed
ores-shell> No active subscriptions.
ores-shell> Bye!
#+end_example

*** Subscriptions

List active subscriptions.

#+name: events-subscriptions
#+begin_src ores-shell :exports none
events subscriptions
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-subscriptions>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> No active subscriptions.
ores-shell> Bye!
#+end_example

*** Notifications

Display and clear pending notifications.

#+name: events-notifications
#+begin_src ores-shell :exports none
events notifications
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
export ORES_COMMS_SHELL_LOGIN_PASSWORD
./ores.comms.shell ${log_args} ${connect_args} ${login_args} << 'EOF'
<<events-notifications>>
EOF
#+end_src

#+RESULTS:
#+begin_example
✓ Connected to :55555
✓ Logged in as: newuser3
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> No pending notifications.
ores-shell> Bye!
#+end_example


** Compression

Compression settings for client-server communication.

*** Show Status

Show current compression setting.

#+name: compression-status
#+begin_src ores-shell :exports none
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-status>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Compression: on (zlib, gzip, bzip2)
ores-shell> Bye!
#+end_example

*** Disable Compression

Disable compression for new connections.

#+name: compression-off
#+begin_src ores-shell :exports none
compression off
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-off>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> wrong command: compression off
ores-shell> Compression: on (zlib, gzip, bzip2)
ores-shell> Bye!
#+end_example

*** Enable All Compression

Enable all compression algorithms.

#+name: compression-on-all
#+begin_src ores-shell :exports none
compression on
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-on-all>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> wrong command: compression on
ores-shell> Compression: on (zlib, gzip, bzip2)
ores-shell> Bye!
#+end_example

*** Enable Specific Algorithm

Enable a specific compression algorithm (zlib, gzip, or bzip2).

#+name: compression-on-zlib
#+begin_src ores-shell :exports none
compression on zlib
compression
exit
#+end_src

#+begin_src sh :noweb yes :results output  :wrap example
./ores.comms.shell ${log_args} << 'EOF'
<<compression-on-zlib>>
EOF
#+end_src

#+RESULTS:
#+begin_example
ORE Studio Shell REPL v0.0.8
Type 'help' for available commands, 'exit' to quit.

ores-shell> Compression enabled with zlib only.
Setting takes effect on next connection.
ores-shell> Compression: on (zlib)
ores-shell> Bye!
#+end_example

* Footer

| Previous: [[id:46F5ED07-9E63-77B4-2783-E0147EFF45D0][Recipes]] |

# Local Variables:
# eval: (whitespace-mode -1)
# End:
