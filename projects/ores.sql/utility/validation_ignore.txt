# Validation Ignore Rules
#
# Format: WARNING_CODE entity_pattern
# - Lines starting with # are comments
# - Empty lines are skipped
# - Patterns support * wildcard (e.g., dq_*_artefact_tbl)
#
# Warning codes:
# - DROP_001: Table created but no drop script
# - DROP_002: Function created but no drop script
# - TEMPORAL_004: Missing version column
# - TEMPORAL_005: Missing modified_by column
# - TEMPORAL_006: Missing change_reason_code column
# - TENANT_001: Missing tenant_id column
# - TENANT_002: Missing tenant_id in primary key
# - TENANT_003: Missing tenant_id in EXCLUDE constraint

# =============================================================================
# Change reason tables - intentionally missing change_reason_code
# These ARE the change reason tables, they can't reference themselves
# =============================================================================
TEMPORAL_006 ores_dq_change_reason_categories_tbl
TEMPORAL_006 ores_dq_change_reasons_tbl

# =============================================================================
# Lightweight junction tables - intentionally omit version
# These are simple relationship tables without full audit trail
# =============================================================================
TEMPORAL_004 ores_dq_dataset_dependencies_tbl

# =============================================================================
# System-managed tables - no user audit trail needed
# =============================================================================
TEMPORAL_004 ores_iam_permissions_tbl
TEMPORAL_005 ores_iam_permissions_tbl

# =============================================================================
# Artefact/staging tables - tenant_id not in PK by design
# These are temporary import tables where dataset_id is the primary identifier.
# tenant_id is carried for data flow to target tables, not for uniqueness.
# =============================================================================
TENANT_002 ores_dq_*_artefact_tbl

# =============================================================================
# Audit/publication tables - tenant_id not in PK by design
# These are append-only logs with UUID primary keys.
# tenant_id is present for filtering but not for uniqueness.
# =============================================================================
TENANT_002 ores_dq_dataset_publications_tbl
TENANT_002 ores_dq_bundle_publications_tbl

# =============================================================================
# Tenants table - tenant_id is always system_tenant_id by design
# All tenant records are owned by the system tenant. The tenant's own identity
# is stored in 'id', not 'tenant_id'. Including tenant_id in PK or EXCLUDE
# would be redundant since it's always the same value (system tenant).
# =============================================================================
TENANT_002 ores_iam_tenants_tbl
TENANT_003 ores_iam_tenants_tbl

# =============================================================================
# Tags table - tag_id UUID is globally unique by design
# tenant_id is used for filtering and name uniqueness within tenant,
# but not needed in PK/EXCLUDE since tag_id is already globally unique.
# =============================================================================
TENANT_002 ores_assets_tags_tbl
TENANT_003 ores_assets_tags_tbl

# =============================================================================
# Image tags junction table - temporal, but tag UUIDs are globally unique.
# tenant_id is present for RLS and filtering; the PK covers the essential
# uniqueness. EXCLUDE constraint tracks the tag/image pair over time.
# =============================================================================
TENANT_002 ores_assets_image_tags_tbl
TENANT_003 ores_assets_image_tags_tbl

# =============================================================================
# Geolocation reference table - tenant_id used for RLS but not a primary key
# column. The table has no conventional PK (it uses a GiST range index); the
# tenant_id + ip_range combination is sufficient for lookup queries.
# =============================================================================
TENANT_002 ores_geo_ip2country_tbl

# =============================================================================
# IAM temporal junction tables - tenant_id present for RLS but not in PK.
# The FK-linked UUIDs (account_id, role_id, permission_id) are globally unique,
# so tenant isolation is enforced via RLS rather than PK membership. The EXCLUDE
# constraint covers the entity pair + valid period; tenant_id is not needed
# there because the entity IDs already imply a single tenant.
# =============================================================================
TENANT_002 ores_iam_account_roles_tbl
TENANT_003 ores_iam_account_roles_tbl
TENANT_002 ores_iam_role_permissions_tbl
TENANT_003 ores_iam_role_permissions_tbl

# =============================================================================
# Login info table - single row per account_id; account_id is globally unique
# so tenant_id is not needed in the primary key.
# =============================================================================
TENANT_002 ores_iam_login_info_tbl

# =============================================================================
# TimescaleDB hypertable tables - tenant_id is present for RLS but excluded
# from the primary key by design. Hypertable PKs must include the partition
# column (a timestamp) and typically a UUID; adding tenant_id would add
# unnecessary width to the partition index without benefit.
# =============================================================================
TENANT_002 ores_iam_sessions_tbl
TENANT_002 ores_iam_session_samples_tbl
TENANT_002 ores_telemetry_logs_tbl

# =============================================================================
# Database info table - single-row system metadata, not tenant-specific.
# Records schema version, git commit and build environment at creation time.
# There is exactly one row per database instance; tenant_id has no meaning here.
# =============================================================================
TENANT_001 ores_database_info_tbl
