{
  "domain_entity": {
    "schema": "public",
    "product": "ores",
    "component": "refdata",
    "has_tenant_id": true,
    "entity_singular": "counterparty",
    "entity_plural": "counterparties",
    "entity_title": "Counterparty",
    "brief": "An external trading partner participating in financial transactions.",
    "description": "External trading partners and counterparties that participate in financial\ntransactions with the organisation. Counterparties form a hierarchy through\nparent_counterparty_id for group structures.",

    "primary_key": {
      "column": "id",
      "type": "uuid",
      "cpp_type": "boost::uuids::uuid",
      "description": "UUID uniquely identifying this counterparty.",
      "detail": "Surrogate key for the counterparty record."
    },

    "natural_keys": [
      {
        "column": "full_name",
        "type": "text",
        "cpp_type": "std::string",
        "description": "Full legal name of the counterparty.",
        "detail": "The official registered name of the external entity.",
        "generator_expr": "std::string(faker::company::name())"
      },
      {
        "column": "short_code",
        "type": "text",
        "cpp_type": "std::string",
        "description": "Short code for quick reference.",
        "detail": "A brief mnemonic code used in trading systems.",
        "generator_expr": "std::string(faker::string::alpha(6))"
      }
    ],

    "columns": [
      {
        "name": "party_type",
        "type": "text",
        "cpp_type": "std::string",
        "nullable": false,
        "description": "Classification of this counterparty.",
        "detail": "References the party_type lookup table.",
        "generator_expr": "std::string(\"Bank\")"
      },
      {
        "name": "parent_counterparty_id",
        "type": "uuid",
        "cpp_type": "std::optional<boost::uuids::uuid>",
        "nullable": true,
        "description": "Parent counterparty for hierarchy.",
        "detail": "References the parent counterparty record for group structures. Null for root counterparties.",
        "generator_expr": "std::nullopt"
      },
      {
        "name": "business_center_code",
        "type": "text",
        "cpp_type": "std::string",
        "nullable": true,
        "description": "Business center location code.",
        "detail": "FpML business center code indicating primary location.",
        "generator_expr": "std::string(\"USNY\")"
      },
      {
        "name": "status",
        "type": "text",
        "cpp_type": "std::string",
        "nullable": false,
        "description": "Current lifecycle status.",
        "detail": "References the party_status lookup table.",
        "generator_expr": "std::string(\"Active\")"
      }
    ],

    "sql": {
      "tablename": "ores_refdata_counterparties_tbl"
    },

    "repository": {
      "entity_singular_short": "counterparty",
      "entity_plural_short": "counterparties",
      "entity_singular_words": "counterparty",
      "entity_plural_words": "counterparties"
    },

    "cpp": {
      "includes": {
        "domain": ["<chrono>", "<string>", "<optional>", "<boost/uuid/uuid.hpp>"],
        "entity": ["<string>", "<optional>", "\"sqlgen/Timestamp.hpp\"", "\"sqlgen/PrimaryKey.hpp\""]
      },
      "iterator_var": "cp",
      "table_display": [
        {"column": "short_code", "header": "Code"},
        {"column": "full_name", "header": "Name"},
        {"column": "party_type", "header": "Type"},
        {"column": "status", "header": "Status"},
        {"column": "business_center_code", "header": "Business Center"},
        {"column": "recorded_by", "header": "Recorded By"},
        {"column": "version", "header": "Version"}
      ]
    },

    "qt": {
      "domain_include": "ores.refdata/domain/counterparty.hpp",
      "domain_class": "refdata::domain::counterparty",
      "protocol_include": "ores.refdata/messaging/counterparty_protocol.hpp",
      "collection_name": "counterparties",
      "item_var": "counterparty",
      "key_field": "short_code",
      "has_uuid_primary_key": true,
      "get_request_class": "refdata::messaging::get_counterparties_request",
      "get_response_class": "refdata::messaging::get_counterparties_response",
      "get_message_type": "get_counterparties_request",
      "save_request_class": "refdata::messaging::save_counterparty_request",
      "save_response_class": "refdata::messaging::save_counterparty_response",
      "save_message_type": "save_counterparty_request",
      "save_request_item_field": "counterparty",
      "delete_request_class": "refdata::messaging::delete_counterparty_request",
      "delete_response_class": "refdata::messaging::delete_counterparty_response",
      "delete_message_type": "delete_counterparty_request",
      "history_request_class": "refdata::messaging::get_counterparty_history_request",
      "history_response_class": "refdata::messaging::get_counterparty_history_response",
      "history_message_type": "get_counterparty_history_request",
      "columns": [
        {"enum_name": "ShortCode", "field": "short_code", "header": "Code", "is_string": true, "width": 120},
        {"enum_name": "FullName", "field": "full_name", "header": "Name", "is_string": true, "width": 250},
        {"enum_name": "PartyType", "field": "party_type", "header": "Type", "is_string": true, "width": 120},
        {"enum_name": "Status", "field": "status", "header": "Status", "is_string": true, "width": 100},
        {"enum_name": "BusinessCenterCode", "field": "business_center_code", "header": "Business Center", "is_string": true, "width": 130},
        {"enum_name": "Version", "field": "version", "header": "Version", "is_int": true, "width": 80},
        {"enum_name": "RecordedBy", "field": "recorded_by", "header": "Recorded By", "is_string": true, "width": 120},
        {"enum_name": "RecordedAt", "field": "recorded_at", "header": "Recorded At", "is_timestamp": true, "width": 150}
      ],
      "settings_group": "CounterpartyListWindow",
      "window_title": "Counterparties",
      "icon": "Handshake"
    }
  }
}
