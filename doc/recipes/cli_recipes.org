:PROPERTIES:
:ID: A1B2C3D4-E5F6-7890-ABCD-EF1234567890
:ROAM_ALIASES: CLI
:END:
#+title: Command Line Interface Recipes
#+author: Marco Craveiro
#+options: <:nil c:nil todo:nil ^:nil d:nil date:nil author:nil toc:nil html-postamble:nil

Demonstrates commands available in the [[id:F0DAACD0-8EAB-46C4-6B53-640921E3F225][ORE Studio CLI Component]].

* Recipes
  :PROPERTIES:
  :header-args: :exports both
  :header-args+: :results raw
  :header-args+: :dir ../../build/output/linux-clang-debug/publish/bin
  :header-args+: :var data_dir="../../../../../projects/ores.refdata/tests/test_data/currencies"
  :header-args+: :var ORES_CLI_DB_PASSWORD=(auth-source-pick-first-password :host "localhost" :user "ores")
  :header-args+: :var db_args="--db-user ores --db-host localhost --db-port 5432 --db-database ores_frosty_leaf"
  :header-args+: :var log_args="--log-enabled --log-level debug --log-directory ../log"
  :END:

** General
   :PROPERTIES:
   :header-args+: :wrap src text
   :END:

General commands that do not exercise domain functionality.

*** Help

Display global help showing all available commands.

#+begin_src sh
./ores.cli --help
#+end_src

#+RESULTS:
#+begin_src text
ORE Studio is a User Interface for Open Source Risk Engine (ORE).
CLI provides a command line version of the interface.
ORE Studio is created by the ORE Studio project.
ores.cli uses a command-based interface: <command> <options>.
See below for a list of valid commands.

Global options:

General:
  -h [ --help ]                       Display usage and exit.
  -v [ --version ]                    Output version information and exit.

Logging:
  -e [ --log-enabled ]                Generate a log file.
  -l [ --log-level ] arg (=info)      What level to use for logging. Valid
                                      values: trace, debug, info, warn, error.
  --log-to-console                    Output logging to the console, as well as
                                      to file.
  --log-directory arg (=log)          Where to place the log files.
  --log-filename arg (=ores.cli.log)  Name of the log file.

Commands:

   currencies     Manage currencies (import, export, list, delete, add).
   accounts       Manage accounts (list, delete, add).
   feature-flags  Manage feature flags (list, delete, add).
   login-info     View login tracking information (list).

For entity and operation specific options, use: <entity> <operation> --help
#+end_src

*** Version

Display version information.

#+begin_src sh
./ores.cli --version
#+end_src

#+RESULTS:
#+begin_src text
CLI for ORE Studio v0.0.8
Copyright (C) 2025 Marco Craveiro.
License GPLv3: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Build: Provider = LOCAL
IMPORTANT: build details are NOT for security purposes.
#+end_src

** Currencies
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Currency management operations from the [[id:204DB292-C32B-03E4-9DDB-BFE634F7CE91][ORE Studio Risk Component]].

*** Help

Show available operations for currencies.

#+begin_src sh :wrap src text
./ores.cli currencies --help
#+end_src

#+RESULTS:
#+begin_src text
currencies - Manage currencies

Usage: ores.cli currencies <operation> [options]

Available operations:
   import         Import currencies from ORE XML files
   export         Export currencies to ORE XML or CSV (external formats)
   list           List currencies as JSON or table (internal formats)
   delete         Delete a currency by ISO code
   add            Add currencies from JSON files

For operation-specific options, use: currencies <operation> --help
#+end_src

*** Import

Import currencies from ORE XML format.

**** Import single file

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies import ${db_args} ${log_args} \
  --target ${data_dir}/currencies_API.xml
#+end_src

#+RESULTS:
#+begin_src json
"currencies_API.xml": Imported a total of 178 currencies.
#+end_src

**** Import multiple files

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies import ${db_args} ${log_args} \
  --target ${data_dir}/currencies_API.xml \
  --target ${data_dir}/currencies_42.xml
#+end_src

#+RESULTS:
#+begin_src json
"currencies_API.xml": Imported a total of 178 currencies.
"currencies_42.xml": Imported a total of 2 currencies.
#+end_src

*** Export

Export currencies to external formats (ORE XML or CSV).

**** Export all as ORE XML

#+begin_src sh :wrap src xml
export ORES_CLI_DB_PASSWORD
./ores.cli currencies export ${db_args} ${log_args} --format xml | \
    xmllint --format - | \
    head -n 20
#+end_src

#+RESULTS:
#+begin_src xml
<?xml version="1.0" encoding="UTF-8"?>
<CurrencyConfig>
  <Currency>
    <Name>Papua New Guinean kina</Name>
    <ISOCode>PGK</ISOCode>
    <NumericCode>598</NumericCode>
    <Symbol>K</Symbol>
    <FractionSymbol/>
    <FractionsPerUnit>100</FractionsPerUnit>
    <RoundingType>Closest</RoundingType>
    <RoundingPrecision>2</RoundingPrecision>
    <Format>%3% %1$.2f</Format>
    <CurrencyType/>
  </Currency>
  <Currency>
    <Name>Somali shilling</Name>
    <ISOCode>SOS</ISOCode>
    <NumericCode>706</NumericCode>
    <Symbol>K</Symbol>
    <FractionSymbol/>
#+end_src

**** Export all as CSV

#+begin_src sh :wrap src csv
export ORES_CLI_DB_PASSWORD
./ores.cli currencies export ${db_args} ${log_args} \
  --format csv | head
#+end_src

#+RESULTS:
#+begin_src csv
iso_code,name,numeric_code,symbol,fraction_symbol,fractions_per_unit,rounding_type,rounding_precision,format,currency_type,modified_by,valid_from,valid_to
PGK,Papua New Guinean kina,598,K,"",100,Closest,2,%3% %1$.2f,"",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
SOS,Somali shilling,706,K,"",100,Closest,2,%3% %1$.2f,"",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
ALL,Albanian lek,8,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
AMD,Armenian dram,51,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
ANG,Netherlands Antillean guilder,532,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
AOA,Angolan kwanza,973,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
ARS,Argentine peso,32,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
AUD,Australian dollar,36,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
AWG,Aruban florin,533,"","",100,Closest,2,"","",ores,2025-12-11 23:45:39,2025-12-11 23:45:39
#+end_src

**** Export specific currency

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies export ${db_args} ${log_args} \
  --format json --key USD | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 15,
    "iso_code": "USD",
    "name": "United States dollar",
    "numeric_code": "840",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:45:39",
    "valid_to": "2025-12-11 23:45:39"
  }
]
#+end_src

**** Export all versions of a currency

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies export ${db_args} ${log_args} \
  --format json --key USD --all-versions | jq .[:3]
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 15,
    "iso_code": "USD",
    "name": "United States dollar",
    "numeric_code": "840",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:45:39",
    "valid_to": "2025-12-11 23:45:39"
  },
  {
    "version": 14,
    "iso_code": "USD",
    "name": "United States dollar",
    "numeric_code": "840",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:44:52",
    "valid_to": "2025-12-11 23:44:52"
  },
  {
    "version": 13,
    "iso_code": "USD",
    "name": "United States dollar",
    "numeric_code": "840",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:36:31",
    "valid_to": "2025-12-11 23:36:31"
  }
]
#+end_src

**** Export as of specific time point

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies export ${db_args} ${log_args} \
  --format json --as-of "2025-12-11 23:44:52" | jq .[:3]
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 13,
    "iso_code": "MVR",
    "name": "Maldivian rufiyaa",
    "numeric_code": "462",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:36:31",
    "valid_to": "2025-12-11 23:36:31"
  },
  {
    "version": 13,
    "iso_code": "AED",
    "name": "United Arab Emirates dirham",
    "numeric_code": "784",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:36:31",
    "valid_to": "2025-12-11 23:36:31"
  },
  {
    "version": 13,
    "iso_code": "AFN",
    "name": "Afghan afghani",
    "numeric_code": "971",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:36:31",
    "valid_to": "2025-12-11 23:36:31"
  }
]
#+end_src

*** List

List currencies using internal formats (JSON or table).

**** List all currencies as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies list ${db_args} ${log_args} \
  --format json | jq .[:3]
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 26,
    "iso_code": "PGK",
    "name": "Papua New Guinean kina",
    "numeric_code": "598",
    "symbol": "K",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "%3% %1$.2f",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:45:39",
    "valid_to": "2025-12-11 23:45:39"
  },
  {
    "version": 26,
    "iso_code": "SOS",
    "name": "Somali shilling",
    "numeric_code": "706",
    "symbol": "K",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "%3% %1$.2f",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:45:39",
    "valid_to": "2025-12-11 23:45:39"
  },
  {
    "version": 15,
    "iso_code": "ALL",
    "name": "Albanian lek",
    "numeric_code": "8",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:45:39",
    "valid_to": "2025-12-11 23:45:39"
  }
]
#+end_src

**** List all currencies as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli currencies list ${db_args} ${log_args} \
  --format table  | head -n 15
#+end_src

#+RESULTS:
#+begin_src org

+----------+---------+-----------------------------------------+--------+---------------+----------------+-----------+-------------------+-------------+-------------------------------+
| ISO Code | Version | Name                                    | Symbol | Type          | Fractions/Unit | Precision | Change Reason     | Recorded By | Recorded At                   |
+----------+---------+-----------------------------------------+--------+---------------+----------------+-----------+-------------------+-------------+-------------------------------+
| USD      | 1       | US Dollar                               | $      | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| CAD      | 1       | Canadian Dollar                         | $      | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| MXN      | 1       | Mexican Peso                            | $      | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| BRL      | 1       | Brazilian Real                          | R$     | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| ARS      | 1       | Argentine Peso                          | $      | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| CLP      | 1       | Chilean Peso                            | $      | fiat          | 0              | 0         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| COP      | 1       | Colombian Peso                          | $      | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| PEN      | 1       | Peruvian Sol                            | S/     | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| UYU      | 1       | Uruguayan Peso                          | $U     | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| PYG      | 1       | Paraguayan Guarani                      | â‚²    | fiat          | 0              | 0         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
| BOB      | 1       | Bolivian Boliviano                      | Bs     | fiat          | 100            | 2         | system.new_record | system      | 2026-01-11 21:39:07.000000000 |
#+end_src

**** List specific currency

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies list ${db_args} ${log_args} \
  --format json --key EUR | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 15,
    "iso_code": "EUR",
    "name": "Euro",
    "numeric_code": "978",
    "symbol": "",
    "fraction_symbol": "",
    "fractions_per_unit": 100,
    "rounding_type": "Closest",
    "rounding_precision": 2,
    "format": "",
    "currency_type": "",
    "modified_by": "ores",
    "valid_from": "2025-12-11 23:45:39",
    "valid_to": "2025-12-11 23:45:39"
  }
]
#+end_src

*** Delete

Delete a currency by ISO code.

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli currencies delete ${db_args} ${log_args} \
  --key ZAR
#+end_src

#+RESULTS:
#+begin_src json
Currency deleted successfully: ZAR
#+end_src

*** Add

Add a new currency.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli currencies add ${db_args} ${log_args} --iso-code ABCDE --name "New Currency" \
    --numeric-code 1234 --modified-by test --currency-type major
./ores.cli currencies list ${db_args} ${log_args} \
  --format table --key ABCDE
#+end_src

#+RESULTS:
#+begin_src text
Successfully added currency: ABCDE

+----------+---------+--------------+--------+-------+----------------+-----------+-------------+---------------------+---------------------+
| ISO Code | Version | Name         | Symbol | Type  | Fractions/Unit | Precision | Modified By | Valid From          | Valid To            |
+----------+---------+--------------+--------+-------+----------------+-----------+-------------+---------------------+---------------------+
| ABCDE    | 2       | New Currency |        | major | 100            | 2         | test        | 2025-12-11 23:51:36 | 2025-12-11 23:51:36 |
+----------+---------+--------------+--------+-------+----------------+-----------+-------------+---------------------+---------------------+


#+end_src

** Accounts
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Account management operations from the [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio Accounts Component]].

*** Help

Show available operations for accounts.

#+begin_src sh :wrap src text
./ores.cli accounts --help
#+end_src

#+RESULTS:
#+begin_src text
accounts - Manage accounts

Usage: ores.cli accounts <operation> [options]

Available operations:
   list           List accounts as JSON or table (internal formats)
   delete         Delete an account by username or UUID
   add            Add an account using command-line arguments

For operation-specific options, use: accounts <operation> --help
#+end_src

*** List

List accounts from the database.

**** List all as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli accounts list ${db_args} ${log_args} \
  --format json | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "is_admin": false,
    "id": "e7bddd23-c004-4652-99e1-8d4ff5856fe1",
    "modified_by": "admin",
    "username": "newuser5",
    "password_hash": "$scrypt$ln=14,r=8,p=1$/hbMzxNC7PoCaMsu9FfYPg==$n6DPA0bUTHzF3X7cc0ZHB0A1ALpvhbN3Y95fybA3ZXnDWqOXjiBiv7WnCdhQkj5g4QGvh0mjG5oGYq7m07ySDg==",
    "password_salt": "",
    "totp_secret": "",
    "email": "newuser5@example.com"
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli accounts list ${db_args} ${log_args} \
  --format table
#+end_src

#+RESULTS:
#+begin_src org
+--------------------------------------+----------+-------------------+-------------------+-------------+-------------------------------+---------+
| ID (UUID)                            | Username | Email             | Change Reason     | Recorded By | Recorded At                   | Version |
+--------------------------------------+----------+-------------------+-------------------+-------------+-------------------------------+---------+
| 019baeff-c69f-7571-8e0d-761e1cd3156c | newuser3 | newuser3@test.com | system.new_record | bootstrap   | 2026-01-11 21:39:16.000000000 | 1       |
+--------------------------------------+----------+-------------------+-------------------+-------------+-------------------------------+---------+

#+end_src

**** List specific account by username

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli accounts list ${db_args} ${log_args} \
  --format json --key adminuser | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "is_admin": true,
    "id": "1ba0b8a3-9668-4a70-80fd-6d9d9efcda9d",
    "modified_by": "admin",
    "username": "adminuser",
    "password_hash": "$scrypt$ln=14,r=8,p=1$Ivga7n7Xz+PjF2rkDa5iVw==$+izU4e5BT57qFYdpiF6c2Ln1pRVEh8RH+nZkZ8MOHrWxDvTEjemC4yq34RiOrgzqaYGeX8QdjiEKBS5sQS614w==",
    "password_salt": "",
    "totp_secret": "",
    "email": "admin@example.com"
  }
]
#+end_src

**** List all versions of an account

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli accounts list ${db_args} ${log_args} \
  --format json --key adminuser --all-versions | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "is_admin": true,
    "id": "1ba0b8a3-9668-4a70-80fd-6d9d9efcda9d",
    "modified_by": "admin",
    "username": "adminuser",
    "password_hash": "$scrypt$ln=14,r=8,p=1$Ivga7n7Xz+PjF2rkDa5iVw==$+izU4e5BT57qFYdpiF6c2Ln1pRVEh8RH+nZkZ8MOHrWxDvTEjemC4yq34RiOrgzqaYGeX8QdjiEKBS5sQS614w==",
    "password_salt": "",
    "totp_secret": "",
    "email": "admin@example.com"
  }
]
#+end_src

*** Delete

Delete an account by username or UUID.

**** Delete by username

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli accounts delete ${db_args} ${log_args} \
  --key newuser4
#+end_src

#+RESULTS:
#+begin_src json
Account deleted successfully: 3b6efad4-039f-4dd4-8e0d-6209a08f8148
#+end_src

**** Delete by UUID

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli accounts delete ${db_args} ${log_args} \
  --key 9dec6b76-f982-47c3-bb11-58b62ca5c0d1
#+end_src

#+RESULTS:
#+begin_src json
Account deleted successfully: 9dec6b76-f982-47c3-bb11-58b62ca5c0d1
#+end_src

*** Add

Add a new account using command-line arguments.

**** Add regular user account

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli accounts add ${db_args} ${log_args} \
  --username newuser5 \
  --email newuser5@example.com \
  --password "Secure-Password-123" \
  --modified-by admin
#+end_src

#+RESULTS:
#+begin_src text
System is currently in bootstrap mode.
Successfully added account: newuser5 (ID: e7bddd23-c004-4652-99e1-8d4ff5856fe1)
#+end_src

**** Add admin account

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli accounts add ${db_args} ${log_args} \
  --username adminuser2 --email adminuser2@example.com \
  --password "Admin-Password-456" --admin --modified-by admin
#+end_src

#+RESULTS:
#+begin_src text
Successfully added account: adminuser2 (ID: 6ca39d5f-4ffe-4a6d-a0b4-fd68488b2d8f)
#+end_src

** Login Info

Login info operations.

*** Help

Show available operations for feature flags.

#+begin_src sh :wrap src text
./ores.cli login-info add --help
#+end_src

#+RESULTS:
#+begin_src text
ORE Studio is a User Interface for Open Source Risk Engine (ORE).
CLI provides a command line version of the interface.
ORE Studio is created by the ORE Studio project.
Displaying options specific to the 'login-info add' command.
For global options, type --help.


Add Login Info Options:
  --account-id arg                    Account ID (UUID) for the login info
                                      (required)
  --locked arg (=0)                   Whether the account is locked (default:
                                      false)
  --failed-logins arg (=0)            Number of failed login attempts (default:
                                      0)

Database:
  --db-user arg (=ores)               Database user name.
  --db-password arg                   Database password. Can also be provided
                                      via ORES_DB_PASSWORD environment
                                      variable.
  --db-host arg (=localhost)          Database host.
  --db-database arg (=oresdb)         Database name.
  --db-port arg (=5432)               Database port.

Logging:
  -e [ --log-enabled ]                Generate a log file.
  -l [ --log-level ] arg (=info)      What level to use for logging. Valid
                                      values: trace, debug, info, warn, error.
  --log-to-console                    Output logging to the console, as well as
                                      to file.
  --log-directory arg (=log)          Where to place the log files.
  --log-filename arg (=ores.cli.log)  Name of the log file.
#+end_src

*** List

List feature flags from the database.

**** List all as JSON

#+begin_src sh :wrap src json
export ORES_CLI_DB_PASSWORD
./ores.cli login-info list ${db_args} ${log_args} --format json | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "last_login": "2025-12-12 16:07:21.000000000Z",
    "account_id": "e7bddd23-c004-4652-99e1-8d4ff5856fe1",
    "failed_logins": 0,
    "locked": false,
    "online": false,
    "last_ip": "0.0.0.0",
    "last_attempt_ip": "0.0.0.0"
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli login-info list ${db_args} ${log_args} --format table
#+end_src

#+RESULTS:
#+begin_src org
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| Account ID                           | Last IP   | Last Attempt IP | Failed | Locked | Online | Last Login          |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+
| 019baeff-c69f-7571-8e0d-761e1cd3156c | 127.0.0.1 | 127.0.0.1       | 0      | N      | N      | 2026-01-12 00:17:34 |
+--------------------------------------+-----------+-----------------+--------+--------+--------+---------------------+

#+end_src

**** List specific feature flag

#+begin_src sh :wrap src json
export ORES_CLI_DB_PASSWORD
./ores.cli login-info list ${db_args} ${log_args} \
  --format json --key "019b1008-6da1-733c-a6e6-e942eaab2ed6" | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "last_login": "1969-12-31 23:00:00.000000000Z",
    "account_id": "019b1008-6da1-733c-a6e6-e942eaab2ed6",
    "failed_logins": 0,
    "locked": false,
    "online": false,
    "last_ip": "0.0.0.0",
    "last_attempt_ip": "0.0.0.0"
  }
]
#+end_src

*** Delete

Delete a feature flag by key.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli login-info delete ${db_args} ${log_args} \
  --key "Test feature3"
#+end_src

#+RESULTS:
#+begin_src text
#+end_src

*** Add

Add a new feature flag (not yet implemented).

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli login-info add ${db_args} ${log_args} --account-id "e7bddd23-c004-4652-99e1-8d4ff5856fe1"
#+end_src

#+RESULTS:
#+begin_src text
Successfully added login info for account: e7bddd23-c004-4652-99e1-8d4ff5856fe1
#+end_src

** Feature Flags

Feature flag management from the [[id:1EE1B07C-3EC4-9BC4-1C4B-5BD458A8B2E5][ORE Studio Variability Component]].

*** Help

Show available operations for feature flags.

#+begin_src sh :wrap src text
./ores.cli feature-flags --help
#+end_src

#+RESULTS:
#+begin_src text
feature-flags - Manage feature flags

Usage: ores.cli feature-flags <operation> [options]

Available operations:
   list           List feature flags as JSON or table (internal formats)
   delete         Delete a feature flag by key
   add            Add a new feature flag

For operation-specific options, use: feature-flags <operation> --help
#+end_src

*** List

List feature flags from the database.

**** List as JSON

#+begin_src sh :wrap src json
export ORES_CLI_DB_PASSWORD
./ores.cli feature-flags list ${db_args} ${log_args} --format json | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "enabled": false,
    "name": "system.bootstrap_mode",
    "description": "Indicates whether the system is in bootstrap mode (waiting for initial admin account).",
    "modified_by": "system"
  },
  {
    "version": 1,
    "enabled": false,
    "name": "system.user_signups",
    "description": "Controls whether user self-registration is allowed.",
    "modified_by": "system"
  },
  {
    "version": 1,
    "enabled": false,
    "name": "system.disable_password_validation",
    "description": "When enabled (1), disables strict password validation. FOR TESTING/DEVELOPMENT ONLY.",
    "modified_by": "system"
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli feature-flags list ${db_args} ${log_args} --format table
#+end_src

#+RESULTS:
#+begin_src org
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------------+-------------+-------------------------------+
| Name                                 | Version | Description                                                                                                         | Enabled | Change Reason     | Recorded By | Recorded At                   |
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------------+-------------+-------------------------------+
| system.bootstrap_mode                | 1       | Indicates whether the system is in bootstrap mode (waiting for initial admin account).                              | 0       | system.new_record | system      | 2026-01-11 21:39:16.000000000 |
| system.synthetic_data_generation     | 1       | Enables synthetic test data generation in the UI. FOR TESTING/DEVELOPMENT ONLY.                                     | 0       | system.new_record | system      | 2026-01-11 21:39:06.000000000 |
| system.disable_password_validation   | 1       | When enabled, disables strict password validation. FOR TESTING/DEVELOPMENT ONLY.                                    | 0       | system.new_record | system      | 2026-01-11 21:39:06.000000000 |
| system.signup_requires_authorization | 1       | Controls whether new signups require admin authorization. NOT YET IMPLEMENTED - enabling will cause signup to fail. | 0       | system.new_record | system      | 2026-01-11 21:39:06.000000000 |
| system.user_signups                  | 1       | Controls whether user self-registration is allowed.                                                                 | 0       | system.new_record | system      | 2026-01-11 21:39:06.000000000 |
+--------------------------------------+---------+---------------------------------------------------------------------------------------------------------------------+---------+-------------------+-------------+-------------------------------+

#+end_src

**** List specific entity

#+begin_src sh :wrap src json
export ORES_CLI_DB_PASSWORD
./ores.cli feature-flags list ${db_args} ${log_args} \
  --format json --key "system.bootstrap_mode" | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "enabled": false,
    "name": "system.bootstrap_mode",
    "description": "Indicates whether the system is in bootstrap mode (waiting for initial admin account).",
    "modified_by": "system"
  }
]
#+end_src

*** Add

Add a new feature flag.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli feature-flags add ${db_args} ${log_args} --name "Test feature3" \
    --description "Some description" --enabled 0 --modified-by admin
#+end_src

#+RESULTS:
#+begin_src text
Successfully added feature flag: Test feature3
#+end_src

*** Delete

Delete a feature flag by key.

#+begin_src sh  :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli feature-flags delete ${db_args} ${log_args} \
  --key "Test feature3"
#+end_src

#+RESULTS:
#+begin_src text
Feature flag deleted successfully: Test feature3
#+end_src

** Roles
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Role management operations from the [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio IAM Component]].

*** Help

Show available operations for roles.

#+begin_src sh :wrap src text
./ores.cli roles --help
#+end_src

#+RESULTS:
#+begin_src text
roles - Manage roles

Usage: ores.cli roles <operation> [options]

Available operations:
   list           List roles as JSON or table
   delete         Delete a role by ID
   add            Add a new role

For operation-specific options, use: roles <operation> --help
#+end_src

*** List

List roles from the database.

**** List all as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli roles list ${db_args} ${log_args} --format json | jq .[:3]
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "id": "0b24cff7-8095-4223-b060-d1fa0236a942",
    "name": "Admin",
    "description": "Full administrative access to all system functions",
    "recorded_by": "system",
    "change_reason_code": "system.new_record",
    "change_commentary": "System seed data",
    "recorded_at": "2026-01-11 21:39:06.000000000Z",
    "permission_codes": []
  },
  {
    "version": 1,
    "id": "888f6214-dd68-4b52-b86e-3c49b1f6f5cc",
    "name": "Operations",
    "description": "Operations - currency management and account viewing",
    "recorded_by": "system",
    "change_reason_code": "system.new_record",
    "change_commentary": "System seed data",
    "recorded_at": "2026-01-11 21:39:06.000000000Z",
    "permission_codes": []
  },
  {
    "version": 1,
    "id": "52a9730a-d868-4f21-967a-7959d3584924",
    "name": "Sales",
    "description": "Sales operations - read-only currency access",
    "recorded_by": "system",
    "change_reason_code": "system.new_record",
    "change_commentary": "System seed data",
    "recorded_at": "2026-01-11 21:39:06.000000000Z",
    "permission_codes": []
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli roles list ${db_args} ${log_args} --format table
#+end_src

#+RESULTS:
#+begin_src org
+--------------------------------------+-------------+---------------------------------------------------------------+-------------+-------------+---------+
| ID (UUID)                            | Name        | Description                                                   | Permissions | Recorded By | Version |
+--------------------------------------+-------------+---------------------------------------------------------------+-------------+-------------+---------+
| 0b24cff7-8095-4223-b060-d1fa0236a942 | Admin       | Full administrative access to all system functions            |             | system      | 1       |
| f6dd5c47-25f6-42e3-90d2-ac7abc88ad1b | Custom Role | Role with specific permissions                                |             | admin       | 1       |
| 888f6214-dd68-4b52-b86e-3c49b1f6f5cc | Operations  | Operations - currency management and account viewing          |             | system      | 1       |
| 52a9730a-d868-4f21-967a-7959d3584924 | Sales       | Sales operations - read-only currency access                  |             | system      | 1       |
| 6fde2b91-20ac-4c2e-a29d-a678bcfa92c9 | Support     | Support - read-only access to all resources and admin screens |             | system      | 1       |
| 929cb0de-016e-4647-8bc2-e7664f680d7d | Trading     | Trading operations - currency read access                     |             | system      | 1       |
| 7585f982-59df-403d-9bdb-bb757da248d3 | Viewer      | Viewer - basic read-only access to domain data                |             | system      | 1       |
+--------------------------------------+-------------+---------------------------------------------------------------+-------------+-------------+---------+

#+end_src

**** List specific role

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli roles list ${db_args} ${log_args} \
  --format json --key "Admin" | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "id": "0b24cff7-8095-4223-b060-d1fa0236a942",
    "name": "Admin",
    "description": "Full administrative access to all system functions",
    "recorded_by": "system",
    "change_reason_code": "system.new_record",
    "change_commentary": "System seed data",
    "recorded_at": "2026-01-11 21:39:06.000000000Z",
    "permission_codes": []
  }
]
#+end_src

*** Delete

Delete a role by ID.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli roles delete ${db_args} ${log_args} --key "Test Role"
#+end_src

#+RESULTS:
#+begin_src text
Role deleted successfully: eb9a2e5c-8015-4dc0-93c1-ef26ba60edd6
#+end_src

*** Add

Add a new role with optional permission assignments.

**** Add role

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli roles add ${db_args} ${log_args} \
  --name "Test Role" \
  --description "A test role for demonstration" \
  --recorded-by admin \
  --change-reason-code "system.new_record" \
  --change-commentary "Adding test role via CLI"
#+end_src

#+RESULTS:
#+begin_src text
Successfully added role: Test Role
#+end_src

**** Add role with permissions

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli roles add ${db_args} ${log_args} \
  --name "Custom Role" \
  --description "Role with specific permissions" \
  --recorded-by admin \
  --permission-code "currencies:read" \
  --permission-code "currencies:write"
#+end_src

#+RESULTS:
#+begin_src text
Successfully added role: Custom Role
#+end_src

** Permissions
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Permission management operations from the [[id:D00BEA0D-E501-C534-A013-E6F40C1A6097][ORE Studio IAM Component]].

*** Help

Show available operations for permissions.

#+begin_src sh :wrap src text
./ores.cli permissions --help
#+end_src

#+RESULTS:
#+begin_src text
permissions - Manage permissions

Usage: ores.cli permissions <operation> [options]

Available operations:
   list           List permissions as JSON or table
   delete         Delete a permission by ID
   add            Add a new permission

For operation-specific options, use: permissions <operation> --help
#+end_src

*** List

List permissions from the database.

**** List all as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli permissions list ${db_args} ${log_args} --format json | jq .[:5]
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "id": "1498c520-d1de-44dd-9e80-fc55eed99cad",
    "code": "*",
    "description": "Full access to all operations"
  },
  {
    "id": "bd12140d-8548-4a74-8c1c-f74a51c3b8f4",
    "code": "accounts:create",
    "description": "Create new user accounts"
  },
  {
    "id": "a8181f95-9630-45d2-aa87-329739235891",
    "code": "accounts:delete",
    "description": "Delete user accounts"
  },
  {
    "id": "9e41a6c8-ca64-42ef-85cb-824fd7831580",
    "code": "accounts:lock",
    "description": "Lock user accounts"
  },
  {
    "id": "154ff7c3-9fc0-43cb-b2a7-a04ca8d29377",
    "code": "accounts:read",
    "description": "View user account details"
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli permissions list ${db_args} ${log_args} --format table
#+end_src

#+RESULTS:
#+begin_src org
+--------------------------------------+-------------------------+---------------------------------------+
| ID (UUID)                            | Code                    | Description                           |
+--------------------------------------+-------------------------+---------------------------------------+
| 1498c520-d1de-44dd-9e80-fc55eed99cad | *                       | Full access to all operations         |
| bd12140d-8548-4a74-8c1c-f74a51c3b8f4 | accounts:create         | Create new user accounts              |
| a8181f95-9630-45d2-aa87-329739235891 | accounts:delete         | Delete user accounts                  |
| 9e41a6c8-ca64-42ef-85cb-824fd7831580 | accounts:lock           | Lock user accounts                    |
| 154ff7c3-9fc0-43cb-b2a7-a04ca8d29377 | accounts:read           | View user account details             |
| df9f78b9-d404-42d5-8e47-8d34dcd2f53e | accounts:reset_password | Force password reset on user accounts |
| 404da389-251c-45be-bff7-89f524dc8057 | accounts:unlock         | Unlock user accounts                  |
| 2fbe9929-74c6-4b79-9189-81274e71cf50 | accounts:update         | Modify user account settings          |
| 89449ee4-fd11-4d1b-b79a-a8ece124db15 | currencies:create       | Create new currencies                 |
| 9e5872f5-b38c-46c5-91df-955f152c936d | currencies:delete       | Delete currencies                     |
| 4086eb14-77d7-468b-9910-980f6125a71f | currencies:history      | View currency version history         |
| e4d53707-2815-42c6-996b-6e6c7d92a334 | currencies:read         | View currency details                 |
| caf0279f-6628-40f8-96e4-3b03e38eac9b | currencies:update       | Modify currency settings              |
| 2431fc5e-d8ab-418c-9cec-6ce11c2a8805 | flags:create            | Create new feature flags              |
| 8c888602-bc4a-41d4-8d44-fc4c0259220f | flags:delete            | Delete feature flags                  |
| 0db19b38-fda4-43af-8a41-acf441a098d2 | flags:read              | View feature flag status              |
| 62f0b1cb-fe50-4ee3-9c2e-9465c2932346 | flags:update            | Modify feature flag settings          |
| a0ef49da-964d-49a7-80bd-54da813f4989 | login_info:read         | View login history and info           |
| 0bb9f547-a6f3-4a3e-a042-a5211e0ec513 | roles:assign            | Assign roles to accounts              |
| 107b10f8-3dc1-4dbd-8a8a-370d00e6210f | roles:create            | Create new roles                      |
| 86c259d8-1598-449a-b47c-780c3311d52a | roles:delete            | Delete roles                          |
| be06c01a-1e2f-4f90-b41a-80cec99c980f | roles:read              | View role details                     |
| d2d8dead-f212-4c6f-8ec8-a80fd6800541 | roles:revoke            | Revoke roles from accounts            |
| 24836c1b-9851-4bd6-b34f-1952cd101ade | roles:update            | Modify role permissions               |
+--------------------------------------+-------------------------+---------------------------------------+

#+end_src

**** List specific permission

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli permissions list ${db_args} ${log_args} \
  --format json --key "accounts:create" | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "id": "bd12140d-8548-4a74-8c1c-f74a51c3b8f4",
    "code": "accounts:create",
    "description": "Create new user accounts"
  }
]
#+end_src

*** Delete

Delete a permission by ID.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli permissions delete ${db_args} ${log_args} \
  --key "currencies:audit"
#+end_src

#+RESULTS:
#+begin_src text
Permission deleted successfully: 63dce823-a4b1-451b-844e-b1baf52de3dc
#+end_src

*** Add

Add a new permission.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli permissions add ${db_args} ${log_args} \
  --code "currencies:audit" \
  --description "Permission to audit currency changes"
#+end_src

#+RESULTS:
#+begin_src text
Successfully added permission: currencies:audit
#+end_src

** Countries
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Country management operations from the [[id:BFD37E19-9CD3-1D74-C683-CA9E40A32E06][ORE Studio Geo Component]].

*** Help

Show available operations for countries.

#+begin_src sh :wrap src text
./ores.cli countries --help
#+end_src

*** List

List countries from the database.

**** List all as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli countries list ${db_args} ${log_args} --format json | jq .[:3]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli countries list ${db_args} ${log_args} --format table | head -n 15
#+end_src

#+RESULTS:
#+begin_src org
+---------+---------+---------+---------+-----------------------------------+---------------------------------------------------------------------------+----------------------+-------------+-------------------------------+
| Alpha-2 | Alpha-3 | Numeric | Version | Name                              | Official Name                                                             | Change Reason        | Recorded By | Recorded At                   |
+---------+---------+---------+---------+-----------------------------------+---------------------------------------------------------------------------+----------------------+-------------+-------------------------------+
| AE      | ARE     | 784     | 2       | United Arab Emirates2             | United Arab Emirates                                                      | common.rectification | newuser3    | 2026-01-11 21:56:58.000000000 |
| AD      | AND     | 020     | 1       | Andorra                           | Principality of Andorra                                                   | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AF      | AFG     | 004     | 1       | Afghanistan                       | Islamic Republic of Afghanistan                                           | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AG      | ATG     | 028     | 1       | Antigua and Barbuda               | Antigua and Barbuda                                                       | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AI      | AIA     | 660     | 1       | Anguilla                          | Anguilla                                                                  | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AL      | ALB     | 008     | 1       | Albania                           | Republic of Albania                                                       | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AM      | ARM     | 051     | 1       | Armenia                           | Republic of Armenia                                                       | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AO      | AGO     | 024     | 1       | Angola                            | Republic of Angola                                                        | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AQ      | ATA     | 010     | 1       | Antarctica                        | Antarctica                                                                | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AR      | ARG     | 032     | 1       | Argentina                         | Argentine Republic                                                        | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AS      | ASM     | 016     | 1       | American Samoa                    | American Samoa                                                            | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
| AT      | AUT     | 040     | 1       | Austria                           | Republic of Austria                                                       | system.new_record    | system      | 2026-01-11 21:39:07.000000000 |
#+end_src

**** List specific country

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli countries list ${db_args} ${log_args} \
  --format json --key "US" | jq .
#+end_src

*** Delete

Delete a country by alpha-2 code.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli countries delete ${db_args} ${log_args} \
  --key "XX"
#+end_src

*** Add

Add a new country.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli countries add ${db_args} ${log_args} \
  --alpha2-code "XX" \
  --alpha3-code "XXX" \
  --name "Test Country" \
  --numeric-code "999" \
  --official-name "The Republic of Test Country" \
  --recorded-by admin \
  --change-reason-code "system.new_record" \
  --change-commentary "Adding test country via CLI"
#+end_src

#+RESULTS:
#+begin_src text
#+end_src

** Change Reasons
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Change reason management operations from the [[id:E8D36E00-5F77-D0B4-B013-5D65707F66EC][ORE Studio Telemetry Component]].

*** Help

Show available operations for change reasons.

#+begin_src sh :wrap src text
./ores.cli change-reasons --help
#+end_src

*** List

List change reasons from the database.

**** List all as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli change-reasons list ${db_args} ${log_args} --format json | jq .[:5]
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "code": "system.initial_load",
    "description": "Initial system bootstrap or migration",
    "category_code": "system",
    "applies_to_amend": false,
    "applies_to_delete": false,
    "requires_commentary": false,
    "display_order": 0,
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  },
  {
    "version": 1,
    "code": "common.non_material_update",
    "description": "Non-material update (Touch)",
    "category_code": "common",
    "applies_to_amend": true,
    "applies_to_delete": false,
    "requires_commentary": false,
    "display_order": 10,
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  },
  {
    "version": 1,
    "code": "system.new_record",
    "description": "New record created during normal operations",
    "category_code": "system",
    "applies_to_amend": false,
    "applies_to_delete": false,
    "requires_commentary": false,
    "display_order": 10,
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  },
  {
    "version": 1,
    "code": "trade.fat_finger",
    "description": "Erroneous execution (wrong quantity/price)",
    "category_code": "trade",
    "applies_to_amend": true,
    "applies_to_delete": true,
    "requires_commentary": false,
    "display_order": 10,
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  },
  {
    "version": 1,
    "code": "common.rectification",
    "description": "User/Booking Error",
    "category_code": "common",
    "applies_to_amend": true,
    "applies_to_delete": true,
    "requires_commentary": false,
    "display_order": 20,
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli change-reasons list ${db_args} ${log_args} --format table
#+end_src

#+RESULTS:
#+begin_src org

+-----------------------------+----------+----------------------------------------------------+-------+--------+--------------+-------+-------------+---------+
| Code                        | Category | Description                                        | Amend | Delete | Req. Comment | Order | Recorded By | Version |
+-----------------------------+----------+----------------------------------------------------+-------+--------+--------------+-------+-------------+---------+
| system.initial_load         | system   | Initial system bootstrap or migration              | N     | N      | N            | 0     | system      | 1       |
| common.non_material_update  | common   | Non-material update (Touch)                        | Y     | N      | N            | 10    | system      | 1       |
| system.new_record           | system   | New record created during normal operations        | N     | N      | N            | 10    | system      | 1       |
| trade.fat_finger            | trade    | Erroneous execution (wrong quantity/price)         | Y     | Y      | N            | 10    | system      | 1       |
| common.rectification        | common   | User/Booking Error                                 | Y     | Y      | N            | 20    | system      | 1       |
| system.external_data_import | system   | External data import (requires data lineage)       | Y     | N      | Y            | 20    | system      | 1       |
| trade.system_malfunction    | trade    | Technical glitch or algorithm issue                | Y     | Y      | Y            | 20    | system      | 1       |
| common.duplicate            | common   | Duplicate Record                                   | N     | Y      | N            | 30    | system      | 1       |
| trade.corporate_action      | trade    | Stock split, dividend, or merger adjustment        | Y     | Y      | N            | 30    | system      | 1       |
| common.stale_data           | common   | Data not updated within required liquidity horizon | Y     | Y      | N            | 40    | system      | 1       |
| trade.allocation_swap       | trade    | House to client sub-account reallocation           | Y     | Y      | N            | 40    | system      | 1       |
| common.outlier_correction   | common   | Manual override after plausibility check failure   | Y     | Y      | Y            | 50    | system      | 1       |
| trade.re_booking            | trade    | Wrong legal entity correction                      | Y     | Y      | Y            | 50    | system      | 1       |
| common.feed_failure         | common   | Upstream vendor/API data issue                     | Y     | Y      | Y            | 60    | system      | 1       |
| common.mapping_error        | common   | Incorrect ID translation (e.g., ISIN to FIGI)      | Y     | Y      | Y            | 70    | system      | 1       |
| common.judgmental_override  | common   | Expert judgment when market prices unavailable     | Y     | Y      | Y            | 80    | system      | 1       |
| common.regulatory           | common   | Mandatory compliance adjustment                    | Y     | Y      | Y            | 90    | system      | 1       |
| common.other                | common   | Exceptional (requires audit note)                  | Y     | Y      | Y            | 1000  | system      | 1       |
| trade.other                 | trade    | Exceptional (requires audit note)                  | Y     | Y      | Y            | 1000  | system      | 1       |
+-----------------------------+----------+----------------------------------------------------+-------+--------+--------------+-------+-------------+---------+


#+end_src

**** List specific change reason

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli change-reasons list ${db_args} ${log_args} \
  --format json --key "data_correction" | jq .
#+end_src

*** Delete

Delete a change reason by code.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli change-reasons delete ${db_args} ${log_args} \
  --key "test_reason"
#+end_src

*** Add

Add a new change reason.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli change-reasons add ${db_args} ${log_args} \
  --code "test.reason" \
  --description "Test change reason for CLI demonstration" \
  --category-code "operational" \
  --applies-to-amend 1 \
  --applies-to-delete 0 \
  --requires-commentary 1 \
  --display-order 100 \
  --recorded-by admin \
  --change-commentary "Adding test change reason via CLI"
#+end_src

#+RESULTS:
#+begin_src text
#+end_src

** Change Reason Categories
   :PROPERTIES:
   :header-args+: :wrap src json
   :END:

Change reason category management operations from the [[id:E8D36E00-5F77-D0B4-B013-5D65707F66EC][ORE Studio Telemetry Component]].

*** Help

Show available operations for change reason categories.

#+begin_src sh :wrap src text
./ores.cli change-reason-categories --help
#+end_src

*** List

List change reason categories from the database.

**** List all as JSON

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli change-reason-categories list ${db_args} ${log_args} --format json | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "code": "common",
    "description": "Universal data quality reasons aligned with BCBS 239 and FRTB standards",
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  },
  {
    "version": 1,
    "code": "system",
    "description": "System-generated reasons for automatic operations (not user-selectable)",
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  },
  {
    "version": 1,
    "code": "trade",
    "description": "Trade lifecycle reasons aligned with FINRA and MiFID II standards",
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  }
]
#+end_src

**** List all as table

#+begin_src sh :wrap src org
export ORES_CLI_DB_PASSWORD
./ores.cli change-reason-categories list ${db_args} ${log_args} --format table
#+end_src

#+RESULTS:
#+begin_src org

+--------+-------------------------------------------------------------------------+-------------+---------+
| Code   | Description                                                             | Recorded By | Version |
+--------+-------------------------------------------------------------------------+-------------+---------+
| common | Universal data quality reasons aligned with BCBS 239 and FRTB standards | system      | 1       |
| system | System-generated reasons for automatic operations (not user-selectable) | system      | 1       |
| trade  | Trade lifecycle reasons aligned with FINRA and MiFID II standards       | system      | 1       |
+--------+-------------------------------------------------------------------------+-------------+---------+


#+end_src

**** List specific category

#+begin_src sh
export ORES_CLI_DB_PASSWORD
./ores.cli change-reason-categories list ${db_args} ${log_args} \
  --format json --key "common" | jq .
#+end_src

#+RESULTS:
#+begin_src json
[
  {
    "version": 1,
    "code": "common",
    "description": "Universal data quality reasons aligned with BCBS 239 and FRTB standards",
    "recorded_by": "system",
    "change_commentary": "System seed data - standard regulatory taxonomy",
    "recorded_at": "2026-01-11 21:39:05.000000000Z"
  }
]
#+end_src

*** Delete

Delete a change reason category by code.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli change-reason-categories delete ${db_args} ${log_args} \
  --key "test_category"
#+end_src

#+RESULTS:
#+begin_src text
Change reason category deleted successfully: test_category
#+end_src

*** Add

Add a new change reason category.

#+begin_src sh :wrap src text
export ORES_CLI_DB_PASSWORD
./ores.cli change-reason-categories add ${db_args} ${log_args} \
  --code "test_category" \
  --description "Test category for CLI demonstration" \
  --recorded-by admin \
  --change-commentary "Adding test category via CLI"
#+end_src

#+RESULTS:
#+begin_src text
Successfully added change reason category: test_category
#+end_src

* Footer

| Previous: [[id:46F5ED07-9E63-77B4-2783-E0147EFF45D0][Recipes]] |
